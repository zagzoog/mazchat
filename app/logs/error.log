[26-Mar-2025 17:51:49 Europe/London] Registration error: SQLSTATE[HY000]: General error: 1364 Field 'id' doesn't have a default value
[26-Mar-2025 18:07:13 Europe/London] Login failed for username: admin
[26-Mar-2025 18:07:23 Europe/London] Login failed for username: admin
[26-Mar-2025 18:08:57 Europe/London] Login failed for username: admin
[26-Mar-2025 18:09:53 Europe/London] DirectMessageHandler: Constructing plugin
[26-Mar-2025 18:09:53 Europe/London] LLMModelSelector: Constructing plugin
[26-Mar-2025 18:09:53 Europe/London] N8nWebhookHandler: Constructing with plugin ID: null
[26-Mar-2025 18:09:53 Europe/London] N8nWebhookHandler: Constructing plugin
[26-Mar-2025 18:09:53 Europe/London] N8nWebhookHandler: Construction completed
[26-Mar-2025 18:09:53 Europe/London] SameInSameOut: Constructing plugin
[26-Mar-2025 18:09:57 Europe/London] N8nWebhookHandler: Constructing with plugin ID: null
[26-Mar-2025 18:09:57 Europe/London] N8nWebhookHandler: Constructing plugin
[26-Mar-2025 18:09:57 Europe/London] N8nWebhookHandler: Construction completed
[26-Mar-2025 18:09:57 Europe/London] DirectMessageHandler: Constructing plugin
[26-Mar-2025 18:09:57 Europe/London] LLMModelSelector: Constructing plugin
[26-Mar-2025 18:09:57 Europe/London] SameInSameOut: Constructing plugin
[26-Mar-2025 18:09:59 Europe/London] DirectMessageHandler: Constructing plugin
[26-Mar-2025 18:09:59 Europe/London] LLMModelSelector: Constructing plugin
[26-Mar-2025 18:09:59 Europe/London] SameInSameOut: Constructing plugin
[26-Mar-2025 18:10:02 Europe/London] SameInSameOut: Constructing plugin
[26-Mar-2025 18:10:02 Europe/London] DirectMessageHandler: Constructing plugin
[26-Mar-2025 18:10:02 Europe/London] LLMModelSelector: Constructing plugin
[26-Mar-2025 18:10:04 Europe/London] DirectMessageHandler: Constructing plugin
[26-Mar-2025 18:10:04 Europe/London] LLMModelSelector: Constructing plugin
[26-Mar-2025 18:10:05 Europe/London] N8nWebhookHandler: Constructing with plugin ID: 12
[26-Mar-2025 18:10:05 Europe/London] N8nWebhookHandler: Constructing plugin
[26-Mar-2025 18:10:05 Europe/London] N8nWebhookHandler: Construction completed
[26-Mar-2025 18:10:05 Europe/London] Plugin loaded successfully: N8nWebhookHandler
[26-Mar-2025 18:10:05 Europe/London] N8nWebhookHandler: Activating plugin with ID: 12
[26-Mar-2025 18:10:05 Europe/London] Plugin N8nWebhookHandler: Activated with ID 12
[26-Mar-2025 18:10:05 Europe/London] N8nWebhookHandler: Creating/checking database tables
[26-Mar-2025 18:10:05 Europe/London] N8nWebhookHandler: Checking for existing settings
[26-Mar-2025 18:10:05 Europe/London] N8nWebhookHandler: No settings found, creating default settings
[26-Mar-2025 18:10:05 Europe/London] N8nWebhookHandler: Activation completed successfully
[26-Mar-2025 18:10:05 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 18:10:05 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 18:10:05 Europe/London] Plugin N8nWebhookHandler: Registering hook before_send_message
[26-Mar-2025 18:10:05 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:10:05 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 18:10:05 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:10:05 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 18:10:05 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:10:05 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:10:05 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 18:10:05 Europe/London] Plugin Class: N8nWebhookHandler
[26-Mar-2025 18:10:05 Europe/London] Plugin Instance: N8nWebhookHandler
[26-Mar-2025 18:10:05 Europe/London] Settings: Array
(
    [id] => 4
    [plugin_id] => 12
    [webhook_url] => 
    [is_active] => 1
    [timeout] => 30
    [created_at] => 2025-03-26 21:10:05
    [updated_at] => 2025-03-26 21:10:05
)

[26-Mar-2025 18:10:19 Europe/London] N8nWebhookHandler: Constructing with plugin ID: 12
[26-Mar-2025 18:10:19 Europe/London] N8nWebhookHandler: Constructing plugin
[26-Mar-2025 18:10:19 Europe/London] N8nWebhookHandler: Construction completed
[26-Mar-2025 18:10:19 Europe/London] Plugin loaded successfully: N8nWebhookHandler
[26-Mar-2025 18:10:19 Europe/London] N8nWebhookHandler: Activating plugin with ID: 12
[26-Mar-2025 18:10:19 Europe/London] Plugin N8nWebhookHandler: Activated with ID 12
[26-Mar-2025 18:10:19 Europe/London] N8nWebhookHandler: Creating/checking database tables
[26-Mar-2025 18:10:19 Europe/London] N8nWebhookHandler: Checking for existing settings
[26-Mar-2025 18:10:19 Europe/London] N8nWebhookHandler: Activation completed successfully
[26-Mar-2025 18:10:19 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 18:10:19 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 18:10:19 Europe/London] Plugin N8nWebhookHandler: Registering hook before_send_message
[26-Mar-2025 18:10:19 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:10:19 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 18:10:19 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:10:19 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 18:10:19 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:10:19 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:10:19 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 18:10:19 Europe/London] DirectMessageHandler: Constructing plugin
[26-Mar-2025 18:10:19 Europe/London] LLMModelSelector: Constructing plugin
[26-Mar-2025 18:10:21 Europe/London] DirectMessageHandler: Constructing plugin
[26-Mar-2025 18:10:21 Europe/London] LLMModelSelector: Constructing plugin
[26-Mar-2025 18:11:10 Europe/London] PHP Deprecated:  strtolower(): Passing null to parameter #1 ($string) of type string is deprecated in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\subscriptions.php on line 218
[26-Mar-2025 18:11:10 Europe/London] PHP Deprecated:  strtotime(): Passing null to parameter #1 ($datetime) of type string is deprecated in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\subscriptions.php on line 222
[26-Mar-2025 18:11:10 Europe/London] PHP Deprecated:  strtotime(): Passing null to parameter #1 ($datetime) of type string is deprecated in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\subscriptions.php on line 223
[26-Mar-2025 18:11:10 Europe/London] PHP Deprecated:  strtotime(): Passing null to parameter #1 ($datetime) of type string is deprecated in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\subscriptions.php on line 225
[26-Mar-2025 18:11:22 Europe/London] PHP Fatal error:  Uncaught Error: Call to undefined method Membership::cancelMembership() in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\subscriptions.php:47
Stack trace:
#0 {main}
  thrown in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\subscriptions.php on line 47
[26-Mar-2025 18:11:26 Europe/London] PHP Deprecated:  strtolower(): Passing null to parameter #1 ($string) of type string is deprecated in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\subscriptions.php on line 218
[26-Mar-2025 18:11:26 Europe/London] PHP Deprecated:  strtotime(): Passing null to parameter #1 ($datetime) of type string is deprecated in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\subscriptions.php on line 222
[26-Mar-2025 18:11:26 Europe/London] PHP Deprecated:  strtotime(): Passing null to parameter #1 ($datetime) of type string is deprecated in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\subscriptions.php on line 223
[26-Mar-2025 18:11:26 Europe/London] PHP Deprecated:  strtotime(): Passing null to parameter #1 ($datetime) of type string is deprecated in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\subscriptions.php on line 225
[26-Mar-2025 18:11:32 Europe/London] PHP Deprecated:  strtolower(): Passing null to parameter #1 ($string) of type string is deprecated in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\subscriptions.php on line 218
[26-Mar-2025 18:11:32 Europe/London] PHP Deprecated:  strtotime(): Passing null to parameter #1 ($datetime) of type string is deprecated in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\subscriptions.php on line 222
[26-Mar-2025 18:11:32 Europe/London] PHP Deprecated:  strtotime(): Passing null to parameter #1 ($datetime) of type string is deprecated in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\subscriptions.php on line 223
[26-Mar-2025 18:11:32 Europe/London] PHP Deprecated:  strtotime(): Passing null to parameter #1 ($datetime) of type string is deprecated in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\subscriptions.php on line 225
[26-Mar-2025 18:13:01 Europe/London] Error updating membership: SQLSTATE[01000]: Warning: 1265 Data truncated for column 'type' at row 1
[26-Mar-2025 18:13:01 Europe/London] PHP Fatal error:  Uncaught PDOException: SQLSTATE[01000]: Warning: 1265 Data truncated for column 'type' at row 1 in C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\models\Membership.php:56
Stack trace:
#0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\models\Membership.php(56): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\subscriptions.php(38): Membership->updateMembership()
#2 {main}
  thrown in C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\models\Membership.php on line 56
[26-Mar-2025 18:14:06 Europe/London] PHP Warning:  Undefined array key "monthly_revenue" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\subscriptions.php on line 186
[26-Mar-2025 18:14:06 Europe/London] PHP Deprecated:  number_format(): Passing null to parameter #1 ($num) of type float is deprecated in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\subscriptions.php on line 186
[26-Mar-2025 18:14:07 Europe/London] PHP Warning:  Undefined array key "total_active" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\index.php on line 175
[26-Mar-2025 18:14:07 Europe/London] PHP Warning:  Undefined array key "silver_count" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\index.php on line 205
[26-Mar-2025 18:14:07 Europe/London] PHP Warning:  Undefined array key "gold_count" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\index.php on line 211
[26-Mar-2025 18:14:07 Europe/London] PHP Warning:  Undefined array key "monthly_revenue" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\index.php on line 219
[26-Mar-2025 18:14:07 Europe/London] PHP Deprecated:  number_format(): Passing null to parameter #1 ($num) of type float is deprecated in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\index.php on line 219
[26-Mar-2025 18:14:07 Europe/London] PHP Warning:  Undefined array key "expired" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\index.php on line 225
[26-Mar-2025 18:14:09 Europe/London] PHP Warning:  Undefined array key "total_active" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\index.php on line 175
[26-Mar-2025 18:14:09 Europe/London] PHP Warning:  Undefined array key "silver_count" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\index.php on line 205
[26-Mar-2025 18:14:09 Europe/London] PHP Warning:  Undefined array key "gold_count" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\index.php on line 211
[26-Mar-2025 18:14:09 Europe/London] PHP Warning:  Undefined array key "monthly_revenue" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\index.php on line 219
[26-Mar-2025 18:14:09 Europe/London] PHP Deprecated:  number_format(): Passing null to parameter #1 ($num) of type float is deprecated in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\index.php on line 219
[26-Mar-2025 18:14:09 Europe/London] PHP Warning:  Undefined array key "expired" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\index.php on line 225
[26-Mar-2025 18:14:30 Europe/London] PHP Warning:  Undefined array key "monthly_revenue" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\subscriptions.php on line 186
[26-Mar-2025 18:14:30 Europe/London] PHP Deprecated:  number_format(): Passing null to parameter #1 ($num) of type float is deprecated in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\subscriptions.php on line 186
[26-Mar-2025 18:14:31 Europe/London] DirectMessageHandler: Constructing plugin
[26-Mar-2025 18:14:31 Europe/London] LLMModelSelector: Constructing plugin
[26-Mar-2025 18:14:33 Europe/London] PHP Warning:  Undefined array key "monthly_revenue" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\subscriptions.php on line 186
[26-Mar-2025 18:14:33 Europe/London] PHP Deprecated:  number_format(): Passing null to parameter #1 ($num) of type float is deprecated in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\subscriptions.php on line 186
[26-Mar-2025 18:14:35 Europe/London] PHP Warning:  Undefined array key "total_active" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\index.php on line 175
[26-Mar-2025 18:14:35 Europe/London] PHP Warning:  Undefined array key "silver_count" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\index.php on line 205
[26-Mar-2025 18:14:35 Europe/London] PHP Warning:  Undefined array key "gold_count" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\index.php on line 211
[26-Mar-2025 18:14:35 Europe/London] PHP Warning:  Undefined array key "monthly_revenue" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\index.php on line 219
[26-Mar-2025 18:14:35 Europe/London] PHP Deprecated:  number_format(): Passing null to parameter #1 ($num) of type float is deprecated in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\index.php on line 219
[26-Mar-2025 18:14:35 Europe/London] PHP Warning:  Undefined array key "expired" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\index.php on line 225
[26-Mar-2025 18:15:13 Europe/London] Checking conversation limit for user 8: current usage = 0, limit = 10
[26-Mar-2025 18:15:13 Europe/London] PluginManager: Loading plugins from directory: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins
[26-Mar-2025 18:15:13 Europe/London] PluginManager: Found plugin directories: Array
(
    [0] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler
    [1] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector
    [2] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler
    [3] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut
    [4] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin
)

[26-Mar-2025 18:15:13 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[26-Mar-2025 18:15:13 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[26-Mar-2025 18:15:13 Europe/London] PluginManager: Creating instance of plugin class: DirectMessageHandler
[26-Mar-2025 18:15:13 Europe/London] PluginManager: Plugin not found in database, creating record for: DirectMessageHandler
[26-Mar-2025 18:15:13 Europe/London] PluginManager ERROR: Failed to load plugin DirectMessageHandler: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 18:15:13 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 18:15:13 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[26-Mar-2025 18:15:13 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[26-Mar-2025 18:15:13 Europe/London] PluginManager: Creating instance of plugin class: LLMModelSelector
[26-Mar-2025 18:15:13 Europe/London] PluginManager: Plugin not found in database, creating record for: LLMModelSelector
[26-Mar-2025 18:15:13 Europe/London] PluginManager ERROR: Failed to load plugin LLMModelSelector: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 18:15:13 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 18:15:13 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[26-Mar-2025 18:15:13 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[26-Mar-2025 18:15:13 Europe/London] PluginManager: Creating instance of plugin class: N8nWebhookHandler
[26-Mar-2025 18:15:13 Europe/London] PluginManager: Instantiating plugin with ID: 12
[26-Mar-2025 18:15:13 Europe/London] N8nWebhookHandler: Constructing with plugin ID: 12
[26-Mar-2025 18:15:13 Europe/London] N8nWebhookHandler: Constructing plugin
[26-Mar-2025 18:15:13 Europe/London] N8nWebhookHandler: Construction completed
[26-Mar-2025 18:15:13 Europe/London] PluginManager: Activating plugin: N8nWebhookHandler
[26-Mar-2025 18:15:13 Europe/London] N8nWebhookHandler: Activating plugin with ID: 12
[26-Mar-2025 18:15:13 Europe/London] Plugin N8nWebhookHandler: Activated with ID 12
[26-Mar-2025 18:15:13 Europe/London] N8nWebhookHandler: Creating/checking database tables
[26-Mar-2025 18:15:13 Europe/London] N8nWebhookHandler: Checking for existing settings
[26-Mar-2025 18:15:13 Europe/London] N8nWebhookHandler: Activation completed successfully
[26-Mar-2025 18:15:13 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 18:15:13 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 18:15:13 Europe/London] Plugin N8nWebhookHandler: Registering hook before_send_message
[26-Mar-2025 18:15:13 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:15:13 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 18:15:13 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:15:13 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 18:15:13 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:15:13 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:15:13 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 18:15:13 Europe/London] PluginManager: Initializing plugin: N8nWebhookHandler
[26-Mar-2025 18:15:13 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 18:15:13 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 18:15:13 Europe/London] Plugin N8nWebhookHandler: Registering hook before_send_message
[26-Mar-2025 18:15:13 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:15:13 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 18:15:13 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:15:13 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 18:15:13 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:15:13 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:15:13 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 18:15:13 Europe/London] PluginManager: Plugin activated and initialized: N8nWebhookHandler
[26-Mar-2025 18:15:13 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[26-Mar-2025 18:15:13 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[26-Mar-2025 18:15:13 Europe/London] PluginManager: Creating instance of plugin class: SameInSameOut
[26-Mar-2025 18:15:13 Europe/London] PluginManager: Instantiating plugin with ID: 13
[26-Mar-2025 18:15:13 Europe/London] SameInSameOut: Constructing plugin
[26-Mar-2025 18:15:13 Europe/London] PluginManager: Activating plugin: SameInSameOut
[26-Mar-2025 18:15:13 Europe/London] Plugin SameInSameOut: Activated with ID 13
[26-Mar-2025 18:15:13 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[26-Mar-2025 18:15:13 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:15:13 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[26-Mar-2025 18:15:13 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:15:13 Europe/London] PluginManager: Initializing plugin: SameInSameOut
[26-Mar-2025 18:15:13 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[26-Mar-2025 18:15:13 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:15:13 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[26-Mar-2025 18:15:13 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:15:13 Europe/London] PluginManager: Plugin activated and initialized: SameInSameOut
[26-Mar-2025 18:15:13 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[26-Mar-2025 18:15:13 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[26-Mar-2025 18:15:13 Europe/London] PluginManager: Creating instance of plugin class: TestPlugin
[26-Mar-2025 18:15:13 Europe/London] PluginManager: Plugin not found in database, creating record for: TestPlugin
[26-Mar-2025 18:15:13 Europe/London] PluginManager ERROR: Failed to load plugin TestPlugin: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 18:15:13 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 18:15:13 Europe/London] PluginManager: Loaded plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[26-Mar-2025 18:15:13 Europe/London] PluginManager: Active plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[26-Mar-2025 18:15:13 Europe/London] === Starting message creation process ===
[26-Mar-2025 18:15:13 Europe/London] User authenticated successfully - User ID: 8
[26-Mar-2025 18:15:13 Europe/London] Received message data: {"conversation_id":"133","content":"hi"}
[26-Mar-2025 18:15:13 Europe/London] Message data validation passed
[26-Mar-2025 18:15:13 Europe/London] Checking question limit for user 8: current usage = 0, limit = 100
[26-Mar-2025 18:15:13 Europe/London] Question limit check passed
[26-Mar-2025 18:15:13 Europe/London] Fetching conversation and plugin info for conversation ID: 133
[26-Mar-2025 18:15:13 Europe/London] Found conversation - Plugin ID: 12, Plugin Name: N8nWebhookHandler, Plugin Active: yes
[26-Mar-2025 18:15:13 Europe/London] Created message data structure
[26-Mar-2025 18:15:13 Europe/London] Attempting to get plugin instance for: N8nWebhookHandler
[26-Mar-2025 18:15:13 Europe/London] Successfully got plugin instance of class: N8nWebhookHandler
[26-Mar-2025 18:15:13 Europe/London] Plugin hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:15:13 Europe/London] Executing before_send_message hook for plugin: N8nWebhookHandler
[26-Mar-2025 18:15:13 Europe/London] Plugin N8nWebhookHandler: Executing hook before_send_message
[26-Mar-2025 18:15:13 Europe/London] Plugin N8nWebhookHandler: Available hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:15:13 Europe/London] Plugin N8nWebhookHandler: Calling hook handler for before_send_message
[26-Mar-2025 18:15:13 Europe/London] N8nWebhookHandler: Starting message processing
[26-Mar-2025 18:15:13 Europe/London] N8nWebhookHandler: Message data: {"conversation_id":"133","content":"hi","role":"user"}
[26-Mar-2025 18:15:13 Europe/London] N8nWebhookHandler: Using webhook URL: https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
[26-Mar-2025 18:15:13 Europe/London] N8nWebhookHandler: Sending request data: {"message":"hi","conversation_id":"133","timestamp":"2025-03-26 18:15:13"}
[26-Mar-2025 18:15:13 Europe/London] N8nWebhookHandler: SSL certificate verification is disabled for testing
[26-Mar-2025 18:15:14 Europe/London] N8nWebhookHandler: Verbose curl output:
*   Trying 104.21.64.1:443...
* Connected to n8n.mazcode.com (104.21.64.1) port 443
* ALPN: curl offers h2,http/1.1
* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384
* ALPN: server accepted h2
* Server certificate:
*  subject: CN=mazcode.com
*  start date: Mar 21 01:54:39 2025 GMT
*  expire date: Jun 19 02:51:08 2025 GMT
*  issuer: C=US; O=Google Trust Services; CN=WE1
*  SSL certificate verify result: unable to get local issuer certificate (20), continuing anyway.
* using HTTP/2
* [HTTP/2] [1] OPENED stream for https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
* [HTTP/2] [1] [:method: POST]
* [HTTP/2] [1] [:scheme: https]
* [HTTP/2] [1] [:authority: n8n.mazcode.com]
* [HTTP/2] [1] [:path: /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f]
* [HTTP/2] [1] [content-type: application/json]
* [HTTP/2] [1] [accept: application/json]
* [HTTP/2] [1] [content-length: 74]
> POST /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f HTTP/2
Host: n8n.mazcode.com
Content-Type: application/json
Accept: application/json
Content-Length: 74

* old SSL session ID is stale, removing
< HTTP/2 200 
< date: Wed, 26 Mar 2025 18:15:14 GMT
< content-type: text/html; charset=utf-8
< vary: Accept-Encoding
< vary: Accept-Encoding
< cf-cache-status: DYNAMIC
< report-to: {"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=MeE3tyOywG7VNCuhPWxpo4gwTRNklLLpkcH5%2FNa9doj1wOMxT9tsXtksan8kmpcCSjFpG%2BES5ta0dBPXvE0GYtYc0rHMVK%2BSmm3UYKkvtfrAGZO8fljUl4Kbrtv%2Fzk1Y73I%3D"}],"group":"cf-nel","max_age":604800}
< nel: {"success_fraction":0,"report_to":"cf-nel","max_age":604800}
< server: cloudflare
< cf-ray: 9268a1d7eba2bb20-MXP
< alt-svc: h3=":443"; ma=86400
< server-timing: cfL4;desc="?proto=TCP&rtt=144294&min_rtt=97194&rtt_var=50120&sent=7&recv=9&lost=0&retrans=0&sent_bytes=3411&recv_bytes=908&delivery_rate=20929&cwnd=253&unsent_bytes=0&cid=4ad62447ff442aae&ts=1120&x=0"
< 
* Connection #0 to host n8n.mazcode.com left intact

[26-Mar-2025 18:15:14 Europe/London] N8nWebhookHandler: Webhook response code: 200
[26-Mar-2025 18:15:14 Europe/London] N8nWebhookHandler: Webhook response: مرحبًا! كيف يمكنني مساعدتك اليوم؟ 😊
[26-Mar-2025 18:15:14 Europe/London] N8nWebhookHandler: Message successfully processed by webhook
[26-Mar-2025 18:15:14 Europe/London] Plugin N8nWebhookHandler: Hook handler executed successfully with result: مرحبًا! كيف يمكنني مساعدتك اليوم؟ 😊
[26-Mar-2025 18:15:14 Europe/London] before_send_message hook executed successfully
[26-Mar-2025 18:15:14 Europe/London] Got response from before_send_message: مرحبًا! كيف يمكنني مساعدتك اليوم؟ 😊
[26-Mar-2025 18:15:14 Europe/London] Saving message to database
[26-Mar-2025 18:15:14 Europe/London] Message saved successfully with ID: 122
[26-Mar-2025 18:15:14 Europe/London] Executing after_send_message hook for plugin: N8nWebhookHandler
[26-Mar-2025 18:15:14 Europe/London] Plugin N8nWebhookHandler: Executing hook after_send_message
[26-Mar-2025 18:15:14 Europe/London] Plugin N8nWebhookHandler: Available hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:15:14 Europe/London] Plugin N8nWebhookHandler: Calling hook handler for after_send_message
[26-Mar-2025 18:15:14 Europe/London] N8nWebhookHandler: Starting message processing
[26-Mar-2025 18:15:14 Europe/London] N8nWebhookHandler: Message data: {"conversation_id":"133","content":"hi","role":"user"}
[26-Mar-2025 18:15:14 Europe/London] N8nWebhookHandler: Using webhook URL: https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
[26-Mar-2025 18:15:14 Europe/London] N8nWebhookHandler: Sending request data: {"message":"hi","conversation_id":"133","timestamp":"2025-03-26 18:15:14"}
[26-Mar-2025 18:15:14 Europe/London] N8nWebhookHandler: SSL certificate verification is disabled for testing
[26-Mar-2025 18:15:16 Europe/London] N8nWebhookHandler: Verbose curl output:
*   Trying 104.21.64.1:443...
* Connected to n8n.mazcode.com (104.21.64.1) port 443
* ALPN: curl offers h2,http/1.1
* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384
* ALPN: server accepted h2
* Server certificate:
*  subject: CN=mazcode.com
*  start date: Mar 21 01:54:39 2025 GMT
*  expire date: Jun 19 02:51:08 2025 GMT
*  issuer: C=US; O=Google Trust Services; CN=WE1
*  SSL certificate verify result: unable to get local issuer certificate (20), continuing anyway.
* using HTTP/2
* [HTTP/2] [1] OPENED stream for https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
* [HTTP/2] [1] [:method: POST]
* [HTTP/2] [1] [:scheme: https]
* [HTTP/2] [1] [:authority: n8n.mazcode.com]
* [HTTP/2] [1] [:path: /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f]
* [HTTP/2] [1] [content-type: application/json]
* [HTTP/2] [1] [accept: application/json]
* [HTTP/2] [1] [content-length: 74]
> POST /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f HTTP/2
Host: n8n.mazcode.com
Content-Type: application/json
Accept: application/json
Content-Length: 74

* old SSL session ID is stale, removing
< HTTP/2 200 
< date: Wed, 26 Mar 2025 18:15:16 GMT
< content-type: text/html; charset=utf-8
< vary: Accept-Encoding
< vary: Accept-Encoding
< cf-cache-status: DYNAMIC
< report-to: {"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=M3WwPSkvz9k3fGEzpwQ9suS8%2BVMP%2FvCT%2FMo0EA%2Bxggx3nsyYVZvIe8pzTQRhFeTLIAplGijxAcP9lb0gz5D86%2B%2FJ%2BNQhWXtAslrdPv8AhaGZ68nQVqQ0xcw3Znzm6LHNZko%3D"}],"group":"cf-nel","max_age":604800}
< nel: {"success_fraction":0,"report_to":"cf-nel","max_age":604800}
< server: cloudflare
< cf-ray: 9268a1df9f91edb6-MXP
< alt-svc: h3=":443"; ma=86400
< server-timing: cfL4;desc="?proto=TCP&rtt=93894&min_rtt=89088&rtt_var=28754&sent=7&recv=9&lost=0&retrans=0&sent_bytes=3410&recv_bytes=908&delivery_rate=31878&cwnd=253&unsent_bytes=0&cid=92fd4286814398ba&ts=1360&x=0"
< 
* Connection #0 to host n8n.mazcode.com left intact

[26-Mar-2025 18:15:16 Europe/London] N8nWebhookHandler: Webhook response code: 200
[26-Mar-2025 18:15:16 Europe/London] N8nWebhookHandler: Webhook response: مرحبًا بك! كيف يمكنني مساعدتك اليوم؟ 😊
[26-Mar-2025 18:15:16 Europe/London] N8nWebhookHandler: Message successfully processed by webhook
[26-Mar-2025 18:15:16 Europe/London] Plugin N8nWebhookHandler: Hook handler executed successfully with result: مرحبًا بك! كيف يمكنني مساعدتك اليوم؟ 😊
[26-Mar-2025 18:15:16 Europe/London] after_send_message hook executed successfully
[26-Mar-2025 18:15:16 Europe/London] Saving plugin response to database: مرحبًا بك! كيف يمكنني مساعدتك اليوم؟ 😊
[26-Mar-2025 18:15:16 Europe/London] Plugin response saved with ID: 123
[26-Mar-2025 18:15:16 Europe/London] === Message creation process completed successfully ===
[26-Mar-2025 18:15:16 Europe/London] Sending response to client: {"success":true,"data":{"message":{"id":"122","conversation_id":"133","content":"hi","role":"user"},"assistant_message":{"id":"123","conversation_id":"133","content":"\u0645\u0631\u062d\u0628\u064b\u0627 \u0628\u0643! \u0643\u064a\u0641 \u064a\u0645\u0643\u0646\u0646\u064a \u0645\u0633\u0627\u0639\u062f\u062a\u0643 \u0627\u0644\u064a\u0648\u0645\u061f \ud83d\ude0a","role":"assistant"}}}
[26-Mar-2025 18:15:21 Europe/London] PluginManager: Loading plugins from directory: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins
[26-Mar-2025 18:15:21 Europe/London] PluginManager: Found plugin directories: Array
(
    [0] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler
    [1] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector
    [2] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler
    [3] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut
    [4] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin
)

[26-Mar-2025 18:15:21 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[26-Mar-2025 18:15:21 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[26-Mar-2025 18:15:21 Europe/London] PluginManager: Creating instance of plugin class: DirectMessageHandler
[26-Mar-2025 18:15:21 Europe/London] PluginManager: Plugin not found in database, creating record for: DirectMessageHandler
[26-Mar-2025 18:15:21 Europe/London] PluginManager ERROR: Failed to load plugin DirectMessageHandler: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 18:15:21 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 18:15:21 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[26-Mar-2025 18:15:21 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[26-Mar-2025 18:15:21 Europe/London] PluginManager: Creating instance of plugin class: LLMModelSelector
[26-Mar-2025 18:15:21 Europe/London] PluginManager: Plugin not found in database, creating record for: LLMModelSelector
[26-Mar-2025 18:15:21 Europe/London] PluginManager ERROR: Failed to load plugin LLMModelSelector: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 18:15:21 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 18:15:21 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[26-Mar-2025 18:15:21 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[26-Mar-2025 18:15:21 Europe/London] PluginManager: Creating instance of plugin class: N8nWebhookHandler
[26-Mar-2025 18:15:21 Europe/London] PluginManager: Instantiating plugin with ID: 12
[26-Mar-2025 18:15:21 Europe/London] N8nWebhookHandler: Constructing with plugin ID: 12
[26-Mar-2025 18:15:21 Europe/London] N8nWebhookHandler: Constructing plugin
[26-Mar-2025 18:15:21 Europe/London] N8nWebhookHandler: Construction completed
[26-Mar-2025 18:15:21 Europe/London] PluginManager: Activating plugin: N8nWebhookHandler
[26-Mar-2025 18:15:21 Europe/London] N8nWebhookHandler: Activating plugin with ID: 12
[26-Mar-2025 18:15:21 Europe/London] Plugin N8nWebhookHandler: Activated with ID 12
[26-Mar-2025 18:15:21 Europe/London] N8nWebhookHandler: Creating/checking database tables
[26-Mar-2025 18:15:21 Europe/London] N8nWebhookHandler: Checking for existing settings
[26-Mar-2025 18:15:21 Europe/London] N8nWebhookHandler: Activation completed successfully
[26-Mar-2025 18:15:21 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 18:15:21 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 18:15:21 Europe/London] Plugin N8nWebhookHandler: Registering hook before_send_message
[26-Mar-2025 18:15:21 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:15:21 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 18:15:21 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:15:21 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 18:15:21 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:15:21 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:15:21 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 18:15:21 Europe/London] PluginManager: Initializing plugin: N8nWebhookHandler
[26-Mar-2025 18:15:21 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 18:15:21 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 18:15:21 Europe/London] Plugin N8nWebhookHandler: Registering hook before_send_message
[26-Mar-2025 18:15:21 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:15:21 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 18:15:21 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:15:21 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 18:15:21 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:15:21 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:15:21 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 18:15:21 Europe/London] PluginManager: Plugin activated and initialized: N8nWebhookHandler
[26-Mar-2025 18:15:21 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[26-Mar-2025 18:15:21 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[26-Mar-2025 18:15:21 Europe/London] PluginManager: Creating instance of plugin class: SameInSameOut
[26-Mar-2025 18:15:21 Europe/London] PluginManager: Instantiating plugin with ID: 13
[26-Mar-2025 18:15:21 Europe/London] SameInSameOut: Constructing plugin
[26-Mar-2025 18:15:21 Europe/London] PluginManager: Activating plugin: SameInSameOut
[26-Mar-2025 18:15:21 Europe/London] Plugin SameInSameOut: Activated with ID 13
[26-Mar-2025 18:15:21 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[26-Mar-2025 18:15:21 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:15:21 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[26-Mar-2025 18:15:21 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:15:21 Europe/London] PluginManager: Initializing plugin: SameInSameOut
[26-Mar-2025 18:15:21 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[26-Mar-2025 18:15:21 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:15:21 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[26-Mar-2025 18:15:21 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:15:21 Europe/London] PluginManager: Plugin activated and initialized: SameInSameOut
[26-Mar-2025 18:15:21 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[26-Mar-2025 18:15:21 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[26-Mar-2025 18:15:21 Europe/London] PluginManager: Creating instance of plugin class: TestPlugin
[26-Mar-2025 18:15:21 Europe/London] PluginManager: Plugin not found in database, creating record for: TestPlugin
[26-Mar-2025 18:15:21 Europe/London] PluginManager ERROR: Failed to load plugin TestPlugin: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 18:15:21 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 18:15:21 Europe/London] PluginManager: Loaded plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[26-Mar-2025 18:15:21 Europe/London] PluginManager: Active plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[26-Mar-2025 18:15:21 Europe/London] === Starting message creation process ===
[26-Mar-2025 18:15:21 Europe/London] User authenticated successfully - User ID: 8
[26-Mar-2025 18:15:21 Europe/London] Received message data: {"conversation_id":"133","content":"hi"}
[26-Mar-2025 18:15:21 Europe/London] Message data validation passed
[26-Mar-2025 18:15:21 Europe/London] Checking question limit for user 8: current usage = 0, limit = 100
[26-Mar-2025 18:15:21 Europe/London] Question limit check passed
[26-Mar-2025 18:15:21 Europe/London] Fetching conversation and plugin info for conversation ID: 133
[26-Mar-2025 18:15:21 Europe/London] Found conversation - Plugin ID: 13, Plugin Name: SameInSameOut, Plugin Active: yes
[26-Mar-2025 18:15:21 Europe/London] Created message data structure
[26-Mar-2025 18:15:21 Europe/London] Attempting to get plugin instance for: SameInSameOut
[26-Mar-2025 18:15:21 Europe/London] Successfully got plugin instance of class: SameInSameOut
[26-Mar-2025 18:15:21 Europe/London] Plugin hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:15:21 Europe/London] Executing before_send_message hook for plugin: SameInSameOut
[26-Mar-2025 18:15:21 Europe/London] Plugin SameInSameOut: Executing hook before_send_message
[26-Mar-2025 18:15:21 Europe/London] Plugin SameInSameOut: Available hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:15:21 Europe/London] Plugin SameInSameOut: Calling hook handler for before_send_message
[26-Mar-2025 18:15:21 Europe/London] Plugin SameInSameOut: Hook handler executed successfully with result: hi
[26-Mar-2025 18:15:21 Europe/London] before_send_message hook executed successfully
[26-Mar-2025 18:15:21 Europe/London] Got response from before_send_message: hi
[26-Mar-2025 18:15:21 Europe/London] Saving message to database
[26-Mar-2025 18:15:21 Europe/London] Message saved successfully with ID: 124
[26-Mar-2025 18:15:21 Europe/London] Executing after_send_message hook for plugin: SameInSameOut
[26-Mar-2025 18:15:21 Europe/London] Plugin SameInSameOut: Executing hook after_send_message
[26-Mar-2025 18:15:21 Europe/London] Plugin SameInSameOut: Available hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:15:21 Europe/London] Plugin SameInSameOut: Calling hook handler for after_send_message
[26-Mar-2025 18:15:21 Europe/London] Plugin SameInSameOut: Hook handler executed successfully with result: hi
[26-Mar-2025 18:15:21 Europe/London] after_send_message hook executed successfully
[26-Mar-2025 18:15:21 Europe/London] Saving plugin response to database: hi
[26-Mar-2025 18:15:21 Europe/London] Plugin response saved with ID: 125
[26-Mar-2025 18:15:21 Europe/London] === Message creation process completed successfully ===
[26-Mar-2025 18:15:21 Europe/London] Sending response to client: {"success":true,"data":{"message":{"id":"124","conversation_id":"133","content":"hi","role":"user"},"assistant_message":{"id":"125","conversation_id":"133","content":"hi","role":"assistant"}}}
[26-Mar-2025 18:56:45 Europe/London] PluginManager: Loading plugins from directory: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins
[26-Mar-2025 18:56:45 Europe/London] PluginManager: Found plugin directories: Array
(
    [0] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler
    [1] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector
    [2] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler
    [3] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut
    [4] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin
)

[26-Mar-2025 18:56:45 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[26-Mar-2025 18:56:45 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[26-Mar-2025 18:56:45 Europe/London] PluginManager: Creating instance of plugin class: DirectMessageHandler
[26-Mar-2025 18:56:45 Europe/London] PluginManager: Plugin not found in database, creating record for: DirectMessageHandler
[26-Mar-2025 18:56:45 Europe/London] PluginManager ERROR: Failed to load plugin DirectMessageHandler: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 18:56:45 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 18:56:45 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[26-Mar-2025 18:56:45 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[26-Mar-2025 18:56:45 Europe/London] PluginManager: Creating instance of plugin class: LLMModelSelector
[26-Mar-2025 18:56:45 Europe/London] PluginManager: Plugin not found in database, creating record for: LLMModelSelector
[26-Mar-2025 18:56:45 Europe/London] PluginManager ERROR: Failed to load plugin LLMModelSelector: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 18:56:45 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 18:56:45 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[26-Mar-2025 18:56:45 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[26-Mar-2025 18:56:45 Europe/London] PluginManager: Creating instance of plugin class: N8nWebhookHandler
[26-Mar-2025 18:56:45 Europe/London] PluginManager: Instantiating plugin with ID: 12
[26-Mar-2025 18:56:45 Europe/London] N8nWebhookHandler: Constructing with plugin ID: 12
[26-Mar-2025 18:56:45 Europe/London] N8nWebhookHandler: Constructing plugin
[26-Mar-2025 18:56:45 Europe/London] N8nWebhookHandler: Construction completed
[26-Mar-2025 18:56:45 Europe/London] PluginManager: Activating plugin: N8nWebhookHandler
[26-Mar-2025 18:56:45 Europe/London] N8nWebhookHandler: Activating plugin with ID: 12
[26-Mar-2025 18:56:45 Europe/London] Plugin N8nWebhookHandler: Activated with ID 12
[26-Mar-2025 18:56:45 Europe/London] N8nWebhookHandler: Creating/checking database tables
[26-Mar-2025 18:56:45 Europe/London] N8nWebhookHandler: Checking for existing settings
[26-Mar-2025 18:56:45 Europe/London] N8nWebhookHandler: Activation completed successfully
[26-Mar-2025 18:56:45 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 18:56:45 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 18:56:45 Europe/London] Plugin N8nWebhookHandler: Registering hook before_send_message
[26-Mar-2025 18:56:45 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:56:45 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 18:56:45 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:56:45 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 18:56:45 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:56:45 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:56:45 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 18:56:45 Europe/London] PluginManager: Initializing plugin: N8nWebhookHandler
[26-Mar-2025 18:56:45 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 18:56:45 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 18:56:45 Europe/London] Plugin N8nWebhookHandler: Registering hook before_send_message
[26-Mar-2025 18:56:45 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:56:45 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 18:56:45 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:56:45 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 18:56:45 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:56:45 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:56:45 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 18:56:45 Europe/London] PluginManager: Plugin activated and initialized: N8nWebhookHandler
[26-Mar-2025 18:56:45 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[26-Mar-2025 18:56:45 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[26-Mar-2025 18:56:45 Europe/London] PluginManager: Creating instance of plugin class: SameInSameOut
[26-Mar-2025 18:56:45 Europe/London] PluginManager: Instantiating plugin with ID: 13
[26-Mar-2025 18:56:45 Europe/London] SameInSameOut: Constructing plugin
[26-Mar-2025 18:56:45 Europe/London] PluginManager: Activating plugin: SameInSameOut
[26-Mar-2025 18:56:45 Europe/London] Plugin SameInSameOut: Activated with ID 13
[26-Mar-2025 18:56:45 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[26-Mar-2025 18:56:45 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:56:45 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[26-Mar-2025 18:56:45 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:56:45 Europe/London] PluginManager: Initializing plugin: SameInSameOut
[26-Mar-2025 18:56:45 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[26-Mar-2025 18:56:45 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:56:45 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[26-Mar-2025 18:56:45 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:56:45 Europe/London] PluginManager: Plugin activated and initialized: SameInSameOut
[26-Mar-2025 18:56:45 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[26-Mar-2025 18:56:45 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[26-Mar-2025 18:56:45 Europe/London] PluginManager: Creating instance of plugin class: TestPlugin
[26-Mar-2025 18:56:45 Europe/London] PluginManager: Plugin not found in database, creating record for: TestPlugin
[26-Mar-2025 18:56:45 Europe/London] PluginManager ERROR: Failed to load plugin TestPlugin: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 18:56:45 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 18:56:45 Europe/London] PluginManager: Loaded plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[26-Mar-2025 18:56:45 Europe/London] PluginManager: Active plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[26-Mar-2025 18:56:45 Europe/London] === Starting message creation process ===
[26-Mar-2025 18:56:45 Europe/London] User authenticated successfully - User ID: 8
[26-Mar-2025 18:56:45 Europe/London] Received message data: {"conversation_id":133,"content":"HI"}
[26-Mar-2025 18:56:45 Europe/London] Message data validation passed
[26-Mar-2025 18:56:45 Europe/London] Checking question limit for user 8: current usage = 0, limit = 100
[26-Mar-2025 18:56:45 Europe/London] Question limit check passed
[26-Mar-2025 18:56:45 Europe/London] Fetching conversation and plugin info for conversation ID: 133
[26-Mar-2025 18:56:45 Europe/London] Found conversation - Plugin ID: 13, Plugin Name: SameInSameOut, Plugin Active: yes
[26-Mar-2025 18:56:45 Europe/London] Created message data structure
[26-Mar-2025 18:56:45 Europe/London] Attempting to get plugin instance for: SameInSameOut
[26-Mar-2025 18:56:45 Europe/London] Successfully got plugin instance of class: SameInSameOut
[26-Mar-2025 18:56:45 Europe/London] Plugin hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:56:45 Europe/London] Executing before_send_message hook for plugin: SameInSameOut
[26-Mar-2025 18:56:45 Europe/London] Plugin SameInSameOut: Executing hook before_send_message
[26-Mar-2025 18:56:45 Europe/London] Plugin SameInSameOut: Available hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:56:45 Europe/London] Plugin SameInSameOut: Calling hook handler for before_send_message
[26-Mar-2025 18:56:45 Europe/London] Plugin SameInSameOut: Hook handler executed successfully with result: HI
[26-Mar-2025 18:56:45 Europe/London] before_send_message hook executed successfully
[26-Mar-2025 18:56:45 Europe/London] Got response from before_send_message: HI
[26-Mar-2025 18:56:45 Europe/London] Saving message to database
[26-Mar-2025 18:56:45 Europe/London] Message saved successfully with ID: 126
[26-Mar-2025 18:56:45 Europe/London] Executing after_send_message hook for plugin: SameInSameOut
[26-Mar-2025 18:56:45 Europe/London] Plugin SameInSameOut: Executing hook after_send_message
[26-Mar-2025 18:56:45 Europe/London] Plugin SameInSameOut: Available hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 18:56:45 Europe/London] Plugin SameInSameOut: Calling hook handler for after_send_message
[26-Mar-2025 18:56:45 Europe/London] Plugin SameInSameOut: Hook handler executed successfully with result: HI
[26-Mar-2025 18:56:45 Europe/London] after_send_message hook executed successfully
[26-Mar-2025 18:56:45 Europe/London] Saving plugin response to database: HI
[26-Mar-2025 18:56:45 Europe/London] Plugin response saved with ID: 127
[26-Mar-2025 18:56:45 Europe/London] === Message creation process completed successfully ===
[26-Mar-2025 18:56:45 Europe/London] Sending response to client: {"success":true,"data":{"message":{"id":"126","conversation_id":133,"content":"HI","role":"user"},"assistant_message":{"id":"127","conversation_id":133,"content":"HI","role":"assistant"}}}
[26-Mar-2025 19:06:59 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 4
[26-Mar-2025 19:06:59 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 9
[26-Mar-2025 19:06:59 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 10
[26-Mar-2025 19:06:59 Europe/London] PHP Deprecated:  rtrim(): Passing null to parameter #1 ($string) of type string is deprecated in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 13
[26-Mar-2025 19:06:59 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 24
[26-Mar-2025 19:06:59 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 9
[26-Mar-2025 19:06:59 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 10
[26-Mar-2025 19:06:59 Europe/London] PHP Deprecated:  rtrim(): Passing null to parameter #1 ($string) of type string is deprecated in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 13
[26-Mar-2025 19:06:59 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\index.php on line 38
[26-Mar-2025 19:06:59 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 24
[26-Mar-2025 19:06:59 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 9
[26-Mar-2025 19:06:59 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 10
[26-Mar-2025 19:06:59 Europe/London] PHP Deprecated:  rtrim(): Passing null to parameter #1 ($string) of type string is deprecated in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 13
[26-Mar-2025 19:06:59 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\index.php on line 44
[26-Mar-2025 19:07:00 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 4
[26-Mar-2025 19:07:00 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 9
[26-Mar-2025 19:07:00 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 10
[26-Mar-2025 19:07:00 Europe/London] PHP Deprecated:  rtrim(): Passing null to parameter #1 ($string) of type string is deprecated in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 13
[26-Mar-2025 19:07:00 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 24
[26-Mar-2025 19:07:00 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 9
[26-Mar-2025 19:07:00 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 10
[26-Mar-2025 19:07:00 Europe/London] PHP Deprecated:  rtrim(): Passing null to parameter #1 ($string) of type string is deprecated in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 13
[26-Mar-2025 19:07:00 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\index.php on line 38
[26-Mar-2025 19:07:00 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 24
[26-Mar-2025 19:07:00 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 9
[26-Mar-2025 19:07:00 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 10
[26-Mar-2025 19:07:00 Europe/London] PHP Deprecated:  rtrim(): Passing null to parameter #1 ($string) of type string is deprecated in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 13
[26-Mar-2025 19:07:00 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\index.php on line 44
[26-Mar-2025 19:08:16 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 4
[26-Mar-2025 19:08:16 Europe/London] PHP Warning:  Trying to access array offset on null in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 4
[26-Mar-2025 19:08:16 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 9
[26-Mar-2025 19:08:16 Europe/London] PHP Warning:  Trying to access array offset on null in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 9
[26-Mar-2025 19:08:16 Europe/London] PHP Deprecated:  rtrim(): Passing null to parameter #1 ($string) of type string is deprecated in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 12
[26-Mar-2025 19:08:16 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 23
[26-Mar-2025 19:08:16 Europe/London] PHP Warning:  Trying to access array offset on null in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 23
[26-Mar-2025 19:08:16 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 24
[26-Mar-2025 19:08:16 Europe/London] PHP Warning:  Trying to access array offset on null in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 24
[26-Mar-2025 19:08:16 Europe/London] PHP Deprecated:  rtrim(): Passing null to parameter #1 ($string) of type string is deprecated in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 27
[26-Mar-2025 19:08:16 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\index.php on line 38
[26-Mar-2025 19:08:16 Europe/London] PHP Warning:  Trying to access array offset on null in C:\Users\zagzo\Downloads\UniServerZ\www\chat\index.php on line 38
[26-Mar-2025 19:08:16 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 23
[26-Mar-2025 19:08:16 Europe/London] PHP Warning:  Trying to access array offset on null in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 23
[26-Mar-2025 19:08:16 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 24
[26-Mar-2025 19:08:16 Europe/London] PHP Warning:  Trying to access array offset on null in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 24
[26-Mar-2025 19:08:16 Europe/London] PHP Deprecated:  rtrim(): Passing null to parameter #1 ($string) of type string is deprecated in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 27
[26-Mar-2025 19:08:16 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\index.php on line 44
[26-Mar-2025 19:08:16 Europe/London] PHP Warning:  Trying to access array offset on null in C:\Users\zagzo\Downloads\UniServerZ\www\chat\index.php on line 44
[26-Mar-2025 19:08:18 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 4
[26-Mar-2025 19:08:18 Europe/London] PHP Warning:  Trying to access array offset on null in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 4
[26-Mar-2025 19:08:18 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 9
[26-Mar-2025 19:08:18 Europe/London] PHP Warning:  Trying to access array offset on null in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 9
[26-Mar-2025 19:08:18 Europe/London] PHP Deprecated:  rtrim(): Passing null to parameter #1 ($string) of type string is deprecated in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 12
[26-Mar-2025 19:08:18 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 23
[26-Mar-2025 19:08:18 Europe/London] PHP Warning:  Trying to access array offset on null in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 23
[26-Mar-2025 19:08:18 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 24
[26-Mar-2025 19:08:18 Europe/London] PHP Warning:  Trying to access array offset on null in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 24
[26-Mar-2025 19:08:18 Europe/London] PHP Deprecated:  rtrim(): Passing null to parameter #1 ($string) of type string is deprecated in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 27
[26-Mar-2025 19:08:18 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\index.php on line 38
[26-Mar-2025 19:08:18 Europe/London] PHP Warning:  Trying to access array offset on null in C:\Users\zagzo\Downloads\UniServerZ\www\chat\index.php on line 38
[26-Mar-2025 19:08:18 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 23
[26-Mar-2025 19:08:18 Europe/London] PHP Warning:  Trying to access array offset on null in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 23
[26-Mar-2025 19:08:18 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 24
[26-Mar-2025 19:08:18 Europe/London] PHP Warning:  Trying to access array offset on null in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 24
[26-Mar-2025 19:08:18 Europe/London] PHP Deprecated:  rtrim(): Passing null to parameter #1 ($string) of type string is deprecated in C:\Users\zagzo\Downloads\UniServerZ\www\chat\path_config.php on line 27
[26-Mar-2025 19:08:18 Europe/London] PHP Warning:  Trying to access array offset on true in C:\Users\zagzo\Downloads\UniServerZ\www\chat\index.php on line 44
[26-Mar-2025 19:08:18 Europe/London] PHP Warning:  Trying to access array offset on null in C:\Users\zagzo\Downloads\UniServerZ\www\chat\index.php on line 44
[26-Mar-2025 19:16:38 Europe/London] PluginManager: Loading plugins from directory: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins
[26-Mar-2025 19:16:38 Europe/London] PluginManager: Found plugin directories: Array
(
    [0] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler
    [1] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector
    [2] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler
    [3] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut
    [4] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin
)

[26-Mar-2025 19:16:38 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[26-Mar-2025 19:16:38 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[26-Mar-2025 19:16:38 Europe/London] PluginManager: Creating instance of plugin class: DirectMessageHandler
[26-Mar-2025 19:16:38 Europe/London] PluginManager: Plugin not found in database, creating record for: DirectMessageHandler
[26-Mar-2025 19:16:38 Europe/London] PluginManager ERROR: Failed to load plugin DirectMessageHandler: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 19:16:38 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 19:16:38 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[26-Mar-2025 19:16:38 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[26-Mar-2025 19:16:38 Europe/London] PluginManager: Creating instance of plugin class: LLMModelSelector
[26-Mar-2025 19:16:38 Europe/London] PluginManager: Plugin not found in database, creating record for: LLMModelSelector
[26-Mar-2025 19:16:38 Europe/London] PluginManager ERROR: Failed to load plugin LLMModelSelector: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 19:16:38 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 19:16:38 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[26-Mar-2025 19:16:38 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[26-Mar-2025 19:16:38 Europe/London] PluginManager: Creating instance of plugin class: N8nWebhookHandler
[26-Mar-2025 19:16:38 Europe/London] PluginManager: Instantiating plugin with ID: 12
[26-Mar-2025 19:16:38 Europe/London] N8nWebhookHandler: Constructing with plugin ID: 12
[26-Mar-2025 19:16:38 Europe/London] N8nWebhookHandler: Constructing plugin
[26-Mar-2025 19:16:38 Europe/London] N8nWebhookHandler: Construction completed
[26-Mar-2025 19:16:38 Europe/London] PluginManager: Activating plugin: N8nWebhookHandler
[26-Mar-2025 19:16:38 Europe/London] N8nWebhookHandler: Activating plugin with ID: 12
[26-Mar-2025 19:16:38 Europe/London] Plugin N8nWebhookHandler: Activated with ID 12
[26-Mar-2025 19:16:38 Europe/London] N8nWebhookHandler: Creating/checking database tables
[26-Mar-2025 19:16:38 Europe/London] N8nWebhookHandler: Checking for existing settings
[26-Mar-2025 19:16:38 Europe/London] N8nWebhookHandler: Activation completed successfully
[26-Mar-2025 19:16:38 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 19:16:38 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 19:16:38 Europe/London] Plugin N8nWebhookHandler: Registering hook before_send_message
[26-Mar-2025 19:16:38 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:16:38 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 19:16:38 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:16:38 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 19:16:38 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:16:38 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:16:38 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 19:16:38 Europe/London] PluginManager: Initializing plugin: N8nWebhookHandler
[26-Mar-2025 19:16:38 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 19:16:38 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 19:16:38 Europe/London] Plugin N8nWebhookHandler: Registering hook before_send_message
[26-Mar-2025 19:16:38 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:16:38 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 19:16:38 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:16:38 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 19:16:38 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:16:38 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:16:38 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 19:16:38 Europe/London] PluginManager: Plugin activated and initialized: N8nWebhookHandler
[26-Mar-2025 19:16:38 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[26-Mar-2025 19:16:38 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[26-Mar-2025 19:16:38 Europe/London] PluginManager: Creating instance of plugin class: SameInSameOut
[26-Mar-2025 19:16:38 Europe/London] PluginManager: Instantiating plugin with ID: 13
[26-Mar-2025 19:16:38 Europe/London] SameInSameOut: Constructing plugin
[26-Mar-2025 19:16:38 Europe/London] PluginManager: Activating plugin: SameInSameOut
[26-Mar-2025 19:16:38 Europe/London] Plugin SameInSameOut: Activated with ID 13
[26-Mar-2025 19:16:38 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[26-Mar-2025 19:16:38 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:16:38 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[26-Mar-2025 19:16:38 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:16:38 Europe/London] PluginManager: Initializing plugin: SameInSameOut
[26-Mar-2025 19:16:38 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[26-Mar-2025 19:16:38 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:16:38 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[26-Mar-2025 19:16:38 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:16:38 Europe/London] PluginManager: Plugin activated and initialized: SameInSameOut
[26-Mar-2025 19:16:38 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[26-Mar-2025 19:16:38 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[26-Mar-2025 19:16:38 Europe/London] PluginManager: Creating instance of plugin class: TestPlugin
[26-Mar-2025 19:16:38 Europe/London] PluginManager: Plugin not found in database, creating record for: TestPlugin
[26-Mar-2025 19:16:38 Europe/London] PluginManager ERROR: Failed to load plugin TestPlugin: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 19:16:38 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 19:16:38 Europe/London] PluginManager: Loaded plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[26-Mar-2025 19:16:38 Europe/London] PluginManager: Active plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[26-Mar-2025 19:16:38 Europe/London] === Starting message creation process ===
[26-Mar-2025 19:16:38 Europe/London] User authenticated successfully - User ID: 8
[26-Mar-2025 19:16:38 Europe/London] Received message data: {"conversation_id":133,"content":"hi"}
[26-Mar-2025 19:16:38 Europe/London] Message data validation passed
[26-Mar-2025 19:16:38 Europe/London] Checking question limit for user 8: current usage = 0, limit = 500
[26-Mar-2025 19:16:38 Europe/London] Question limit check passed
[26-Mar-2025 19:16:38 Europe/London] Fetching conversation and plugin info for conversation ID: 133
[26-Mar-2025 19:16:38 Europe/London] Found conversation - Plugin ID: 13, Plugin Name: SameInSameOut, Plugin Active: yes
[26-Mar-2025 19:16:38 Europe/London] Created message data structure
[26-Mar-2025 19:16:38 Europe/London] Attempting to get plugin instance for: SameInSameOut
[26-Mar-2025 19:16:38 Europe/London] Successfully got plugin instance of class: SameInSameOut
[26-Mar-2025 19:16:38 Europe/London] Plugin hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:16:38 Europe/London] Executing before_send_message hook for plugin: SameInSameOut
[26-Mar-2025 19:16:38 Europe/London] Plugin SameInSameOut: Executing hook before_send_message
[26-Mar-2025 19:16:38 Europe/London] Plugin SameInSameOut: Available hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:16:38 Europe/London] Plugin SameInSameOut: Calling hook handler for before_send_message
[26-Mar-2025 19:16:38 Europe/London] Plugin SameInSameOut: Hook handler executed successfully with result: hi
[26-Mar-2025 19:16:38 Europe/London] before_send_message hook executed successfully
[26-Mar-2025 19:16:38 Europe/London] Got response from before_send_message: hi
[26-Mar-2025 19:16:38 Europe/London] Saving message to database
[26-Mar-2025 19:16:38 Europe/London] Message saved successfully with ID: 128
[26-Mar-2025 19:16:38 Europe/London] Executing after_send_message hook for plugin: SameInSameOut
[26-Mar-2025 19:16:38 Europe/London] Plugin SameInSameOut: Executing hook after_send_message
[26-Mar-2025 19:16:38 Europe/London] Plugin SameInSameOut: Available hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:16:38 Europe/London] Plugin SameInSameOut: Calling hook handler for after_send_message
[26-Mar-2025 19:16:38 Europe/London] Plugin SameInSameOut: Hook handler executed successfully with result: hi
[26-Mar-2025 19:16:38 Europe/London] after_send_message hook executed successfully
[26-Mar-2025 19:16:38 Europe/London] Saving plugin response to database: hi
[26-Mar-2025 19:16:38 Europe/London] Plugin response saved with ID: 129
[26-Mar-2025 19:16:38 Europe/London] === Message creation process completed successfully ===
[26-Mar-2025 19:16:38 Europe/London] Sending response to client: {"success":true,"data":{"message":{"id":"128","conversation_id":133,"content":"hi","role":"user"},"assistant_message":{"id":"129","conversation_id":133,"content":"hi","role":"assistant"}}}
[26-Mar-2025 19:18:13 Europe/London] Checking conversation limit for user 8: current usage = 1, limit = 50
[26-Mar-2025 19:18:17 Europe/London] PluginManager: Loading plugins from directory: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins
[26-Mar-2025 19:18:17 Europe/London] PluginManager: Found plugin directories: Array
(
    [0] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler
    [1] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector
    [2] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler
    [3] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut
    [4] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin
)

[26-Mar-2025 19:18:17 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[26-Mar-2025 19:18:17 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[26-Mar-2025 19:18:17 Europe/London] PluginManager: Creating instance of plugin class: DirectMessageHandler
[26-Mar-2025 19:18:17 Europe/London] PluginManager: Plugin not found in database, creating record for: DirectMessageHandler
[26-Mar-2025 19:18:17 Europe/London] PluginManager ERROR: Failed to load plugin DirectMessageHandler: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 19:18:17 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 19:18:17 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[26-Mar-2025 19:18:17 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[26-Mar-2025 19:18:17 Europe/London] PluginManager: Creating instance of plugin class: LLMModelSelector
[26-Mar-2025 19:18:17 Europe/London] PluginManager: Plugin not found in database, creating record for: LLMModelSelector
[26-Mar-2025 19:18:17 Europe/London] PluginManager ERROR: Failed to load plugin LLMModelSelector: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 19:18:17 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 19:18:17 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[26-Mar-2025 19:18:17 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[26-Mar-2025 19:18:17 Europe/London] PluginManager: Creating instance of plugin class: N8nWebhookHandler
[26-Mar-2025 19:18:17 Europe/London] PluginManager: Instantiating plugin with ID: 12
[26-Mar-2025 19:18:17 Europe/London] N8nWebhookHandler: Constructing with plugin ID: 12
[26-Mar-2025 19:18:17 Europe/London] N8nWebhookHandler: Constructing plugin
[26-Mar-2025 19:18:17 Europe/London] N8nWebhookHandler: Construction completed
[26-Mar-2025 19:18:17 Europe/London] PluginManager: Activating plugin: N8nWebhookHandler
[26-Mar-2025 19:18:17 Europe/London] N8nWebhookHandler: Activating plugin with ID: 12
[26-Mar-2025 19:18:17 Europe/London] Plugin N8nWebhookHandler: Activated with ID 12
[26-Mar-2025 19:18:17 Europe/London] N8nWebhookHandler: Creating/checking database tables
[26-Mar-2025 19:18:17 Europe/London] N8nWebhookHandler: Checking for existing settings
[26-Mar-2025 19:18:17 Europe/London] N8nWebhookHandler: Activation completed successfully
[26-Mar-2025 19:18:17 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 19:18:17 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 19:18:17 Europe/London] Plugin N8nWebhookHandler: Registering hook before_send_message
[26-Mar-2025 19:18:17 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:18:17 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 19:18:17 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:18:17 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 19:18:17 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:18:17 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:18:17 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 19:18:17 Europe/London] PluginManager: Initializing plugin: N8nWebhookHandler
[26-Mar-2025 19:18:17 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 19:18:17 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 19:18:17 Europe/London] Plugin N8nWebhookHandler: Registering hook before_send_message
[26-Mar-2025 19:18:17 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:18:17 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 19:18:17 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:18:17 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 19:18:17 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:18:17 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:18:17 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 19:18:17 Europe/London] PluginManager: Plugin activated and initialized: N8nWebhookHandler
[26-Mar-2025 19:18:17 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[26-Mar-2025 19:18:17 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[26-Mar-2025 19:18:17 Europe/London] PluginManager: Creating instance of plugin class: SameInSameOut
[26-Mar-2025 19:18:17 Europe/London] PluginManager: Instantiating plugin with ID: 13
[26-Mar-2025 19:18:17 Europe/London] SameInSameOut: Constructing plugin
[26-Mar-2025 19:18:17 Europe/London] PluginManager: Activating plugin: SameInSameOut
[26-Mar-2025 19:18:17 Europe/London] Plugin SameInSameOut: Activated with ID 13
[26-Mar-2025 19:18:17 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[26-Mar-2025 19:18:17 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:18:17 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[26-Mar-2025 19:18:17 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:18:17 Europe/London] PluginManager: Initializing plugin: SameInSameOut
[26-Mar-2025 19:18:17 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[26-Mar-2025 19:18:17 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:18:17 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[26-Mar-2025 19:18:17 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:18:17 Europe/London] PluginManager: Plugin activated and initialized: SameInSameOut
[26-Mar-2025 19:18:17 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[26-Mar-2025 19:18:17 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[26-Mar-2025 19:18:17 Europe/London] PluginManager: Creating instance of plugin class: TestPlugin
[26-Mar-2025 19:18:17 Europe/London] PluginManager: Plugin not found in database, creating record for: TestPlugin
[26-Mar-2025 19:18:17 Europe/London] PluginManager ERROR: Failed to load plugin TestPlugin: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 19:18:17 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 19:18:17 Europe/London] PluginManager: Loaded plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[26-Mar-2025 19:18:17 Europe/London] PluginManager: Active plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[26-Mar-2025 19:18:17 Europe/London] === Starting message creation process ===
[26-Mar-2025 19:18:17 Europe/London] User authenticated successfully - User ID: 8
[26-Mar-2025 19:18:17 Europe/London] Received message data: {"conversation_id":"134","content":"Helo"}
[26-Mar-2025 19:18:17 Europe/London] Message data validation passed
[26-Mar-2025 19:18:17 Europe/London] Checking question limit for user 8: current usage = 0, limit = 500
[26-Mar-2025 19:18:17 Europe/London] Question limit check passed
[26-Mar-2025 19:18:17 Europe/London] Fetching conversation and plugin info for conversation ID: 134
[26-Mar-2025 19:18:17 Europe/London] Found conversation - Plugin ID: 13, Plugin Name: SameInSameOut, Plugin Active: yes
[26-Mar-2025 19:18:17 Europe/London] Created message data structure
[26-Mar-2025 19:18:17 Europe/London] Attempting to get plugin instance for: SameInSameOut
[26-Mar-2025 19:18:17 Europe/London] Successfully got plugin instance of class: SameInSameOut
[26-Mar-2025 19:18:17 Europe/London] Plugin hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:18:17 Europe/London] Executing before_send_message hook for plugin: SameInSameOut
[26-Mar-2025 19:18:17 Europe/London] Plugin SameInSameOut: Executing hook before_send_message
[26-Mar-2025 19:18:17 Europe/London] Plugin SameInSameOut: Available hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:18:17 Europe/London] Plugin SameInSameOut: Calling hook handler for before_send_message
[26-Mar-2025 19:18:17 Europe/London] Plugin SameInSameOut: Hook handler executed successfully with result: Helo
[26-Mar-2025 19:18:17 Europe/London] before_send_message hook executed successfully
[26-Mar-2025 19:18:17 Europe/London] Got response from before_send_message: Helo
[26-Mar-2025 19:18:17 Europe/London] Saving message to database
[26-Mar-2025 19:18:17 Europe/London] Message saved successfully with ID: 130
[26-Mar-2025 19:18:17 Europe/London] Executing after_send_message hook for plugin: SameInSameOut
[26-Mar-2025 19:18:17 Europe/London] Plugin SameInSameOut: Executing hook after_send_message
[26-Mar-2025 19:18:17 Europe/London] Plugin SameInSameOut: Available hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:18:17 Europe/London] Plugin SameInSameOut: Calling hook handler for after_send_message
[26-Mar-2025 19:18:17 Europe/London] Plugin SameInSameOut: Hook handler executed successfully with result: Helo
[26-Mar-2025 19:18:17 Europe/London] after_send_message hook executed successfully
[26-Mar-2025 19:18:17 Europe/London] Saving plugin response to database: Helo
[26-Mar-2025 19:18:17 Europe/London] Plugin response saved with ID: 131
[26-Mar-2025 19:18:17 Europe/London] === Message creation process completed successfully ===
[26-Mar-2025 19:18:17 Europe/London] Sending response to client: {"success":true,"data":{"message":{"id":"130","conversation_id":"134","content":"Helo","role":"user"},"assistant_message":{"id":"131","conversation_id":"134","content":"Helo","role":"assistant"}}}
[26-Mar-2025 19:18:21 Europe/London] Checking conversation limit for user 8: current usage = 2, limit = 50
[26-Mar-2025 19:18:23 Europe/London] PluginManager: Loading plugins from directory: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins
[26-Mar-2025 19:18:23 Europe/London] PluginManager: Found plugin directories: Array
(
    [0] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler
    [1] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector
    [2] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler
    [3] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut
    [4] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin
)

[26-Mar-2025 19:18:23 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[26-Mar-2025 19:18:23 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[26-Mar-2025 19:18:23 Europe/London] PluginManager: Creating instance of plugin class: DirectMessageHandler
[26-Mar-2025 19:18:23 Europe/London] PluginManager: Plugin not found in database, creating record for: DirectMessageHandler
[26-Mar-2025 19:18:23 Europe/London] PluginManager ERROR: Failed to load plugin DirectMessageHandler: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 19:18:23 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 19:18:23 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[26-Mar-2025 19:18:23 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[26-Mar-2025 19:18:23 Europe/London] PluginManager: Creating instance of plugin class: LLMModelSelector
[26-Mar-2025 19:18:23 Europe/London] PluginManager: Plugin not found in database, creating record for: LLMModelSelector
[26-Mar-2025 19:18:23 Europe/London] PluginManager ERROR: Failed to load plugin LLMModelSelector: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 19:18:23 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 19:18:23 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[26-Mar-2025 19:18:23 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[26-Mar-2025 19:18:23 Europe/London] PluginManager: Creating instance of plugin class: N8nWebhookHandler
[26-Mar-2025 19:18:23 Europe/London] PluginManager: Instantiating plugin with ID: 12
[26-Mar-2025 19:18:23 Europe/London] N8nWebhookHandler: Constructing with plugin ID: 12
[26-Mar-2025 19:18:23 Europe/London] N8nWebhookHandler: Constructing plugin
[26-Mar-2025 19:18:23 Europe/London] N8nWebhookHandler: Construction completed
[26-Mar-2025 19:18:23 Europe/London] PluginManager: Activating plugin: N8nWebhookHandler
[26-Mar-2025 19:18:23 Europe/London] N8nWebhookHandler: Activating plugin with ID: 12
[26-Mar-2025 19:18:23 Europe/London] Plugin N8nWebhookHandler: Activated with ID 12
[26-Mar-2025 19:18:23 Europe/London] N8nWebhookHandler: Creating/checking database tables
[26-Mar-2025 19:18:23 Europe/London] N8nWebhookHandler: Checking for existing settings
[26-Mar-2025 19:18:23 Europe/London] N8nWebhookHandler: Activation completed successfully
[26-Mar-2025 19:18:23 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 19:18:23 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 19:18:23 Europe/London] Plugin N8nWebhookHandler: Registering hook before_send_message
[26-Mar-2025 19:18:23 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:18:23 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 19:18:23 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:18:23 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 19:18:23 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:18:23 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:18:23 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 19:18:23 Europe/London] PluginManager: Initializing plugin: N8nWebhookHandler
[26-Mar-2025 19:18:23 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 19:18:23 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 19:18:23 Europe/London] Plugin N8nWebhookHandler: Registering hook before_send_message
[26-Mar-2025 19:18:23 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:18:23 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 19:18:23 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:18:23 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 19:18:23 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:18:23 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:18:23 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 19:18:23 Europe/London] PluginManager: Plugin activated and initialized: N8nWebhookHandler
[26-Mar-2025 19:18:23 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[26-Mar-2025 19:18:23 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[26-Mar-2025 19:18:23 Europe/London] PluginManager: Creating instance of plugin class: SameInSameOut
[26-Mar-2025 19:18:23 Europe/London] PluginManager: Instantiating plugin with ID: 13
[26-Mar-2025 19:18:23 Europe/London] SameInSameOut: Constructing plugin
[26-Mar-2025 19:18:23 Europe/London] PluginManager: Activating plugin: SameInSameOut
[26-Mar-2025 19:18:23 Europe/London] Plugin SameInSameOut: Activated with ID 13
[26-Mar-2025 19:18:23 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[26-Mar-2025 19:18:23 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:18:23 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[26-Mar-2025 19:18:23 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:18:23 Europe/London] PluginManager: Initializing plugin: SameInSameOut
[26-Mar-2025 19:18:23 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[26-Mar-2025 19:18:23 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:18:23 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[26-Mar-2025 19:18:23 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:18:23 Europe/London] PluginManager: Plugin activated and initialized: SameInSameOut
[26-Mar-2025 19:18:23 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[26-Mar-2025 19:18:23 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[26-Mar-2025 19:18:23 Europe/London] PluginManager: Creating instance of plugin class: TestPlugin
[26-Mar-2025 19:18:23 Europe/London] PluginManager: Plugin not found in database, creating record for: TestPlugin
[26-Mar-2025 19:18:23 Europe/London] PluginManager ERROR: Failed to load plugin TestPlugin: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 19:18:23 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 19:18:23 Europe/London] PluginManager: Loaded plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[26-Mar-2025 19:18:23 Europe/London] PluginManager: Active plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[26-Mar-2025 19:18:23 Europe/London] === Starting message creation process ===
[26-Mar-2025 19:18:23 Europe/London] User authenticated successfully - User ID: 8
[26-Mar-2025 19:18:23 Europe/London] Received message data: {"conversation_id":"135","content":"Hi"}
[26-Mar-2025 19:18:23 Europe/London] Message data validation passed
[26-Mar-2025 19:18:23 Europe/London] Checking question limit for user 8: current usage = 0, limit = 500
[26-Mar-2025 19:18:23 Europe/London] Question limit check passed
[26-Mar-2025 19:18:23 Europe/London] Fetching conversation and plugin info for conversation ID: 135
[26-Mar-2025 19:18:23 Europe/London] Found conversation - Plugin ID: 12, Plugin Name: N8nWebhookHandler, Plugin Active: yes
[26-Mar-2025 19:18:23 Europe/London] Created message data structure
[26-Mar-2025 19:18:23 Europe/London] Attempting to get plugin instance for: N8nWebhookHandler
[26-Mar-2025 19:18:23 Europe/London] Successfully got plugin instance of class: N8nWebhookHandler
[26-Mar-2025 19:18:23 Europe/London] Plugin hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:18:23 Europe/London] Executing before_send_message hook for plugin: N8nWebhookHandler
[26-Mar-2025 19:18:23 Europe/London] Plugin N8nWebhookHandler: Executing hook before_send_message
[26-Mar-2025 19:18:23 Europe/London] Plugin N8nWebhookHandler: Available hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:18:23 Europe/London] Plugin N8nWebhookHandler: Calling hook handler for before_send_message
[26-Mar-2025 19:18:23 Europe/London] N8nWebhookHandler: Starting message processing
[26-Mar-2025 19:18:23 Europe/London] N8nWebhookHandler: Message data: {"conversation_id":"135","content":"Hi","role":"user"}
[26-Mar-2025 19:18:23 Europe/London] N8nWebhookHandler: Using webhook URL: https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
[26-Mar-2025 19:18:23 Europe/London] N8nWebhookHandler: Sending request data: {"message":"Hi","conversation_id":"135","timestamp":"2025-03-26 19:18:23"}
[26-Mar-2025 19:18:23 Europe/London] N8nWebhookHandler: SSL certificate verification is disabled for testing
[26-Mar-2025 19:18:25 Europe/London] N8nWebhookHandler: Verbose curl output:
*   Trying 104.21.16.1:443...
* Connected to n8n.mazcode.com (104.21.16.1) port 443
* ALPN: curl offers h2,http/1.1
* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384
* ALPN: server accepted h2
* Server certificate:
*  subject: CN=mazcode.com
*  start date: Mar 21 01:54:39 2025 GMT
*  expire date: Jun 19 02:51:08 2025 GMT
*  issuer: C=US; O=Google Trust Services; CN=WE1
*  SSL certificate verify result: unable to get local issuer certificate (20), continuing anyway.
* using HTTP/2
* [HTTP/2] [1] OPENED stream for https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
* [HTTP/2] [1] [:method: POST]
* [HTTP/2] [1] [:scheme: https]
* [HTTP/2] [1] [:authority: n8n.mazcode.com]
* [HTTP/2] [1] [:path: /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f]
* [HTTP/2] [1] [content-type: application/json]
* [HTTP/2] [1] [accept: application/json]
* [HTTP/2] [1] [content-length: 74]
> POST /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f HTTP/2
Host: n8n.mazcode.com
Content-Type: application/json
Accept: application/json
Content-Length: 74

* old SSL session ID is stale, removing
< HTTP/2 200 
< date: Wed, 26 Mar 2025 19:18:25 GMT
< content-type: text/html; charset=utf-8
< vary: Accept-Encoding
< vary: Accept-Encoding
< cf-cache-status: DYNAMIC
< report-to: {"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=n8jzMI7944AV8%2FAHXvT%2B%2Bcerq6GjjTyq5LzzzvbevMmBBhlg3307aBrrCGAVGPPT7dgPN%2FsiCSIoZ6V9bnD8LtJdNagsOrVYZV15c7NL34tA%2BIJE5dxOML%2B5rQPf2CHp0aE%3D"}],"group":"cf-nel","max_age":604800}
< nel: {"success_fraction":0,"report_to":"cf-nel","max_age":604800}
< server: cloudflare
< cf-ray: 9268fe624d5feda7-MXP
< alt-svc: h3=":443"; ma=86400
< server-timing: cfL4;desc="?proto=TCP&rtt=116889&min_rtt=97920&rtt_var=46096&sent=7&recv=9&lost=0&retrans=0&sent_bytes=3410&recv_bytes=908&delivery_rate=17755&cwnd=253&unsent_bytes=0&cid=c893f1dbb7ff799d&ts=1179&x=0"
< 
* Connection #0 to host n8n.mazcode.com left intact

[26-Mar-2025 19:18:25 Europe/London] N8nWebhookHandler: Webhook response code: 200
[26-Mar-2025 19:18:25 Europe/London] N8nWebhookHandler: Webhook response: مرحبًا! 😊 كيف يمكنني مساعدتك اليوم؟ هل تبحث عن شريك حياة أو معلومات معينة؟
[26-Mar-2025 19:18:25 Europe/London] N8nWebhookHandler: Message successfully processed by webhook
[26-Mar-2025 19:18:25 Europe/London] Plugin N8nWebhookHandler: Hook handler executed successfully with result: مرحبًا! 😊 كيف يمكنني مساعدتك اليوم؟ هل تبحث عن شريك حياة أو معلومات معينة؟
[26-Mar-2025 19:18:25 Europe/London] before_send_message hook executed successfully
[26-Mar-2025 19:18:25 Europe/London] Got response from before_send_message: مرحبًا! 😊 كيف يمكنني مساعدتك اليوم؟ هل تبحث عن شريك حياة أو معلومات معينة؟
[26-Mar-2025 19:18:25 Europe/London] Saving message to database
[26-Mar-2025 19:18:25 Europe/London] Message saved successfully with ID: 132
[26-Mar-2025 19:18:25 Europe/London] Executing after_send_message hook for plugin: N8nWebhookHandler
[26-Mar-2025 19:18:25 Europe/London] Plugin N8nWebhookHandler: Executing hook after_send_message
[26-Mar-2025 19:18:25 Europe/London] Plugin N8nWebhookHandler: Available hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 19:18:25 Europe/London] Plugin N8nWebhookHandler: Calling hook handler for after_send_message
[26-Mar-2025 19:18:25 Europe/London] N8nWebhookHandler: Starting message processing
[26-Mar-2025 19:18:25 Europe/London] N8nWebhookHandler: Message data: {"conversation_id":"135","content":"Hi","role":"user"}
[26-Mar-2025 19:18:25 Europe/London] N8nWebhookHandler: Using webhook URL: https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
[26-Mar-2025 19:18:25 Europe/London] N8nWebhookHandler: Sending request data: {"message":"Hi","conversation_id":"135","timestamp":"2025-03-26 19:18:25"}
[26-Mar-2025 19:18:25 Europe/London] N8nWebhookHandler: SSL certificate verification is disabled for testing
[26-Mar-2025 19:18:27 Europe/London] N8nWebhookHandler: Verbose curl output:
*   Trying 104.21.16.1:443...
* Connected to n8n.mazcode.com (104.21.16.1) port 443
* ALPN: curl offers h2,http/1.1
* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384
* ALPN: server accepted h2
* Server certificate:
*  subject: CN=mazcode.com
*  start date: Mar 21 01:54:39 2025 GMT
*  expire date: Jun 19 02:51:08 2025 GMT
*  issuer: C=US; O=Google Trust Services; CN=WE1
*  SSL certificate verify result: unable to get local issuer certificate (20), continuing anyway.
* using HTTP/2
* [HTTP/2] [1] OPENED stream for https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
* [HTTP/2] [1] [:method: POST]
* [HTTP/2] [1] [:scheme: https]
* [HTTP/2] [1] [:authority: n8n.mazcode.com]
* [HTTP/2] [1] [:path: /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f]
* [HTTP/2] [1] [content-type: application/json]
* [HTTP/2] [1] [accept: application/json]
* [HTTP/2] [1] [content-length: 74]
> POST /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f HTTP/2
Host: n8n.mazcode.com
Content-Type: application/json
Accept: application/json
Content-Length: 74

* old SSL session ID is stale, removing
< HTTP/2 200 
< date: Wed, 26 Mar 2025 19:18:27 GMT
< content-type: text/html; charset=utf-8
< vary: Accept-Encoding
< vary: Accept-Encoding
< cf-cache-status: DYNAMIC
< report-to: {"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=qm0RGdZwSUSRy1caoGOg0VtuXOOaOSW0Pth1VeTkSwefbIzBCjHIBNjKbneuznk37MMOokNMPwiNJpURAXJbnUyU8BmqZFd%2BoK0DyO6uznL4%2BECcD9BDcr2KNcorZq3P1uo%3D"}],"group":"cf-nel","max_age":604800}
< nel: {"success_fraction":0,"report_to":"cf-nel","max_age":604800}
< server: cloudflare
< cf-ray: 9268fe6a48c8edb8-MXP
< alt-svc: h3=":443"; ma=86400
< server-timing: cfL4;desc="?proto=TCP&rtt=102291&min_rtt=95804&rtt_var=31525&sent=7&recv=9&lost=0&retrans=0&sent_bytes=3411&recv_bytes=908&delivery_rate=29643&cwnd=253&unsent_bytes=0&cid=88493321a030e55e&ts=1584&x=0"
< 
* Connection #0 to host n8n.mazcode.com left intact

[26-Mar-2025 19:18:27 Europe/London] N8nWebhookHandler: Webhook response code: 200
[26-Mar-2025 19:18:27 Europe/London] N8nWebhookHandler: Webhook response: مرحبًا مرة أخرى! 😊 كيف يمكنني مساعدتك؟ هل تبحث عن شريك حياة أو تحتاج إلى مساعدة معينة؟ أنا هنا لأساعدك!
[26-Mar-2025 19:18:27 Europe/London] N8nWebhookHandler: Message successfully processed by webhook
[26-Mar-2025 19:18:27 Europe/London] Plugin N8nWebhookHandler: Hook handler executed successfully with result: مرحبًا مرة أخرى! 😊 كيف يمكنني مساعدتك؟ هل تبحث عن شريك حياة أو تحتاج إلى مساعدة معينة؟ أنا هنا لأساعدك!
[26-Mar-2025 19:18:27 Europe/London] after_send_message hook executed successfully
[26-Mar-2025 19:18:27 Europe/London] Saving plugin response to database: مرحبًا مرة أخرى! 😊 كيف يمكنني مساعدتك؟ هل تبحث عن شريك حياة أو تحتاج إلى مساعدة معينة؟ أنا هنا لأساعدك!
[26-Mar-2025 19:18:27 Europe/London] Plugin response saved with ID: 133
[26-Mar-2025 19:18:27 Europe/London] === Message creation process completed successfully ===
[26-Mar-2025 19:18:27 Europe/London] Sending response to client: {"success":true,"data":{"message":{"id":"132","conversation_id":"135","content":"Hi","role":"user"},"assistant_message":{"id":"133","conversation_id":"135","content":"\u0645\u0631\u062d\u0628\u064b\u0627 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649! \ud83d\ude0a \u0643\u064a\u0641 \u064a\u0645\u0643\u0646\u0646\u064a \u0645\u0633\u0627\u0639\u062f\u062a\u0643\u061f \u0647\u0644 \u062a\u0628\u062d\u062b \u0639\u0646 \u0634\u0631\u064a\u0643 \u062d\u064a\u0627\u0629 \u0623\u0648 \u062a\u062d\u062a\u0627\u062c \u0625\u0644\u0649 \u0645\u0633\u0627\u0639\u062f\u0629 \u0645\u0639\u064a\u0646\u0629\u061f \u0623\u0646\u0627 \u0647\u0646\u0627 \u0644\u0623\u0633\u0627\u0639\u062f\u0643!","role":"assistant"}}}
[26-Mar-2025 19:30:31 Europe/London] PHP Fatal error:  Uncaught Error: Call to undefined method Logger::init() in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\create_payment.php:7
Stack trace:
#0 {main}
  thrown in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\create_payment.php on line 7
[26-Mar-2025 19:36:31 Europe/London] PHP Warning:  Undefined array key "debug" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\settings.php on line 110
[26-Mar-2025 19:36:31 Europe/London] PHP Warning:  Undefined array key "conversations_per_page" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\settings.php on line 116
[26-Mar-2025 20:49:56 Europe/London] Checking conversation limit for user 8: current usage = 3, limit = 50
[26-Mar-2025 20:49:56 Europe/London] PluginManager: Loading plugins from directory: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins
[26-Mar-2025 20:49:56 Europe/London] PluginManager: Found plugin directories: Array
(
    [0] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler
    [1] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector
    [2] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler
    [3] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut
    [4] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin
)

[26-Mar-2025 20:49:56 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[26-Mar-2025 20:49:56 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[26-Mar-2025 20:49:56 Europe/London] PluginManager: Creating instance of plugin class: DirectMessageHandler
[26-Mar-2025 20:49:56 Europe/London] PluginManager: Plugin not found in database, creating record for: DirectMessageHandler
[26-Mar-2025 20:49:56 Europe/London] PluginManager ERROR: Failed to load plugin DirectMessageHandler: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 20:49:56 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 20:49:56 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[26-Mar-2025 20:49:56 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[26-Mar-2025 20:49:56 Europe/London] PluginManager: Creating instance of plugin class: LLMModelSelector
[26-Mar-2025 20:49:56 Europe/London] PluginManager: Plugin not found in database, creating record for: LLMModelSelector
[26-Mar-2025 20:49:56 Europe/London] PluginManager ERROR: Failed to load plugin LLMModelSelector: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 20:49:56 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 20:49:56 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[26-Mar-2025 20:49:56 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[26-Mar-2025 20:49:56 Europe/London] PluginManager: Creating instance of plugin class: N8nWebhookHandler
[26-Mar-2025 20:49:56 Europe/London] PluginManager: Instantiating plugin with ID: 12
[26-Mar-2025 20:49:56 Europe/London] N8nWebhookHandler: Constructing with plugin ID: 12
[26-Mar-2025 20:49:56 Europe/London] N8nWebhookHandler: Constructing plugin
[26-Mar-2025 20:49:56 Europe/London] N8nWebhookHandler: Construction completed
[26-Mar-2025 20:49:56 Europe/London] PluginManager: Activating plugin: N8nWebhookHandler
[26-Mar-2025 20:49:56 Europe/London] N8nWebhookHandler: Activating plugin with ID: 12
[26-Mar-2025 20:49:56 Europe/London] Plugin N8nWebhookHandler: Activated with ID 12
[26-Mar-2025 20:49:56 Europe/London] N8nWebhookHandler: Creating/checking database tables
[26-Mar-2025 20:49:56 Europe/London] N8nWebhookHandler: Checking for existing settings
[26-Mar-2025 20:49:56 Europe/London] N8nWebhookHandler: Activation completed successfully
[26-Mar-2025 20:49:56 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 20:49:56 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 20:49:56 Europe/London] Plugin N8nWebhookHandler: Registering hook before_send_message
[26-Mar-2025 20:49:56 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 20:49:56 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 20:49:56 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 20:49:56 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 20:49:56 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 20:49:56 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 20:49:56 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 20:49:56 Europe/London] PluginManager: Initializing plugin: N8nWebhookHandler
[26-Mar-2025 20:49:56 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 20:49:56 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 20:49:56 Europe/London] Plugin N8nWebhookHandler: Registering hook before_send_message
[26-Mar-2025 20:49:56 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 20:49:56 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 20:49:56 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 20:49:56 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 20:49:56 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 20:49:56 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 20:49:56 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 20:49:56 Europe/London] PluginManager: Plugin activated and initialized: N8nWebhookHandler
[26-Mar-2025 20:49:56 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[26-Mar-2025 20:49:56 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[26-Mar-2025 20:49:56 Europe/London] PluginManager: Creating instance of plugin class: SameInSameOut
[26-Mar-2025 20:49:56 Europe/London] PluginManager: Instantiating plugin with ID: 13
[26-Mar-2025 20:49:56 Europe/London] SameInSameOut: Constructing plugin
[26-Mar-2025 20:49:56 Europe/London] PluginManager: Activating plugin: SameInSameOut
[26-Mar-2025 20:49:56 Europe/London] Plugin SameInSameOut: Activated with ID 13
[26-Mar-2025 20:49:56 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[26-Mar-2025 20:49:56 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 20:49:56 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[26-Mar-2025 20:49:56 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 20:49:56 Europe/London] PluginManager: Initializing plugin: SameInSameOut
[26-Mar-2025 20:49:56 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[26-Mar-2025 20:49:56 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 20:49:56 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[26-Mar-2025 20:49:56 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 20:49:56 Europe/London] PluginManager: Plugin activated and initialized: SameInSameOut
[26-Mar-2025 20:49:56 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[26-Mar-2025 20:49:56 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[26-Mar-2025 20:49:56 Europe/London] PluginManager: Creating instance of plugin class: TestPlugin
[26-Mar-2025 20:49:56 Europe/London] PluginManager: Plugin not found in database, creating record for: TestPlugin
[26-Mar-2025 20:49:56 Europe/London] PluginManager ERROR: Failed to load plugin TestPlugin: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 20:49:56 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 20:49:56 Europe/London] PluginManager: Loaded plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[26-Mar-2025 20:49:56 Europe/London] PluginManager: Active plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[26-Mar-2025 20:49:56 Europe/London] === Starting message creation process ===
[26-Mar-2025 20:49:56 Europe/London] User authenticated successfully - User ID: 8
[26-Mar-2025 20:49:56 Europe/London] Received message data: {"conversation_id":"136","content":"Hi"}
[26-Mar-2025 20:49:56 Europe/London] Message data validation passed
[26-Mar-2025 20:49:56 Europe/London] Checking question limit for user 8: current usage = 0, limit = 500
[26-Mar-2025 20:49:56 Europe/London] Question limit check passed
[26-Mar-2025 20:49:56 Europe/London] Fetching conversation and plugin info for conversation ID: 136
[26-Mar-2025 20:49:56 Europe/London] Found conversation - Plugin ID: 12, Plugin Name: N8nWebhookHandler, Plugin Active: yes
[26-Mar-2025 20:49:56 Europe/London] Created message data structure
[26-Mar-2025 20:49:56 Europe/London] Attempting to get plugin instance for: N8nWebhookHandler
[26-Mar-2025 20:49:56 Europe/London] Successfully got plugin instance of class: N8nWebhookHandler
[26-Mar-2025 20:49:56 Europe/London] Plugin hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 20:49:56 Europe/London] Executing before_send_message hook for plugin: N8nWebhookHandler
[26-Mar-2025 20:49:56 Europe/London] Plugin N8nWebhookHandler: Executing hook before_send_message
[26-Mar-2025 20:49:56 Europe/London] Plugin N8nWebhookHandler: Available hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 20:49:56 Europe/London] Plugin N8nWebhookHandler: Calling hook handler for before_send_message
[26-Mar-2025 20:49:56 Europe/London] N8nWebhookHandler: Starting message processing
[26-Mar-2025 20:49:56 Europe/London] N8nWebhookHandler: Message data: {"conversation_id":"136","content":"Hi","role":"user"}
[26-Mar-2025 20:49:56 Europe/London] N8nWebhookHandler: Using webhook URL: https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
[26-Mar-2025 20:49:56 Europe/London] N8nWebhookHandler: Sending request data: {"message":"Hi","conversation_id":"136","timestamp":"2025-03-26 20:49:56"}
[26-Mar-2025 20:49:56 Europe/London] N8nWebhookHandler: SSL certificate verification is disabled for testing
[26-Mar-2025 20:49:58 Europe/London] N8nWebhookHandler: Verbose curl output:
*   Trying 104.21.96.1:443...
* Connected to n8n.mazcode.com (104.21.96.1) port 443
* ALPN: curl offers h2,http/1.1
* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384
* ALPN: server accepted h2
* Server certificate:
*  subject: CN=mazcode.com
*  start date: Mar 21 01:54:39 2025 GMT
*  expire date: Jun 19 02:51:08 2025 GMT
*  issuer: C=US; O=Google Trust Services; CN=WE1
*  SSL certificate verify result: unable to get local issuer certificate (20), continuing anyway.
* using HTTP/2
* [HTTP/2] [1] OPENED stream for https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
* [HTTP/2] [1] [:method: POST]
* [HTTP/2] [1] [:scheme: https]
* [HTTP/2] [1] [:authority: n8n.mazcode.com]
* [HTTP/2] [1] [:path: /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f]
* [HTTP/2] [1] [content-type: application/json]
* [HTTP/2] [1] [accept: application/json]
* [HTTP/2] [1] [content-length: 74]
> POST /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f HTTP/2
Host: n8n.mazcode.com
Content-Type: application/json
Accept: application/json
Content-Length: 74

* old SSL session ID is stale, removing
< HTTP/2 200 
< date: Wed, 26 Mar 2025 20:49:57 GMT
< content-type: text/html; charset=utf-8
< vary: Accept-Encoding
< vary: Accept-Encoding
< cf-cache-status: DYNAMIC
< report-to: {"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=RGL4hVXDVK6JHcbVUyJwhKLVBtNF0KR6%2FGAhWarT21UH733xcISYqdNefk2i24hP2jZrQUlWS%2FvFtdZ1y%2B9mvzK9fUm6m4T%2FhOj85MuvKEVpwOZ%2Fo47AENjmDe%2B9ztjjZCc%3D"}],"group":"cf-nel","max_age":604800}
< nel: {"success_fraction":0,"report_to":"cf-nel","max_age":604800}
< server: cloudflare
< cf-ray: 92698477ecc0ed28-MXP
< alt-svc: h3=":443"; ma=86400
< server-timing: cfL4;desc="?proto=TCP&rtt=178622&min_rtt=120871&rtt_var=81752&sent=7&recv=9&lost=0&retrans=0&sent_bytes=3411&recv_bytes=908&delivery_rate=23184&cwnd=253&unsent_bytes=0&cid=13fb322f7009375a&ts=1342&x=0"
< 
* Connection #0 to host n8n.mazcode.com left intact

[26-Mar-2025 20:49:58 Europe/London] N8nWebhookHandler: Webhook response code: 200
[26-Mar-2025 20:49:58 Europe/London] N8nWebhookHandler: Webhook response: مرحبًا! كيف يمكنني مساعدتك اليوم؟ 😊
[26-Mar-2025 20:49:58 Europe/London] N8nWebhookHandler: Message successfully processed by webhook
[26-Mar-2025 20:49:58 Europe/London] Plugin N8nWebhookHandler: Hook handler executed successfully with result: مرحبًا! كيف يمكنني مساعدتك اليوم؟ 😊
[26-Mar-2025 20:49:58 Europe/London] before_send_message hook executed successfully
[26-Mar-2025 20:49:58 Europe/London] Got response from before_send_message: مرحبًا! كيف يمكنني مساعدتك اليوم؟ 😊
[26-Mar-2025 20:49:58 Europe/London] Saving message to database
[26-Mar-2025 20:49:58 Europe/London] Message saved successfully with ID: 134
[26-Mar-2025 20:49:58 Europe/London] Executing after_send_message hook for plugin: N8nWebhookHandler
[26-Mar-2025 20:49:58 Europe/London] Plugin N8nWebhookHandler: Executing hook after_send_message
[26-Mar-2025 20:49:58 Europe/London] Plugin N8nWebhookHandler: Available hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 20:49:58 Europe/London] Plugin N8nWebhookHandler: Calling hook handler for after_send_message
[26-Mar-2025 20:49:58 Europe/London] N8nWebhookHandler: Starting message processing
[26-Mar-2025 20:49:58 Europe/London] N8nWebhookHandler: Message data: {"conversation_id":"136","content":"Hi","role":"user"}
[26-Mar-2025 20:49:58 Europe/London] N8nWebhookHandler: Using webhook URL: https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
[26-Mar-2025 20:49:58 Europe/London] N8nWebhookHandler: Sending request data: {"message":"Hi","conversation_id":"136","timestamp":"2025-03-26 20:49:58"}
[26-Mar-2025 20:49:58 Europe/London] N8nWebhookHandler: SSL certificate verification is disabled for testing
[26-Mar-2025 20:49:59 Europe/London] N8nWebhookHandler: Verbose curl output:
*   Trying 104.21.96.1:443...
* Connected to n8n.mazcode.com (104.21.96.1) port 443
* ALPN: curl offers h2,http/1.1
* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384
* ALPN: server accepted h2
* Server certificate:
*  subject: CN=mazcode.com
*  start date: Mar 21 01:54:39 2025 GMT
*  expire date: Jun 19 02:51:08 2025 GMT
*  issuer: C=US; O=Google Trust Services; CN=WE1
*  SSL certificate verify result: unable to get local issuer certificate (20), continuing anyway.
* using HTTP/2
* [HTTP/2] [1] OPENED stream for https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
* [HTTP/2] [1] [:method: POST]
* [HTTP/2] [1] [:scheme: https]
* [HTTP/2] [1] [:authority: n8n.mazcode.com]
* [HTTP/2] [1] [:path: /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f]
* [HTTP/2] [1] [content-type: application/json]
* [HTTP/2] [1] [accept: application/json]
* [HTTP/2] [1] [content-length: 74]
> POST /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f HTTP/2
Host: n8n.mazcode.com
Content-Type: application/json
Accept: application/json
Content-Length: 74

* old SSL session ID is stale, removing
< HTTP/2 200 
< date: Wed, 26 Mar 2025 20:49:58 GMT
< content-type: text/html; charset=utf-8
< vary: Accept-Encoding
< vary: Accept-Encoding
< cf-cache-status: DYNAMIC
< report-to: {"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=wxi4DjNZkoAjVSlJKWCcGlfeXnDmUBXnd4Nvxm18%2B9UP791qd2lSqEBTZbg76xkjgydP4o6Ys0z1eZdFVlsjb%2FbdHsCTRF4Y5LxGWcOmZr44dDBAE0F1%2Bsb8lQiG4iKXybk%3D"}],"group":"cf-nel","max_age":604800}
< nel: {"success_fraction":0,"report_to":"cf-nel","max_age":604800}
< server: cloudflare
< cf-ray: 92698480ff4cedba-MXP
< alt-svc: h3=":443"; ma=86400
< server-timing: cfL4;desc="?proto=TCP&rtt=85561&min_rtt=83878&rtt_var=26804&sent=6&recv=8&lost=0&retrans=0&sent_bytes=3389&recv_bytes=908&delivery_rate=32899&cwnd=252&unsent_bytes=0&cid=fbe7e2adbbe361da&ts=973&x=0"
< 
* Connection #0 to host n8n.mazcode.com left intact

[26-Mar-2025 20:49:59 Europe/London] N8nWebhookHandler: Webhook response code: 200
[26-Mar-2025 20:49:59 Europe/London] N8nWebhookHandler: Webhook response: مرحبًا! كيف يمكنني مساعدتك اليوم؟ 😊
[26-Mar-2025 20:49:59 Europe/London] N8nWebhookHandler: Message successfully processed by webhook
[26-Mar-2025 20:49:59 Europe/London] Plugin N8nWebhookHandler: Hook handler executed successfully with result: مرحبًا! كيف يمكنني مساعدتك اليوم؟ 😊
[26-Mar-2025 20:49:59 Europe/London] after_send_message hook executed successfully
[26-Mar-2025 20:49:59 Europe/London] Saving plugin response to database: مرحبًا! كيف يمكنني مساعدتك اليوم؟ 😊
[26-Mar-2025 20:49:59 Europe/London] Plugin response saved with ID: 135
[26-Mar-2025 20:49:59 Europe/London] === Message creation process completed successfully ===
[26-Mar-2025 20:49:59 Europe/London] Sending response to client: {"success":true,"data":{"message":{"id":"134","conversation_id":"136","content":"Hi","role":"user"},"assistant_message":{"id":"135","conversation_id":"136","content":"\u0645\u0631\u062d\u0628\u064b\u0627! \u0643\u064a\u0641 \u064a\u0645\u0643\u0646\u0646\u064a \u0645\u0633\u0627\u0639\u062f\u062a\u0643 \u0627\u0644\u064a\u0648\u0645\u061f \ud83d\ude0a","role":"assistant"}}}
[26-Mar-2025 20:51:32 Europe/London] Checking conversation limit for user 8: current usage = 4, limit = 50
[26-Mar-2025 20:53:28 Europe/London] DirectMessageHandler: Constructing plugin
[26-Mar-2025 20:53:28 Europe/London] LLMModelSelector: Constructing plugin
[26-Mar-2025 20:53:31 Europe/London] PHP Warning:  Undefined array key "debug" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\settings.php on line 110
[26-Mar-2025 20:53:31 Europe/London] PHP Warning:  Undefined array key "conversations_per_page" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\settings.php on line 116
[26-Mar-2025 20:53:36 Europe/London] PHP Warning:  Undefined array key "debug" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\settings.php on line 110
[26-Mar-2025 20:53:36 Europe/London] PHP Warning:  Undefined array key "conversations_per_page" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\settings.php on line 116
[26-Mar-2025 20:53:46 Europe/London] DirectMessageHandler: Constructing plugin
[26-Mar-2025 20:53:46 Europe/London] LLMModelSelector: Constructing plugin
[26-Mar-2025 20:53:52 Europe/London] N8nWebhookHandler: Constructing with plugin ID: 12
[26-Mar-2025 20:53:52 Europe/London] N8nWebhookHandler: Constructing plugin
[26-Mar-2025 20:53:52 Europe/London] N8nWebhookHandler: Construction completed
[26-Mar-2025 20:53:52 Europe/London] Plugin loaded successfully: N8nWebhookHandler
[26-Mar-2025 20:53:52 Europe/London] N8nWebhookHandler: Activating plugin with ID: 12
[26-Mar-2025 20:53:52 Europe/London] Plugin N8nWebhookHandler: Activated with ID 12
[26-Mar-2025 20:53:52 Europe/London] N8nWebhookHandler: Creating/checking database tables
[26-Mar-2025 20:53:52 Europe/London] N8nWebhookHandler: Checking for existing settings
[26-Mar-2025 20:53:52 Europe/London] N8nWebhookHandler: Activation completed successfully
[26-Mar-2025 20:53:52 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 20:53:52 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 20:53:52 Europe/London] Plugin N8nWebhookHandler: Registering hook before_send_message
[26-Mar-2025 20:53:52 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 20:53:52 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 20:53:52 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 20:53:52 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 20:53:52 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 20:53:52 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 20:53:52 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 20:53:52 Europe/London] Plugin Class: N8nWebhookHandler
[26-Mar-2025 20:53:52 Europe/London] Plugin Instance: N8nWebhookHandler
[26-Mar-2025 20:53:52 Europe/London] Settings: Array
(
    [id] => 4
    [plugin_id] => 12
    [webhook_url] => https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
    [is_active] => 1
    [timeout] => 120
    [created_at] => 2025-03-26 21:10:05
    [updated_at] => 2025-03-26 21:10:19
)

[26-Mar-2025 21:00:31 Europe/London] Query error {"class":"User","sql":"INSERT INTO users (id, username, email, password, role) VALUES (UUID(), ?, ?, ?, ?)","params":["admin","admin@example.com","$2y$10$8CsPXhjjBBs3RLiK3tBndOAURdgbteqdpnJ1RNKUkytSJwSgpM6yi","admin"],"message":"SQLSTATE[01000]: Warning: 1265 Data truncated for column 'id' at row 1"}
[26-Mar-2025 21:01:01 Europe/London] PHP Warning:  Undefined array key "debug" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\settings.php on line 110
[26-Mar-2025 21:01:01 Europe/London] PHP Warning:  Undefined array key "conversations_per_page" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\settings.php on line 116
[26-Mar-2025 21:01:03 Europe/London] PHP Warning:  Undefined array key "debug" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\settings.php on line 110
[26-Mar-2025 21:01:03 Europe/London] PHP Warning:  Undefined array key "conversations_per_page" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\settings.php on line 116
[26-Mar-2025 21:03:15 Europe/London] PHP Warning:  Undefined array key "webhook_url" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\admin\settings.php on line 114
[26-Mar-2025 21:03:15 Europe/London] PHP Warning:  Undefined array key "ssl_verify" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\admin\settings.php on line 115
[26-Mar-2025 21:03:15 Europe/London] PHP Warning:  Undefined array key "webhook_url" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\admin\settings.php on line 133
[26-Mar-2025 21:03:15 Europe/London] PHP Warning:  Undefined array key "ssl_verify" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\admin\settings.php on line 134
[26-Mar-2025 21:13:13 Europe/London] PHP Warning:  Undefined array key "webhook_url" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\admin\settings.php on line 114
[26-Mar-2025 21:13:13 Europe/London] PHP Warning:  Undefined array key "ssl_verify" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\admin\settings.php on line 115
[26-Mar-2025 21:13:13 Europe/London] PHP Warning:  Undefined array key "webhook_url" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\admin\settings.php on line 133
[26-Mar-2025 21:13:13 Europe/London] PHP Warning:  Undefined array key "ssl_verify" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\admin\settings.php on line 134
[26-Mar-2025 21:17:27 Europe/London] PluginManager: Loading plugins from directory: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins
[26-Mar-2025 21:17:27 Europe/London] PluginManager: Found plugin directories: Array
(
    [0] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler
    [1] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector
    [2] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler
    [3] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut
    [4] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin
)

[26-Mar-2025 21:17:27 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[26-Mar-2025 21:17:27 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[26-Mar-2025 21:17:27 Europe/London] PluginManager: Creating instance of plugin class: DirectMessageHandler
[26-Mar-2025 21:17:27 Europe/London] PluginManager: Plugin not found in database, creating record for: DirectMessageHandler
[26-Mar-2025 21:17:27 Europe/London] PluginManager ERROR: Failed to load plugin DirectMessageHandler: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 21:17:27 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 21:17:27 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[26-Mar-2025 21:17:27 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[26-Mar-2025 21:17:27 Europe/London] PluginManager: Creating instance of plugin class: LLMModelSelector
[26-Mar-2025 21:17:27 Europe/London] PluginManager: Plugin not found in database, creating record for: LLMModelSelector
[26-Mar-2025 21:17:27 Europe/London] PluginManager ERROR: Failed to load plugin LLMModelSelector: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 21:17:27 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 21:17:27 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[26-Mar-2025 21:17:27 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[26-Mar-2025 21:17:27 Europe/London] PluginManager: Creating instance of plugin class: N8nWebhookHandler
[26-Mar-2025 21:17:27 Europe/London] PluginManager: Instantiating plugin with ID: 12
[26-Mar-2025 21:17:27 Europe/London] N8nWebhookHandler: Constructing with plugin ID: 12
[26-Mar-2025 21:17:27 Europe/London] N8nWebhookHandler: Constructing plugin
[26-Mar-2025 21:17:27 Europe/London] N8nWebhookHandler: Construction completed
[26-Mar-2025 21:17:27 Europe/London] PluginManager: Activating plugin: N8nWebhookHandler
[26-Mar-2025 21:17:27 Europe/London] N8nWebhookHandler: Activating plugin with ID: 12
[26-Mar-2025 21:17:27 Europe/London] Plugin N8nWebhookHandler: Activated with ID 12
[26-Mar-2025 21:17:27 Europe/London] N8nWebhookHandler: Creating/checking database tables
[26-Mar-2025 21:17:27 Europe/London] N8nWebhookHandler: Checking for existing settings
[26-Mar-2025 21:17:27 Europe/London] N8nWebhookHandler: Activation completed successfully
[26-Mar-2025 21:17:27 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 21:17:27 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 21:17:27 Europe/London] Plugin N8nWebhookHandler: Registering hook before_send_message
[26-Mar-2025 21:17:27 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:27 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 21:17:27 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:27 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 21:17:27 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:27 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:27 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 21:17:27 Europe/London] PluginManager: Initializing plugin: N8nWebhookHandler
[26-Mar-2025 21:17:27 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 21:17:27 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 21:17:27 Europe/London] Plugin N8nWebhookHandler: Registering hook before_send_message
[26-Mar-2025 21:17:27 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:27 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 21:17:27 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:27 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 21:17:27 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:27 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:27 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 21:17:27 Europe/London] PluginManager: Plugin activated and initialized: N8nWebhookHandler
[26-Mar-2025 21:17:27 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[26-Mar-2025 21:17:27 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[26-Mar-2025 21:17:27 Europe/London] PluginManager: Creating instance of plugin class: SameInSameOut
[26-Mar-2025 21:17:27 Europe/London] PluginManager: Instantiating plugin with ID: 13
[26-Mar-2025 21:17:27 Europe/London] SameInSameOut: Constructing plugin
[26-Mar-2025 21:17:27 Europe/London] PluginManager: Activating plugin: SameInSameOut
[26-Mar-2025 21:17:27 Europe/London] Plugin SameInSameOut: Activated with ID 13
[26-Mar-2025 21:17:27 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[26-Mar-2025 21:17:27 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:27 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[26-Mar-2025 21:17:27 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:27 Europe/London] PluginManager: Initializing plugin: SameInSameOut
[26-Mar-2025 21:17:27 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[26-Mar-2025 21:17:27 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:27 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[26-Mar-2025 21:17:27 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:27 Europe/London] PluginManager: Plugin activated and initialized: SameInSameOut
[26-Mar-2025 21:17:27 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[26-Mar-2025 21:17:27 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[26-Mar-2025 21:17:27 Europe/London] PluginManager: Creating instance of plugin class: TestPlugin
[26-Mar-2025 21:17:27 Europe/London] PluginManager: Plugin not found in database, creating record for: TestPlugin
[26-Mar-2025 21:17:27 Europe/London] PluginManager ERROR: Failed to load plugin TestPlugin: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 21:17:27 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 21:17:27 Europe/London] PluginManager: Loaded plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[26-Mar-2025 21:17:27 Europe/London] PluginManager: Active plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[26-Mar-2025 21:17:27 Europe/London] === Starting message creation process ===
[26-Mar-2025 21:17:27 Europe/London] User authenticated successfully - User ID: 8
[26-Mar-2025 21:17:27 Europe/London] Received message data: {"conversation_id":137,"content":"Hi"}
[26-Mar-2025 21:17:27 Europe/London] Message data validation passed
[26-Mar-2025 21:17:27 Europe/London] Checking question limit for user 8: current usage = 0, limit = 500
[26-Mar-2025 21:17:27 Europe/London] Question limit check passed
[26-Mar-2025 21:17:27 Europe/London] Fetching conversation and plugin info for conversation ID: 137
[26-Mar-2025 21:17:27 Europe/London] Found conversation - Plugin ID: 12, Plugin Name: N8nWebhookHandler, Plugin Active: yes
[26-Mar-2025 21:17:27 Europe/London] Created message data structure
[26-Mar-2025 21:17:27 Europe/London] Attempting to get plugin instance for: N8nWebhookHandler
[26-Mar-2025 21:17:27 Europe/London] Successfully got plugin instance of class: N8nWebhookHandler
[26-Mar-2025 21:17:27 Europe/London] Plugin hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:27 Europe/London] Executing before_send_message hook for plugin: N8nWebhookHandler
[26-Mar-2025 21:17:27 Europe/London] Plugin N8nWebhookHandler: Executing hook before_send_message
[26-Mar-2025 21:17:27 Europe/London] Plugin N8nWebhookHandler: Available hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:27 Europe/London] Plugin N8nWebhookHandler: Calling hook handler for before_send_message
[26-Mar-2025 21:17:27 Europe/London] N8nWebhookHandler: Starting message processing
[26-Mar-2025 21:17:27 Europe/London] N8nWebhookHandler: Message data: {"conversation_id":137,"content":"Hi","role":"user"}
[26-Mar-2025 21:17:27 Europe/London] N8nWebhookHandler: Using webhook URL: https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
[26-Mar-2025 21:17:27 Europe/London] N8nWebhookHandler: Sending request data: {"message":"Hi","conversation_id":137,"timestamp":"2025-03-26 21:17:27"}
[26-Mar-2025 21:17:27 Europe/London] N8nWebhookHandler: SSL certificate verification is disabled for testing
[26-Mar-2025 21:17:31 Europe/London] N8nWebhookHandler: Verbose curl output:
*   Trying 104.21.48.1:443...
* Connected to n8n.mazcode.com (104.21.48.1) port 443
* ALPN: curl offers h2,http/1.1
* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384
* ALPN: server accepted h2
* Server certificate:
*  subject: CN=mazcode.com
*  start date: Mar 21 01:54:39 2025 GMT
*  expire date: Jun 19 02:51:08 2025 GMT
*  issuer: C=US; O=Google Trust Services; CN=WE1
*  SSL certificate verify result: unable to get local issuer certificate (20), continuing anyway.
* using HTTP/2
* [HTTP/2] [1] OPENED stream for https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
* [HTTP/2] [1] [:method: POST]
* [HTTP/2] [1] [:scheme: https]
* [HTTP/2] [1] [:authority: n8n.mazcode.com]
* [HTTP/2] [1] [:path: /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f]
* [HTTP/2] [1] [content-type: application/json]
* [HTTP/2] [1] [accept: application/json]
* [HTTP/2] [1] [content-length: 72]
> POST /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f HTTP/2
Host: n8n.mazcode.com
Content-Type: application/json
Accept: application/json
Content-Length: 72

* old SSL session ID is stale, removing
< HTTP/2 200 
< date: Wed, 26 Mar 2025 21:17:30 GMT
< content-type: text/html; charset=utf-8
< vary: Accept-Encoding
< vary: Accept-Encoding
< cf-cache-status: DYNAMIC
< report-to: {"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=3VCEzV7zE9WFUUmXeLgzmc8JD5vId7mTI48B1xyp9GG0iRZ73pDhTxOLAIFKsC9pqFxXtExpjANq%2FD7fXHJxw3dtuia4RbQmayJkrnQ%2BbkHjcpx0yG0H9SWEc1dgw23owi0%3D"}],"group":"cf-nel","max_age":604800}
< nel: {"success_fraction":0,"report_to":"cf-nel","max_age":604800}
< server: cloudflare
< cf-ray: 9269acd40d23ed22-MXP
< alt-svc: h3=":443"; ma=86400
< server-timing: cfL4;desc="?proto=TCP&rtt=106257&min_rtt=103200&rtt_var=32275&sent=7&recv=8&lost=0&retrans=0&sent_bytes=3388&recv_bytes=906&delivery_rate=24760&cwnd=252&unsent_bytes=0&cid=72e14fd883764909&ts=1278&x=0"
< 
* Connection #0 to host n8n.mazcode.com left intact

[26-Mar-2025 21:17:31 Europe/London] N8nWebhookHandler: Webhook response code: 200
[26-Mar-2025 21:17:31 Europe/London] N8nWebhookHandler: Webhook response: مرحباً! 😊  
كيف أستطيع مساعدتك اليوم؟ هل تبحث عن شريك حياة؟ أخبرني كيف يمكنني المساعدة وسأقوم بالبحث بناءً على متطلباتك. 💑
[26-Mar-2025 21:17:31 Europe/London] N8nWebhookHandler: Message successfully processed by webhook
[26-Mar-2025 21:17:31 Europe/London] Plugin N8nWebhookHandler: Hook handler executed successfully with result: مرحباً! 😊  
كيف أستطيع مساعدتك اليوم؟ هل تبحث عن شريك حياة؟ أخبرني كيف يمكنني المساعدة وسأقوم بالبحث بناءً على متطلباتك. 💑
[26-Mar-2025 21:17:31 Europe/London] before_send_message hook executed successfully
[26-Mar-2025 21:17:31 Europe/London] Got response from before_send_message: مرحباً! 😊  
كيف أستطيع مساعدتك اليوم؟ هل تبحث عن شريك حياة؟ أخبرني كيف يمكنني المساعدة وسأقوم بالبحث بناءً على متطلباتك. 💑
[26-Mar-2025 21:17:31 Europe/London] Saving message to database
[26-Mar-2025 21:17:31 Europe/London] Message saved successfully with ID: 136
[26-Mar-2025 21:17:31 Europe/London] Executing after_send_message hook for plugin: N8nWebhookHandler
[26-Mar-2025 21:17:31 Europe/London] Plugin N8nWebhookHandler: Executing hook after_send_message
[26-Mar-2025 21:17:31 Europe/London] Plugin N8nWebhookHandler: Available hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:31 Europe/London] Plugin N8nWebhookHandler: Calling hook handler for after_send_message
[26-Mar-2025 21:17:31 Europe/London] N8nWebhookHandler: Starting message processing
[26-Mar-2025 21:17:31 Europe/London] N8nWebhookHandler: Message data: {"conversation_id":137,"content":"Hi","role":"user"}
[26-Mar-2025 21:17:31 Europe/London] N8nWebhookHandler: Using webhook URL: https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
[26-Mar-2025 21:17:31 Europe/London] N8nWebhookHandler: Sending request data: {"message":"Hi","conversation_id":137,"timestamp":"2025-03-26 21:17:31"}
[26-Mar-2025 21:17:31 Europe/London] N8nWebhookHandler: SSL certificate verification is disabled for testing
[26-Mar-2025 21:17:33 Europe/London] N8nWebhookHandler: Verbose curl output:
*   Trying 104.21.48.1:443...
* Connected to n8n.mazcode.com (104.21.48.1) port 443
* ALPN: curl offers h2,http/1.1
* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384
* ALPN: server accepted h2
* Server certificate:
*  subject: CN=mazcode.com
*  start date: Mar 21 01:54:39 2025 GMT
*  expire date: Jun 19 02:51:08 2025 GMT
*  issuer: C=US; O=Google Trust Services; CN=WE1
*  SSL certificate verify result: unable to get local issuer certificate (20), continuing anyway.
* using HTTP/2
* [HTTP/2] [1] OPENED stream for https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
* [HTTP/2] [1] [:method: POST]
* [HTTP/2] [1] [:scheme: https]
* [HTTP/2] [1] [:authority: n8n.mazcode.com]
* [HTTP/2] [1] [:path: /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f]
* [HTTP/2] [1] [content-type: application/json]
* [HTTP/2] [1] [accept: application/json]
* [HTTP/2] [1] [content-length: 72]
> POST /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f HTTP/2
Host: n8n.mazcode.com
Content-Type: application/json
Accept: application/json
Content-Length: 72

* old SSL session ID is stale, removing
< HTTP/2 200 
< date: Wed, 26 Mar 2025 21:17:32 GMT
< content-type: text/html; charset=utf-8
< vary: Accept-Encoding
< vary: Accept-Encoding
< cf-cache-status: DYNAMIC
< report-to: {"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=LxIBrx6T7IibY8d%2FrPmNv1gSsKy5X8Sx0OszrVkVFWaqewJmQflTxeDW6EZpvBclHkohoHHXX7bXZ84tNRWCq2gMF362mdui9oceirH2T3UgLnuDHvfdaFvRtGfhCjSBbZc%3D"}],"group":"cf-nel","max_age":604800}
< nel: {"success_fraction":0,"report_to":"cf-nel","max_age":604800}
< server: cloudflare
< cf-ray: 9269acdd9e630cd8-MXP
< alt-svc: h3=":443"; ma=86400
< server-timing: cfL4;desc="?proto=TCP&rtt=103264&min_rtt=94859&rtt_var=37312&sent=7&recv=9&lost=0&retrans=0&sent_bytes=3410&recv_bytes=906&delivery_rate=29922&cwnd=253&unsent_bytes=0&cid=e5578c633ca6eb5d&ts=1538&x=0"
< 
* Connection #0 to host n8n.mazcode.com left intact

[26-Mar-2025 21:17:33 Europe/London] N8nWebhookHandler: Webhook response code: 200
[26-Mar-2025 21:17:33 Europe/London] N8nWebhookHandler: Webhook response: مرحباً! 😊  
كيف يمكنني مساعدتك اليوم؟ هل تبحث عن شريك حياة؟ أخبرني المزيد عن متطلباتك وسأساعدك بكل سرور. 💕
[26-Mar-2025 21:17:33 Europe/London] N8nWebhookHandler: Message successfully processed by webhook
[26-Mar-2025 21:17:33 Europe/London] Plugin N8nWebhookHandler: Hook handler executed successfully with result: مرحباً! 😊  
كيف يمكنني مساعدتك اليوم؟ هل تبحث عن شريك حياة؟ أخبرني المزيد عن متطلباتك وسأساعدك بكل سرور. 💕
[26-Mar-2025 21:17:33 Europe/London] after_send_message hook executed successfully
[26-Mar-2025 21:17:33 Europe/London] Saving plugin response to database: مرحباً! 😊  
كيف يمكنني مساعدتك اليوم؟ هل تبحث عن شريك حياة؟ أخبرني المزيد عن متطلباتك وسأساعدك بكل سرور. 💕
[26-Mar-2025 21:17:33 Europe/London] Plugin response saved with ID: 137
[26-Mar-2025 21:17:33 Europe/London] === Message creation process completed successfully ===
[26-Mar-2025 21:17:33 Europe/London] Sending response to client: {"success":true,"data":{"message":{"id":"136","conversation_id":137,"content":"Hi","role":"user"},"assistant_message":{"id":"137","conversation_id":137,"content":"\u0645\u0631\u062d\u0628\u0627\u064b! \ud83d\ude0a  \n\u0643\u064a\u0641 \u064a\u0645\u0643\u0646\u0646\u064a \u0645\u0633\u0627\u0639\u062f\u062a\u0643 \u0627\u0644\u064a\u0648\u0645\u061f \u0647\u0644 \u062a\u0628\u062d\u062b \u0639\u0646 \u0634\u0631\u064a\u0643 \u062d\u064a\u0627\u0629\u061f \u0623\u062e\u0628\u0631\u0646\u064a \u0627\u0644\u0645\u0632\u064a\u062f \u0639\u0646 \u0645\u062a\u0637\u0644\u0628\u0627\u062a\u0643 \u0648\u0633\u0623\u0633\u0627\u0639\u062f\u0643 \u0628\u0643\u0644 \u0633\u0631\u0648\u0631. \ud83d\udc95","role":"assistant"}}}
[26-Mar-2025 21:17:39 Europe/London] PluginManager: Loading plugins from directory: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins
[26-Mar-2025 21:17:39 Europe/London] PluginManager: Found plugin directories: Array
(
    [0] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler
    [1] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector
    [2] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler
    [3] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut
    [4] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin
)

[26-Mar-2025 21:17:39 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[26-Mar-2025 21:17:39 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[26-Mar-2025 21:17:39 Europe/London] PluginManager: Creating instance of plugin class: DirectMessageHandler
[26-Mar-2025 21:17:39 Europe/London] PluginManager: Plugin not found in database, creating record for: DirectMessageHandler
[26-Mar-2025 21:17:39 Europe/London] PluginManager ERROR: Failed to load plugin DirectMessageHandler: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 21:17:39 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 21:17:39 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[26-Mar-2025 21:17:39 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[26-Mar-2025 21:17:39 Europe/London] PluginManager: Creating instance of plugin class: LLMModelSelector
[26-Mar-2025 21:17:39 Europe/London] PluginManager: Plugin not found in database, creating record for: LLMModelSelector
[26-Mar-2025 21:17:39 Europe/London] PluginManager ERROR: Failed to load plugin LLMModelSelector: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 21:17:39 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 21:17:39 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[26-Mar-2025 21:17:39 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[26-Mar-2025 21:17:39 Europe/London] PluginManager: Creating instance of plugin class: N8nWebhookHandler
[26-Mar-2025 21:17:39 Europe/London] PluginManager: Instantiating plugin with ID: 12
[26-Mar-2025 21:17:39 Europe/London] N8nWebhookHandler: Constructing with plugin ID: 12
[26-Mar-2025 21:17:39 Europe/London] N8nWebhookHandler: Constructing plugin
[26-Mar-2025 21:17:39 Europe/London] N8nWebhookHandler: Construction completed
[26-Mar-2025 21:17:39 Europe/London] PluginManager: Activating plugin: N8nWebhookHandler
[26-Mar-2025 21:17:39 Europe/London] N8nWebhookHandler: Activating plugin with ID: 12
[26-Mar-2025 21:17:39 Europe/London] Plugin N8nWebhookHandler: Activated with ID 12
[26-Mar-2025 21:17:39 Europe/London] N8nWebhookHandler: Creating/checking database tables
[26-Mar-2025 21:17:39 Europe/London] N8nWebhookHandler: Checking for existing settings
[26-Mar-2025 21:17:39 Europe/London] N8nWebhookHandler: Activation completed successfully
[26-Mar-2025 21:17:39 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 21:17:39 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 21:17:39 Europe/London] Plugin N8nWebhookHandler: Registering hook before_send_message
[26-Mar-2025 21:17:39 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:39 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 21:17:39 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:39 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 21:17:39 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:39 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:39 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 21:17:39 Europe/London] PluginManager: Initializing plugin: N8nWebhookHandler
[26-Mar-2025 21:17:39 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 21:17:39 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 21:17:39 Europe/London] Plugin N8nWebhookHandler: Registering hook before_send_message
[26-Mar-2025 21:17:39 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:39 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 21:17:39 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:39 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 21:17:39 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:39 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:39 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 21:17:39 Europe/London] PluginManager: Plugin activated and initialized: N8nWebhookHandler
[26-Mar-2025 21:17:39 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[26-Mar-2025 21:17:39 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[26-Mar-2025 21:17:39 Europe/London] PluginManager: Creating instance of plugin class: SameInSameOut
[26-Mar-2025 21:17:39 Europe/London] PluginManager: Instantiating plugin with ID: 13
[26-Mar-2025 21:17:39 Europe/London] SameInSameOut: Constructing plugin
[26-Mar-2025 21:17:39 Europe/London] PluginManager: Activating plugin: SameInSameOut
[26-Mar-2025 21:17:39 Europe/London] Plugin SameInSameOut: Activated with ID 13
[26-Mar-2025 21:17:39 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[26-Mar-2025 21:17:39 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:39 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[26-Mar-2025 21:17:39 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:39 Europe/London] PluginManager: Initializing plugin: SameInSameOut
[26-Mar-2025 21:17:39 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[26-Mar-2025 21:17:39 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:39 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[26-Mar-2025 21:17:39 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:39 Europe/London] PluginManager: Plugin activated and initialized: SameInSameOut
[26-Mar-2025 21:17:39 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[26-Mar-2025 21:17:39 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[26-Mar-2025 21:17:39 Europe/London] PluginManager: Creating instance of plugin class: TestPlugin
[26-Mar-2025 21:17:39 Europe/London] PluginManager: Plugin not found in database, creating record for: TestPlugin
[26-Mar-2025 21:17:39 Europe/London] PluginManager ERROR: Failed to load plugin TestPlugin: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 21:17:39 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 21:17:39 Europe/London] PluginManager: Loaded plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[26-Mar-2025 21:17:39 Europe/London] PluginManager: Active plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[26-Mar-2025 21:17:39 Europe/London] === Starting message creation process ===
[26-Mar-2025 21:17:39 Europe/London] User authenticated successfully - User ID: 8
[26-Mar-2025 21:17:39 Europe/London] Received message data: {"conversation_id":137,"content":"hi"}
[26-Mar-2025 21:17:39 Europe/London] Message data validation passed
[26-Mar-2025 21:17:39 Europe/London] Checking question limit for user 8: current usage = 0, limit = 500
[26-Mar-2025 21:17:39 Europe/London] Question limit check passed
[26-Mar-2025 21:17:39 Europe/London] Fetching conversation and plugin info for conversation ID: 137
[26-Mar-2025 21:17:39 Europe/London] Found conversation - Plugin ID: 13, Plugin Name: SameInSameOut, Plugin Active: yes
[26-Mar-2025 21:17:39 Europe/London] Created message data structure
[26-Mar-2025 21:17:39 Europe/London] Attempting to get plugin instance for: SameInSameOut
[26-Mar-2025 21:17:39 Europe/London] Successfully got plugin instance of class: SameInSameOut
[26-Mar-2025 21:17:39 Europe/London] Plugin hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:39 Europe/London] Executing before_send_message hook for plugin: SameInSameOut
[26-Mar-2025 21:17:39 Europe/London] Plugin SameInSameOut: Executing hook before_send_message
[26-Mar-2025 21:17:39 Europe/London] Plugin SameInSameOut: Available hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:39 Europe/London] Plugin SameInSameOut: Calling hook handler for before_send_message
[26-Mar-2025 21:17:39 Europe/London] Plugin SameInSameOut: Hook handler executed successfully with result: hi
[26-Mar-2025 21:17:39 Europe/London] before_send_message hook executed successfully
[26-Mar-2025 21:17:39 Europe/London] Got response from before_send_message: hi
[26-Mar-2025 21:17:39 Europe/London] Saving message to database
[26-Mar-2025 21:17:39 Europe/London] Message saved successfully with ID: 138
[26-Mar-2025 21:17:39 Europe/London] Executing after_send_message hook for plugin: SameInSameOut
[26-Mar-2025 21:17:39 Europe/London] Plugin SameInSameOut: Executing hook after_send_message
[26-Mar-2025 21:17:39 Europe/London] Plugin SameInSameOut: Available hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:39 Europe/London] Plugin SameInSameOut: Calling hook handler for after_send_message
[26-Mar-2025 21:17:39 Europe/London] Plugin SameInSameOut: Hook handler executed successfully with result: hi
[26-Mar-2025 21:17:39 Europe/London] after_send_message hook executed successfully
[26-Mar-2025 21:17:39 Europe/London] Saving plugin response to database: hi
[26-Mar-2025 21:17:39 Europe/London] Plugin response saved with ID: 139
[26-Mar-2025 21:17:39 Europe/London] === Message creation process completed successfully ===
[26-Mar-2025 21:17:39 Europe/London] Sending response to client: {"success":true,"data":{"message":{"id":"138","conversation_id":137,"content":"hi","role":"user"},"assistant_message":{"id":"139","conversation_id":137,"content":"hi","role":"assistant"}}}
[26-Mar-2025 21:17:43 Europe/London] PluginManager: Loading plugins from directory: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins
[26-Mar-2025 21:17:43 Europe/London] PluginManager: Found plugin directories: Array
(
    [0] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler
    [1] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector
    [2] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler
    [3] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut
    [4] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin
)

[26-Mar-2025 21:17:43 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[26-Mar-2025 21:17:43 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[26-Mar-2025 21:17:43 Europe/London] PluginManager: Creating instance of plugin class: DirectMessageHandler
[26-Mar-2025 21:17:43 Europe/London] PluginManager: Plugin not found in database, creating record for: DirectMessageHandler
[26-Mar-2025 21:17:43 Europe/London] PluginManager ERROR: Failed to load plugin DirectMessageHandler: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 21:17:43 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 21:17:43 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[26-Mar-2025 21:17:43 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[26-Mar-2025 21:17:43 Europe/London] PluginManager: Creating instance of plugin class: LLMModelSelector
[26-Mar-2025 21:17:43 Europe/London] PluginManager: Plugin not found in database, creating record for: LLMModelSelector
[26-Mar-2025 21:17:43 Europe/London] PluginManager ERROR: Failed to load plugin LLMModelSelector: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 21:17:43 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 21:17:43 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[26-Mar-2025 21:17:43 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[26-Mar-2025 21:17:43 Europe/London] PluginManager: Creating instance of plugin class: N8nWebhookHandler
[26-Mar-2025 21:17:43 Europe/London] PluginManager: Instantiating plugin with ID: 12
[26-Mar-2025 21:17:43 Europe/London] N8nWebhookHandler: Constructing with plugin ID: 12
[26-Mar-2025 21:17:43 Europe/London] N8nWebhookHandler: Constructing plugin
[26-Mar-2025 21:17:43 Europe/London] N8nWebhookHandler: Construction completed
[26-Mar-2025 21:17:43 Europe/London] PluginManager: Activating plugin: N8nWebhookHandler
[26-Mar-2025 21:17:43 Europe/London] N8nWebhookHandler: Activating plugin with ID: 12
[26-Mar-2025 21:17:43 Europe/London] Plugin N8nWebhookHandler: Activated with ID 12
[26-Mar-2025 21:17:43 Europe/London] N8nWebhookHandler: Creating/checking database tables
[26-Mar-2025 21:17:43 Europe/London] N8nWebhookHandler: Checking for existing settings
[26-Mar-2025 21:17:43 Europe/London] N8nWebhookHandler: Activation completed successfully
[26-Mar-2025 21:17:43 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 21:17:43 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 21:17:43 Europe/London] Plugin N8nWebhookHandler: Registering hook before_send_message
[26-Mar-2025 21:17:43 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:43 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 21:17:43 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:43 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 21:17:43 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:43 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:43 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 21:17:43 Europe/London] PluginManager: Initializing plugin: N8nWebhookHandler
[26-Mar-2025 21:17:43 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 21:17:43 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 21:17:43 Europe/London] Plugin N8nWebhookHandler: Registering hook before_send_message
[26-Mar-2025 21:17:43 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:43 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 21:17:43 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:43 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 21:17:43 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:43 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:43 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 21:17:43 Europe/London] PluginManager: Plugin activated and initialized: N8nWebhookHandler
[26-Mar-2025 21:17:43 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[26-Mar-2025 21:17:43 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[26-Mar-2025 21:17:43 Europe/London] PluginManager: Creating instance of plugin class: SameInSameOut
[26-Mar-2025 21:17:43 Europe/London] PluginManager: Instantiating plugin with ID: 13
[26-Mar-2025 21:17:43 Europe/London] SameInSameOut: Constructing plugin
[26-Mar-2025 21:17:43 Europe/London] PluginManager: Activating plugin: SameInSameOut
[26-Mar-2025 21:17:43 Europe/London] Plugin SameInSameOut: Activated with ID 13
[26-Mar-2025 21:17:43 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[26-Mar-2025 21:17:43 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:43 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[26-Mar-2025 21:17:43 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:43 Europe/London] PluginManager: Initializing plugin: SameInSameOut
[26-Mar-2025 21:17:43 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[26-Mar-2025 21:17:43 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:43 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[26-Mar-2025 21:17:43 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:43 Europe/London] PluginManager: Plugin activated and initialized: SameInSameOut
[26-Mar-2025 21:17:43 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[26-Mar-2025 21:17:43 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[26-Mar-2025 21:17:43 Europe/London] PluginManager: Creating instance of plugin class: TestPlugin
[26-Mar-2025 21:17:43 Europe/London] PluginManager: Plugin not found in database, creating record for: TestPlugin
[26-Mar-2025 21:17:43 Europe/London] PluginManager ERROR: Failed to load plugin TestPlugin: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 21:17:43 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 21:17:43 Europe/London] PluginManager: Loaded plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[26-Mar-2025 21:17:43 Europe/London] PluginManager: Active plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[26-Mar-2025 21:17:43 Europe/London] === Starting message creation process ===
[26-Mar-2025 21:17:43 Europe/London] User authenticated successfully - User ID: 8
[26-Mar-2025 21:17:43 Europe/London] Received message data: {"conversation_id":137,"content":"Hello"}
[26-Mar-2025 21:17:43 Europe/London] Message data validation passed
[26-Mar-2025 21:17:43 Europe/London] Checking question limit for user 8: current usage = 0, limit = 500
[26-Mar-2025 21:17:43 Europe/London] Question limit check passed
[26-Mar-2025 21:17:43 Europe/London] Fetching conversation and plugin info for conversation ID: 137
[26-Mar-2025 21:17:43 Europe/London] Found conversation - Plugin ID: 13, Plugin Name: SameInSameOut, Plugin Active: yes
[26-Mar-2025 21:17:43 Europe/London] Created message data structure
[26-Mar-2025 21:17:43 Europe/London] Attempting to get plugin instance for: SameInSameOut
[26-Mar-2025 21:17:43 Europe/London] Successfully got plugin instance of class: SameInSameOut
[26-Mar-2025 21:17:43 Europe/London] Plugin hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:43 Europe/London] Executing before_send_message hook for plugin: SameInSameOut
[26-Mar-2025 21:17:43 Europe/London] Plugin SameInSameOut: Executing hook before_send_message
[26-Mar-2025 21:17:43 Europe/London] Plugin SameInSameOut: Available hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:43 Europe/London] Plugin SameInSameOut: Calling hook handler for before_send_message
[26-Mar-2025 21:17:43 Europe/London] Plugin SameInSameOut: Hook handler executed successfully with result: Hello
[26-Mar-2025 21:17:43 Europe/London] before_send_message hook executed successfully
[26-Mar-2025 21:17:43 Europe/London] Got response from before_send_message: Hello
[26-Mar-2025 21:17:43 Europe/London] Saving message to database
[26-Mar-2025 21:17:43 Europe/London] Message saved successfully with ID: 140
[26-Mar-2025 21:17:43 Europe/London] Executing after_send_message hook for plugin: SameInSameOut
[26-Mar-2025 21:17:43 Europe/London] Plugin SameInSameOut: Executing hook after_send_message
[26-Mar-2025 21:17:43 Europe/London] Plugin SameInSameOut: Available hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:17:43 Europe/London] Plugin SameInSameOut: Calling hook handler for after_send_message
[26-Mar-2025 21:17:43 Europe/London] Plugin SameInSameOut: Hook handler executed successfully with result: Hello
[26-Mar-2025 21:17:43 Europe/London] after_send_message hook executed successfully
[26-Mar-2025 21:17:43 Europe/London] Saving plugin response to database: Hello
[26-Mar-2025 21:17:43 Europe/London] Plugin response saved with ID: 141
[26-Mar-2025 21:17:43 Europe/London] === Message creation process completed successfully ===
[26-Mar-2025 21:17:43 Europe/London] Sending response to client: {"success":true,"data":{"message":{"id":"140","conversation_id":137,"content":"Hello","role":"user"},"assistant_message":{"id":"141","conversation_id":137,"content":"Hello","role":"assistant"}}}
[26-Mar-2025 21:17:44 Europe/London] Checking conversation limit for user 8: current usage = 5, limit = 50
[26-Mar-2025 21:18:26 Europe/London] PHP Warning:  Undefined array key "webhook_url" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\admin\settings.php on line 114
[26-Mar-2025 21:18:26 Europe/London] PHP Warning:  Undefined array key "ssl_verify" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\admin\settings.php on line 115
[26-Mar-2025 21:18:26 Europe/London] PHP Warning:  Undefined array key "webhook_url" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\admin\settings.php on line 133
[26-Mar-2025 21:18:26 Europe/London] PHP Warning:  Undefined array key "ssl_verify" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\admin\settings.php on line 134
[26-Mar-2025 21:21:03 Europe/London] DirectMessageHandler: Constructing plugin
[26-Mar-2025 21:21:03 Europe/London] LLMModelSelector: Constructing plugin
[26-Mar-2025 21:21:05 Europe/London] DirectMessageHandler: Constructing plugin
[26-Mar-2025 21:21:05 Europe/London] LLMModelSelector: Constructing plugin
[26-Mar-2025 21:21:09 Europe/London] N8nWebhookHandler: Constructing with plugin ID: 12
[26-Mar-2025 21:21:09 Europe/London] N8nWebhookHandler: Constructing plugin
[26-Mar-2025 21:21:09 Europe/London] N8nWebhookHandler: Construction completed
[26-Mar-2025 21:21:09 Europe/London] Plugin loaded successfully: N8nWebhookHandler
[26-Mar-2025 21:21:09 Europe/London] N8nWebhookHandler: Activating plugin with ID: 12
[26-Mar-2025 21:21:09 Europe/London] Plugin N8nWebhookHandler: Activated with ID 12
[26-Mar-2025 21:21:09 Europe/London] N8nWebhookHandler: Creating/checking database tables
[26-Mar-2025 21:21:09 Europe/London] N8nWebhookHandler: Checking for existing settings
[26-Mar-2025 21:21:09 Europe/London] N8nWebhookHandler: Activation completed successfully
[26-Mar-2025 21:21:09 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 21:21:09 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 21:21:09 Europe/London] Plugin N8nWebhookHandler: Registering hook before_send_message
[26-Mar-2025 21:21:09 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:21:09 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 21:21:09 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:21:09 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 21:21:09 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:21:09 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:21:09 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 21:21:09 Europe/London] Plugin Class: N8nWebhookHandler
[26-Mar-2025 21:21:09 Europe/London] Plugin Instance: N8nWebhookHandler
[26-Mar-2025 21:21:09 Europe/London] Settings: Array
(
    [id] => 4
    [plugin_id] => 12
    [webhook_url] => https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
    [is_active] => 1
    [timeout] => 120
    [created_at] => 2025-03-26 21:10:05
    [updated_at] => 2025-03-26 21:10:19
)

[26-Mar-2025 21:21:12 Europe/London] N8nWebhookHandler: Constructing with plugin ID: 12
[26-Mar-2025 21:21:12 Europe/London] N8nWebhookHandler: Constructing plugin
[26-Mar-2025 21:21:12 Europe/London] N8nWebhookHandler: Construction completed
[26-Mar-2025 21:21:12 Europe/London] Plugin loaded successfully: N8nWebhookHandler
[26-Mar-2025 21:21:12 Europe/London] N8nWebhookHandler: Activating plugin with ID: 12
[26-Mar-2025 21:21:12 Europe/London] Plugin N8nWebhookHandler: Activated with ID 12
[26-Mar-2025 21:21:12 Europe/London] N8nWebhookHandler: Creating/checking database tables
[26-Mar-2025 21:21:12 Europe/London] N8nWebhookHandler: Checking for existing settings
[26-Mar-2025 21:21:12 Europe/London] N8nWebhookHandler: Activation completed successfully
[26-Mar-2025 21:21:12 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 21:21:12 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 21:21:12 Europe/London] Plugin N8nWebhookHandler: Registering hook before_send_message
[26-Mar-2025 21:21:12 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:21:12 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 21:21:12 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:21:12 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 21:21:12 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:21:12 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:21:12 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 21:21:12 Europe/London] DirectMessageHandler: Constructing plugin
[26-Mar-2025 21:21:12 Europe/London] LLMModelSelector: Constructing plugin
[26-Mar-2025 21:21:16 Europe/London] N8nWebhookHandler: Constructing with plugin ID: 12
[26-Mar-2025 21:21:16 Europe/London] N8nWebhookHandler: Constructing plugin
[26-Mar-2025 21:21:16 Europe/London] N8nWebhookHandler: Construction completed
[26-Mar-2025 21:21:16 Europe/London] Plugin loaded successfully: N8nWebhookHandler
[26-Mar-2025 21:21:16 Europe/London] N8nWebhookHandler: Activating plugin with ID: 12
[26-Mar-2025 21:21:16 Europe/London] Plugin N8nWebhookHandler: Activated with ID 12
[26-Mar-2025 21:21:16 Europe/London] N8nWebhookHandler: Creating/checking database tables
[26-Mar-2025 21:21:16 Europe/London] N8nWebhookHandler: Checking for existing settings
[26-Mar-2025 21:21:16 Europe/London] N8nWebhookHandler: Activation completed successfully
[26-Mar-2025 21:21:16 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 21:21:16 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 21:21:16 Europe/London] Plugin N8nWebhookHandler: Registering hook before_send_message
[26-Mar-2025 21:21:16 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:21:16 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 21:21:16 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:21:16 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 21:21:16 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:21:16 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:21:16 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 21:21:16 Europe/London] Plugin Class: N8nWebhookHandler
[26-Mar-2025 21:21:16 Europe/London] Plugin Instance: N8nWebhookHandler
[26-Mar-2025 21:21:16 Europe/London] Settings: Array
(
    [id] => 4
    [plugin_id] => 12
    [webhook_url] => https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
    [is_active] => 1
    [timeout] => 120
    [created_at] => 2025-03-26 21:10:05
    [updated_at] => 2025-03-26 21:10:19
)

[26-Mar-2025 21:21:19 Europe/London] N8nWebhookHandler: Constructing with plugin ID: 12
[26-Mar-2025 21:21:19 Europe/London] N8nWebhookHandler: Constructing plugin
[26-Mar-2025 21:21:19 Europe/London] N8nWebhookHandler: Construction completed
[26-Mar-2025 21:21:19 Europe/London] Plugin loaded successfully: N8nWebhookHandler
[26-Mar-2025 21:21:19 Europe/London] N8nWebhookHandler: Activating plugin with ID: 12
[26-Mar-2025 21:21:19 Europe/London] Plugin N8nWebhookHandler: Activated with ID 12
[26-Mar-2025 21:21:19 Europe/London] N8nWebhookHandler: Creating/checking database tables
[26-Mar-2025 21:21:19 Europe/London] N8nWebhookHandler: Checking for existing settings
[26-Mar-2025 21:21:19 Europe/London] N8nWebhookHandler: Activation completed successfully
[26-Mar-2025 21:21:19 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 21:21:19 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 21:21:19 Europe/London] Plugin N8nWebhookHandler: Registering hook before_send_message
[26-Mar-2025 21:21:19 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:21:19 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 21:21:19 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:21:19 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 21:21:19 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:21:19 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:21:19 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 21:21:19 Europe/London] DirectMessageHandler: Constructing plugin
[26-Mar-2025 21:21:19 Europe/London] LLMModelSelector: Constructing plugin
[26-Mar-2025 21:22:47 Europe/London] PHP Fatal error:  Uncaught Error: Undefined constant "ENVIRONMENT" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\utils\Logger.php:10
Stack trace:
#0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\utils\Logger.php(51): Logger->__construct()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\utils\Logger.php(59): Logger::getInstance()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\utils\Logger.php(100): Logger::log()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\utils\DatabasePool.php(12): Logger::info()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\utils\DatabasePool.php(17): DatabasePool->__construct()
#5 C:\Users\zagzo\Downloads\UniServerZ\www\chat\db_config.php(19): DatabasePool::getInstance()
#6 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\models\Model.php(14): getDBConnection()
#7 C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\developer_portal.php(21): Model->__construct()
#8 {main}
  thrown in C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\utils\Logger.php on line 10
[26-Mar-2025 21:22:53 Europe/London] PHP Fatal error:  Uncaught Error: Undefined constant "ENVIRONMENT" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\utils\Logger.php:10
Stack trace:
#0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\utils\Logger.php(51): Logger->__construct()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\utils\Logger.php(59): Logger::getInstance()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\utils\Logger.php(100): Logger::log()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\utils\DatabasePool.php(12): Logger::info()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\utils\DatabasePool.php(17): DatabasePool->__construct()
#5 C:\Users\zagzo\Downloads\UniServerZ\www\chat\db_config.php(19): DatabasePool::getInstance()
#6 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\models\Model.php(14): getDBConnection()
#7 C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\developer_portal.php(21): Model->__construct()
#8 {main}
  thrown in C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\utils\Logger.php on line 10
[26-Mar-2025 21:23:05 Europe/London] PHP Fatal error:  Uncaught Error: Undefined constant "ENVIRONMENT" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\utils\Logger.php:10
Stack trace:
#0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\utils\Logger.php(51): Logger->__construct()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\utils\Logger.php(59): Logger::getInstance()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\utils\Logger.php(100): Logger::log()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\utils\DatabasePool.php(12): Logger::info()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\utils\DatabasePool.php(17): DatabasePool->__construct()
#5 C:\Users\zagzo\Downloads\UniServerZ\www\chat\db_config.php(19): DatabasePool::getInstance()
#6 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\models\Model.php(14): getDBConnection()
#7 C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\index.php(23): Model->__construct()
#8 {main}
  thrown in C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\utils\Logger.php on line 10
[26-Mar-2025 21:23:21 Europe/London] DirectMessageHandler: Constructing plugin
[26-Mar-2025 21:23:21 Europe/London] LLMModelSelector: Constructing plugin
[26-Mar-2025 21:28:21 Europe/London] PHP Fatal error:  Uncaught Error: Undefined constant "ENVIRONMENT" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\utils\Logger.php:10
Stack trace:
#0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\utils\Logger.php(51): Logger->__construct()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\utils\Logger.php(59): Logger::getInstance()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\utils\Logger.php(100): Logger::log()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\utils\DatabasePool.php(12): Logger::info()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\utils\DatabasePool.php(17): DatabasePool->__construct()
#5 C:\Users\zagzo\Downloads\UniServerZ\www\chat\db_config.php(19): DatabasePool::getInstance()
#6 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\models\Model.php(14): getDBConnection()
#7 C:\Users\zagzo\Downloads\UniServerZ\www\chat\admin\index.php(23): Model->__construct()
#8 {main}
  thrown in C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\utils\Logger.php on line 10
[26-Mar-2025 21:28:29 Europe/London] DirectMessageHandler: Constructing plugin
[26-Mar-2025 21:28:29 Europe/London] LLMModelSelector: Constructing plugin
[26-Mar-2025 21:28:54 Europe/London] PHP Parse error:  syntax error, unexpected token ";", expecting "]" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\config.php on line 115
[26-Mar-2025 21:28:56 Europe/London] PHP Parse error:  syntax error, unexpected token ";", expecting "]" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\config.php on line 115
[26-Mar-2025 21:28:58 Europe/London] PHP Parse error:  syntax error, unexpected token ";", expecting "]" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\config.php on line 115
[26-Mar-2025 21:31:58 Europe/London] PHP Warning:  Undefined array key "webhook_url" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\admin\settings.php on line 114
[26-Mar-2025 21:31:58 Europe/London] PHP Warning:  Undefined array key "ssl_verify" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\admin\settings.php on line 115
[26-Mar-2025 21:31:58 Europe/London] PHP Warning:  Undefined array key "webhook_url" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\admin\settings.php on line 133
[26-Mar-2025 21:31:58 Europe/London] PHP Warning:  Undefined array key "ssl_verify" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\admin\settings.php on line 134
[26-Mar-2025 21:36:36 Europe/London] DirectMessageHandler: Constructing plugin
[26-Mar-2025 21:36:36 Europe/London] LLMModelSelector: Constructing plugin
[26-Mar-2025 21:36:43 Europe/London] PHP Warning:  Undefined array key "webhook_url" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\admin\settings.php on line 114
[26-Mar-2025 21:36:43 Europe/London] PHP Warning:  Undefined array key "ssl_verify" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\admin\settings.php on line 115
[26-Mar-2025 21:36:43 Europe/London] PHP Warning:  Undefined array key "webhook_url" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\admin\settings.php on line 133
[26-Mar-2025 21:36:43 Europe/London] PHP Warning:  Undefined array key "ssl_verify" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\admin\settings.php on line 134
[26-Mar-2025 21:37:05 Europe/London] PHP Warning:  Undefined array key "webhook_url" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\admin\settings.php on line 114
[26-Mar-2025 21:37:05 Europe/London] PHP Warning:  Undefined array key "ssl_verify" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\admin\settings.php on line 115
[26-Mar-2025 21:37:05 Europe/London] PHP Warning:  Undefined array key "webhook_url" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\admin\settings.php on line 133
[26-Mar-2025 21:37:05 Europe/London] PHP Warning:  Undefined array key "ssl_verify" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\admin\settings.php on line 134
[26-Mar-2025 21:40:41 Europe/London] DirectMessageHandler: Constructing plugin
[26-Mar-2025 21:40:41 Europe/London] LLMModelSelector: Constructing plugin
[26-Mar-2025 21:40:49 Europe/London] DirectMessageHandler: Constructing plugin
[26-Mar-2025 21:40:49 Europe/London] LLMModelSelector: Constructing plugin
[26-Mar-2025 21:40:51 Europe/London] N8nWebhookHandler: Constructing with plugin ID: 12
[26-Mar-2025 21:40:51 Europe/London] N8nWebhookHandler: Constructing plugin
[26-Mar-2025 21:40:51 Europe/London] N8nWebhookHandler: Construction completed
[26-Mar-2025 21:40:51 Europe/London] Plugin loaded successfully: N8nWebhookHandler
[26-Mar-2025 21:40:51 Europe/London] N8nWebhookHandler: Activating plugin with ID: 12
[26-Mar-2025 21:40:51 Europe/London] Plugin N8nWebhookHandler: Activated with ID 12
[26-Mar-2025 21:40:51 Europe/London] N8nWebhookHandler: Creating/checking database tables
[26-Mar-2025 21:40:51 Europe/London] N8nWebhookHandler: Checking for existing settings
[26-Mar-2025 21:40:51 Europe/London] N8nWebhookHandler: Activation completed successfully
[26-Mar-2025 21:40:51 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 21:40:51 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 21:40:51 Europe/London] Plugin N8nWebhookHandler: Registering hook before_send_message
[26-Mar-2025 21:40:51 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:40:51 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 21:40:51 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:40:51 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 21:40:51 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:40:51 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:40:51 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 21:40:51 Europe/London] Plugin Class: N8nWebhookHandler
[26-Mar-2025 21:40:51 Europe/London] Plugin Instance: N8nWebhookHandler
[26-Mar-2025 21:40:51 Europe/London] Settings: Array
(
    [id] => 4
    [plugin_id] => 12
    [webhook_url] => https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
    [is_active] => 1
    [timeout] => 120
    [created_at] => 2025-03-26 21:10:05
    [updated_at] => 2025-03-26 21:10:19
)

[26-Mar-2025 21:41:01 Europe/London] PHP Warning:  Undefined array key "webhook_url" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\admin\settings.php on line 114
[26-Mar-2025 21:41:01 Europe/London] PHP Warning:  Undefined array key "ssl_verify" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\admin\settings.php on line 115
[26-Mar-2025 21:41:01 Europe/London] PHP Warning:  Undefined array key "webhook_url" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\admin\settings.php on line 133
[26-Mar-2025 21:41:01 Europe/London] PHP Warning:  Undefined array key "ssl_verify" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\admin\settings.php on line 134
[26-Mar-2025 21:44:01 Europe/London] DirectMessageHandler: Constructing plugin
[26-Mar-2025 21:44:01 Europe/London] LLMModelSelector: Constructing plugin
[26-Mar-2025 21:44:11 Europe/London] PHP Warning:  Undefined array key "webhook_url" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\admin\settings.php on line 114
[26-Mar-2025 21:44:11 Europe/London] PHP Warning:  Undefined array key "ssl_verify" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\admin\settings.php on line 115
[26-Mar-2025 21:44:11 Europe/London] PHP Warning:  Undefined array key "webhook_url" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\admin\settings.php on line 133
[26-Mar-2025 21:44:11 Europe/London] PHP Warning:  Undefined array key "ssl_verify" in C:\Users\zagzo\Downloads\UniServerZ\www\chat\api\admin\settings.php on line 134
[26-Mar-2025 21:49:10 Europe/London] DirectMessageHandler: Constructing plugin
[26-Mar-2025 21:49:10 Europe/London] LLMModelSelector: Constructing plugin
[26-Mar-2025 21:51:28 Europe/London] DirectMessageHandler: Constructing plugin
[26-Mar-2025 21:51:28 Europe/London] LLMModelSelector: Constructing plugin
[26-Mar-2025 21:53:58 Europe/London] DirectMessageHandler: Constructing plugin
[26-Mar-2025 21:53:58 Europe/London] LLMModelSelector: Constructing plugin
[26-Mar-2025 21:54:26 Europe/London] Checking conversation limit for user 8: current usage = 6, limit = 50
[26-Mar-2025 21:54:26 Europe/London] PluginManager: Loading plugins from directory: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins
[26-Mar-2025 21:54:26 Europe/London] PluginManager: Found plugin directories: Array
(
    [0] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler
    [1] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector
    [2] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler
    [3] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut
    [4] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin
)

[26-Mar-2025 21:54:26 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[26-Mar-2025 21:54:26 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[26-Mar-2025 21:54:26 Europe/London] PluginManager: Creating instance of plugin class: DirectMessageHandler
[26-Mar-2025 21:54:26 Europe/London] PluginManager: Plugin not found in database, creating record for: DirectMessageHandler
[26-Mar-2025 21:54:26 Europe/London] PluginManager ERROR: Failed to load plugin DirectMessageHandler: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 21:54:26 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 21:54:26 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[26-Mar-2025 21:54:26 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[26-Mar-2025 21:54:26 Europe/London] PluginManager: Creating instance of plugin class: LLMModelSelector
[26-Mar-2025 21:54:26 Europe/London] PluginManager: Plugin not found in database, creating record for: LLMModelSelector
[26-Mar-2025 21:54:26 Europe/London] PluginManager ERROR: Failed to load plugin LLMModelSelector: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 21:54:26 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 21:54:26 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[26-Mar-2025 21:54:26 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[26-Mar-2025 21:54:26 Europe/London] PluginManager: Creating instance of plugin class: N8nWebhookHandler
[26-Mar-2025 21:54:26 Europe/London] PluginManager: Instantiating plugin with ID: 12
[26-Mar-2025 21:54:26 Europe/London] N8nWebhookHandler: Constructing with plugin ID: 12
[26-Mar-2025 21:54:26 Europe/London] N8nWebhookHandler: Constructing plugin
[26-Mar-2025 21:54:26 Europe/London] N8nWebhookHandler: Construction completed
[26-Mar-2025 21:54:26 Europe/London] PluginManager: Activating plugin: N8nWebhookHandler
[26-Mar-2025 21:54:26 Europe/London] N8nWebhookHandler: Activating plugin with ID: 12
[26-Mar-2025 21:54:26 Europe/London] Plugin N8nWebhookHandler: Activated with ID 12
[26-Mar-2025 21:54:26 Europe/London] N8nWebhookHandler: Creating/checking database tables
[26-Mar-2025 21:54:26 Europe/London] N8nWebhookHandler: Checking for existing settings
[26-Mar-2025 21:54:26 Europe/London] N8nWebhookHandler: Activation completed successfully
[26-Mar-2025 21:54:26 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 21:54:26 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 21:54:26 Europe/London] Plugin N8nWebhookHandler: Registering hook before_send_message
[26-Mar-2025 21:54:26 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:54:26 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 21:54:26 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:54:26 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 21:54:26 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:54:26 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:54:26 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 21:54:26 Europe/London] PluginManager: Initializing plugin: N8nWebhookHandler
[26-Mar-2025 21:54:26 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 21:54:26 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 21:54:26 Europe/London] Plugin N8nWebhookHandler: Registering hook before_send_message
[26-Mar-2025 21:54:26 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:54:26 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 21:54:26 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:54:26 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 21:54:26 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:54:26 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:54:26 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 21:54:26 Europe/London] PluginManager: Plugin activated and initialized: N8nWebhookHandler
[26-Mar-2025 21:54:26 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[26-Mar-2025 21:54:26 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[26-Mar-2025 21:54:26 Europe/London] PluginManager: Creating instance of plugin class: SameInSameOut
[26-Mar-2025 21:54:26 Europe/London] PluginManager: Instantiating plugin with ID: 13
[26-Mar-2025 21:54:26 Europe/London] SameInSameOut: Constructing plugin
[26-Mar-2025 21:54:26 Europe/London] PluginManager: Activating plugin: SameInSameOut
[26-Mar-2025 21:54:26 Europe/London] Plugin SameInSameOut: Activated with ID 13
[26-Mar-2025 21:54:26 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[26-Mar-2025 21:54:26 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:54:26 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[26-Mar-2025 21:54:26 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:54:26 Europe/London] PluginManager: Initializing plugin: SameInSameOut
[26-Mar-2025 21:54:26 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[26-Mar-2025 21:54:26 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:54:26 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[26-Mar-2025 21:54:26 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:54:26 Europe/London] PluginManager: Plugin activated and initialized: SameInSameOut
[26-Mar-2025 21:54:26 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[26-Mar-2025 21:54:26 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[26-Mar-2025 21:54:26 Europe/London] PluginManager: Creating instance of plugin class: TestPlugin
[26-Mar-2025 21:54:26 Europe/London] PluginManager: Plugin not found in database, creating record for: TestPlugin
[26-Mar-2025 21:54:26 Europe/London] PluginManager ERROR: Failed to load plugin TestPlugin: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 21:54:26 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 21:54:26 Europe/London] PluginManager: Loaded plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[26-Mar-2025 21:54:26 Europe/London] PluginManager: Active plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[26-Mar-2025 21:54:26 Europe/London] === Starting message creation process ===
[26-Mar-2025 21:54:26 Europe/London] User authenticated successfully - User ID: 8
[26-Mar-2025 21:54:26 Europe/London] Received message data: {"conversation_id":"139","content":"hi"}
[26-Mar-2025 21:54:26 Europe/London] Message data validation passed
[26-Mar-2025 21:54:26 Europe/London] Checking question limit for user 8: current usage = 0, limit = 500
[26-Mar-2025 21:54:26 Europe/London] Question limit check passed
[26-Mar-2025 21:54:26 Europe/London] Fetching conversation and plugin info for conversation ID: 139
[26-Mar-2025 21:54:26 Europe/London] Found conversation - Plugin ID: 13, Plugin Name: SameInSameOut, Plugin Active: yes
[26-Mar-2025 21:54:26 Europe/London] Created message data structure
[26-Mar-2025 21:54:26 Europe/London] Attempting to get plugin instance for: SameInSameOut
[26-Mar-2025 21:54:26 Europe/London] Successfully got plugin instance of class: SameInSameOut
[26-Mar-2025 21:54:26 Europe/London] Plugin hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:54:26 Europe/London] Executing before_send_message hook for plugin: SameInSameOut
[26-Mar-2025 21:54:26 Europe/London] Plugin SameInSameOut: Executing hook before_send_message
[26-Mar-2025 21:54:26 Europe/London] Plugin SameInSameOut: Available hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:54:26 Europe/London] Plugin SameInSameOut: Calling hook handler for before_send_message
[26-Mar-2025 21:54:26 Europe/London] Plugin SameInSameOut: Hook handler executed successfully with result: hi
[26-Mar-2025 21:54:26 Europe/London] before_send_message hook executed successfully
[26-Mar-2025 21:54:26 Europe/London] Got response from before_send_message: hi
[26-Mar-2025 21:54:26 Europe/London] Saving message to database
[26-Mar-2025 21:54:26 Europe/London] Message saved successfully with ID: 142
[26-Mar-2025 21:54:26 Europe/London] Executing after_send_message hook for plugin: SameInSameOut
[26-Mar-2025 21:54:26 Europe/London] Plugin SameInSameOut: Executing hook after_send_message
[26-Mar-2025 21:54:26 Europe/London] Plugin SameInSameOut: Available hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:54:26 Europe/London] Plugin SameInSameOut: Calling hook handler for after_send_message
[26-Mar-2025 21:54:26 Europe/London] Plugin SameInSameOut: Hook handler executed successfully with result: hi
[26-Mar-2025 21:54:26 Europe/London] after_send_message hook executed successfully
[26-Mar-2025 21:54:26 Europe/London] Saving plugin response to database: hi
[26-Mar-2025 21:54:26 Europe/London] Plugin response saved with ID: 143
[26-Mar-2025 21:54:26 Europe/London] === Message creation process completed successfully ===
[26-Mar-2025 21:54:26 Europe/London] Sending response to client: {"success":true,"data":{"message":{"id":"142","conversation_id":"139","content":"hi","role":"user"},"assistant_message":{"id":"143","conversation_id":"139","content":"hi","role":"assistant"}}}
[26-Mar-2025 21:54:31 Europe/London] PluginManager: Loading plugins from directory: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins
[26-Mar-2025 21:54:31 Europe/London] PluginManager: Found plugin directories: Array
(
    [0] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler
    [1] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector
    [2] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler
    [3] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut
    [4] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin
)

[26-Mar-2025 21:54:31 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[26-Mar-2025 21:54:31 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[26-Mar-2025 21:54:31 Europe/London] PluginManager: Creating instance of plugin class: DirectMessageHandler
[26-Mar-2025 21:54:31 Europe/London] PluginManager: Plugin not found in database, creating record for: DirectMessageHandler
[26-Mar-2025 21:54:31 Europe/London] PluginManager ERROR: Failed to load plugin DirectMessageHandler: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 21:54:31 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 21:54:31 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[26-Mar-2025 21:54:31 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[26-Mar-2025 21:54:31 Europe/London] PluginManager: Creating instance of plugin class: LLMModelSelector
[26-Mar-2025 21:54:31 Europe/London] PluginManager: Plugin not found in database, creating record for: LLMModelSelector
[26-Mar-2025 21:54:31 Europe/London] PluginManager ERROR: Failed to load plugin LLMModelSelector: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 21:54:31 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 21:54:31 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[26-Mar-2025 21:54:31 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[26-Mar-2025 21:54:31 Europe/London] PluginManager: Creating instance of plugin class: N8nWebhookHandler
[26-Mar-2025 21:54:31 Europe/London] PluginManager: Instantiating plugin with ID: 12
[26-Mar-2025 21:54:31 Europe/London] N8nWebhookHandler: Constructing with plugin ID: 12
[26-Mar-2025 21:54:31 Europe/London] N8nWebhookHandler: Constructing plugin
[26-Mar-2025 21:54:31 Europe/London] N8nWebhookHandler: Construction completed
[26-Mar-2025 21:54:31 Europe/London] PluginManager: Activating plugin: N8nWebhookHandler
[26-Mar-2025 21:54:31 Europe/London] N8nWebhookHandler: Activating plugin with ID: 12
[26-Mar-2025 21:54:31 Europe/London] Plugin N8nWebhookHandler: Activated with ID 12
[26-Mar-2025 21:54:31 Europe/London] N8nWebhookHandler: Creating/checking database tables
[26-Mar-2025 21:54:31 Europe/London] N8nWebhookHandler: Checking for existing settings
[26-Mar-2025 21:54:31 Europe/London] N8nWebhookHandler: Activation completed successfully
[26-Mar-2025 21:54:31 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 21:54:31 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 21:54:31 Europe/London] Plugin N8nWebhookHandler: Registering hook before_send_message
[26-Mar-2025 21:54:31 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:54:31 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 21:54:31 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:54:31 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 21:54:31 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:54:31 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:54:31 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 21:54:31 Europe/London] PluginManager: Initializing plugin: N8nWebhookHandler
[26-Mar-2025 21:54:31 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 21:54:31 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 21:54:31 Europe/London] Plugin N8nWebhookHandler: Registering hook before_send_message
[26-Mar-2025 21:54:31 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:54:31 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 21:54:31 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:54:31 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 21:54:31 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:54:31 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:54:31 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 21:54:31 Europe/London] PluginManager: Plugin activated and initialized: N8nWebhookHandler
[26-Mar-2025 21:54:31 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[26-Mar-2025 21:54:31 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[26-Mar-2025 21:54:31 Europe/London] PluginManager: Creating instance of plugin class: SameInSameOut
[26-Mar-2025 21:54:31 Europe/London] PluginManager: Instantiating plugin with ID: 13
[26-Mar-2025 21:54:31 Europe/London] SameInSameOut: Constructing plugin
[26-Mar-2025 21:54:31 Europe/London] PluginManager: Activating plugin: SameInSameOut
[26-Mar-2025 21:54:31 Europe/London] Plugin SameInSameOut: Activated with ID 13
[26-Mar-2025 21:54:31 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[26-Mar-2025 21:54:31 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:54:31 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[26-Mar-2025 21:54:31 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:54:31 Europe/London] PluginManager: Initializing plugin: SameInSameOut
[26-Mar-2025 21:54:31 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[26-Mar-2025 21:54:31 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:54:31 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[26-Mar-2025 21:54:31 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:54:31 Europe/London] PluginManager: Plugin activated and initialized: SameInSameOut
[26-Mar-2025 21:54:31 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[26-Mar-2025 21:54:31 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[26-Mar-2025 21:54:31 Europe/London] PluginManager: Creating instance of plugin class: TestPlugin
[26-Mar-2025 21:54:31 Europe/London] PluginManager: Plugin not found in database, creating record for: TestPlugin
[26-Mar-2025 21:54:31 Europe/London] PluginManager ERROR: Failed to load plugin TestPlugin: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 21:54:31 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 21:54:31 Europe/London] PluginManager: Loaded plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[26-Mar-2025 21:54:31 Europe/London] PluginManager: Active plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[26-Mar-2025 21:54:31 Europe/London] === Starting message creation process ===
[26-Mar-2025 21:54:31 Europe/London] User authenticated successfully - User ID: 8
[26-Mar-2025 21:54:31 Europe/London] Received message data: {"conversation_id":"139","content":"hi"}
[26-Mar-2025 21:54:31 Europe/London] Message data validation passed
[26-Mar-2025 21:54:31 Europe/London] Checking question limit for user 8: current usage = 0, limit = 500
[26-Mar-2025 21:54:31 Europe/London] Question limit check passed
[26-Mar-2025 21:54:31 Europe/London] Fetching conversation and plugin info for conversation ID: 139
[26-Mar-2025 21:54:31 Europe/London] Found conversation - Plugin ID: 12, Plugin Name: N8nWebhookHandler, Plugin Active: yes
[26-Mar-2025 21:54:31 Europe/London] Created message data structure
[26-Mar-2025 21:54:31 Europe/London] Attempting to get plugin instance for: N8nWebhookHandler
[26-Mar-2025 21:54:31 Europe/London] Successfully got plugin instance of class: N8nWebhookHandler
[26-Mar-2025 21:54:31 Europe/London] Plugin hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:54:31 Europe/London] Executing before_send_message hook for plugin: N8nWebhookHandler
[26-Mar-2025 21:54:31 Europe/London] Plugin N8nWebhookHandler: Executing hook before_send_message
[26-Mar-2025 21:54:31 Europe/London] Plugin N8nWebhookHandler: Available hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:54:31 Europe/London] Plugin N8nWebhookHandler: Calling hook handler for before_send_message
[26-Mar-2025 21:54:31 Europe/London] N8nWebhookHandler: Starting message processing
[26-Mar-2025 21:54:31 Europe/London] N8nWebhookHandler: Message data: {"conversation_id":"139","content":"hi","role":"user"}
[26-Mar-2025 21:54:31 Europe/London] N8nWebhookHandler: Using webhook URL: https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
[26-Mar-2025 21:54:31 Europe/London] N8nWebhookHandler: Sending request data: {"message":"hi","conversation_id":"139","timestamp":"2025-03-26 21:54:31"}
[26-Mar-2025 21:54:31 Europe/London] N8nWebhookHandler: SSL certificate verification is disabled for testing
[26-Mar-2025 21:54:33 Europe/London] N8nWebhookHandler: Verbose curl output:
*   Trying 104.21.112.1:443...
* Connected to n8n.mazcode.com (104.21.112.1) port 443
* ALPN: curl offers h2,http/1.1
* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384
* ALPN: server accepted h2
* Server certificate:
*  subject: CN=mazcode.com
*  start date: Mar 21 01:54:39 2025 GMT
*  expire date: Jun 19 02:51:08 2025 GMT
*  issuer: C=US; O=Google Trust Services; CN=WE1
*  SSL certificate verify result: unable to get local issuer certificate (20), continuing anyway.
* using HTTP/2
* [HTTP/2] [1] OPENED stream for https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
* [HTTP/2] [1] [:method: POST]
* [HTTP/2] [1] [:scheme: https]
* [HTTP/2] [1] [:authority: n8n.mazcode.com]
* [HTTP/2] [1] [:path: /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f]
* [HTTP/2] [1] [content-type: application/json]
* [HTTP/2] [1] [accept: application/json]
* [HTTP/2] [1] [content-length: 74]
> POST /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f HTTP/2
Host: n8n.mazcode.com
Content-Type: application/json
Accept: application/json
Content-Length: 74

* old SSL session ID is stale, removing
< HTTP/2 200 
< date: Wed, 26 Mar 2025 21:54:32 GMT
< content-type: text/html; charset=utf-8
< vary: Accept-Encoding
< vary: Accept-Encoding
< cf-cache-status: DYNAMIC
< report-to: {"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=NO2212S%2B06caysSF99%2FMuU%2F0TF2RcXXpZDwCl%2FZCotLeD6dvtg6CXxEeSQnp1V0T0wmnJenG2xPPM%2BHf90dJgJoocqNPRaI5xDaklKuRsAj6jIewSIrXgoryzhrvPWDghAw%3D"}],"group":"cf-nel","max_age":604800}
< nel: {"success_fraction":0,"report_to":"cf-nel","max_age":604800}
< server: cloudflare
< cf-ray: 9269e3122962baf3-MXP
< alt-svc: h3=":443"; ma=86400
< server-timing: cfL4;desc="?proto=TCP&rtt=87513&min_rtt=85775&rtt_var=33407&sent=8&recv=8&lost=0&retrans=1&sent_bytes=4805&recv_bytes=908&delivery_rate=16554&cwnd=253&unsent_bytes=0&cid=46ac82391bb12216&ts=1594&x=0"
< 
* Connection #0 to host n8n.mazcode.com left intact

[26-Mar-2025 21:54:33 Europe/London] N8nWebhookHandler: Webhook response code: 200
[26-Mar-2025 21:54:33 Europe/London] N8nWebhookHandler: Webhook response: مرحباً! 😊  
كيف أستطيع مساعدتك اليوم؟ هل تبحث عن شريك حياة مثالي؟ 💑
[26-Mar-2025 21:54:33 Europe/London] N8nWebhookHandler: Message successfully processed by webhook
[26-Mar-2025 21:54:33 Europe/London] Plugin N8nWebhookHandler: Hook handler executed successfully with result: مرحباً! 😊  
كيف أستطيع مساعدتك اليوم؟ هل تبحث عن شريك حياة مثالي؟ 💑
[26-Mar-2025 21:54:33 Europe/London] before_send_message hook executed successfully
[26-Mar-2025 21:54:33 Europe/London] Got response from before_send_message: مرحباً! 😊  
كيف أستطيع مساعدتك اليوم؟ هل تبحث عن شريك حياة مثالي؟ 💑
[26-Mar-2025 21:54:33 Europe/London] Saving message to database
[26-Mar-2025 21:54:33 Europe/London] Message saved successfully with ID: 144
[26-Mar-2025 21:54:33 Europe/London] Executing after_send_message hook for plugin: N8nWebhookHandler
[26-Mar-2025 21:54:33 Europe/London] Plugin N8nWebhookHandler: Executing hook after_send_message
[26-Mar-2025 21:54:33 Europe/London] Plugin N8nWebhookHandler: Available hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 21:54:33 Europe/London] Plugin N8nWebhookHandler: Calling hook handler for after_send_message
[26-Mar-2025 21:54:33 Europe/London] N8nWebhookHandler: Starting message processing
[26-Mar-2025 21:54:33 Europe/London] N8nWebhookHandler: Message data: {"conversation_id":"139","content":"hi","role":"user"}
[26-Mar-2025 21:54:33 Europe/London] N8nWebhookHandler: Using webhook URL: https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
[26-Mar-2025 21:54:33 Europe/London] N8nWebhookHandler: Sending request data: {"message":"hi","conversation_id":"139","timestamp":"2025-03-26 21:54:33"}
[26-Mar-2025 21:54:33 Europe/London] N8nWebhookHandler: SSL certificate verification is disabled for testing
[26-Mar-2025 21:54:35 Europe/London] N8nWebhookHandler: Verbose curl output:
*   Trying 104.21.112.1:443...
* Connected to n8n.mazcode.com (104.21.112.1) port 443
* ALPN: curl offers h2,http/1.1
* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384
* ALPN: server accepted h2
* Server certificate:
*  subject: CN=mazcode.com
*  start date: Mar 21 01:54:39 2025 GMT
*  expire date: Jun 19 02:51:08 2025 GMT
*  issuer: C=US; O=Google Trust Services; CN=WE1
*  SSL certificate verify result: unable to get local issuer certificate (20), continuing anyway.
* using HTTP/2
* [HTTP/2] [1] OPENED stream for https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
* [HTTP/2] [1] [:method: POST]
* [HTTP/2] [1] [:scheme: https]
* [HTTP/2] [1] [:authority: n8n.mazcode.com]
* [HTTP/2] [1] [:path: /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f]
* [HTTP/2] [1] [content-type: application/json]
* [HTTP/2] [1] [accept: application/json]
* [HTTP/2] [1] [content-length: 74]
> POST /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f HTTP/2
Host: n8n.mazcode.com
Content-Type: application/json
Accept: application/json
Content-Length: 74

* old SSL session ID is stale, removing
< HTTP/2 200 
< date: Wed, 26 Mar 2025 21:54:34 GMT
< content-type: text/html; charset=utf-8
< vary: Accept-Encoding
< vary: Accept-Encoding
< cf-cache-status: DYNAMIC
< server: cloudflare
< cf-ray: 9269e31c0a25d815-MXP
< alt-svc: h3=":443"; ma=86400
< 
* Connection #0 to host n8n.mazcode.com left intact

[26-Mar-2025 21:54:35 Europe/London] N8nWebhookHandler: Webhook response code: 200
[26-Mar-2025 21:54:35 Europe/London] N8nWebhookHandler: Webhook response: مرحباً! 😊  
كيف يمكنني مساعدتك اليوم؟ هل تبحث عن توأم الروح؟ 💕
[26-Mar-2025 21:54:35 Europe/London] N8nWebhookHandler: Message successfully processed by webhook
[26-Mar-2025 21:54:35 Europe/London] Plugin N8nWebhookHandler: Hook handler executed successfully with result: مرحباً! 😊  
كيف يمكنني مساعدتك اليوم؟ هل تبحث عن توأم الروح؟ 💕
[26-Mar-2025 21:54:35 Europe/London] after_send_message hook executed successfully
[26-Mar-2025 21:54:35 Europe/London] Saving plugin response to database: مرحباً! 😊  
كيف يمكنني مساعدتك اليوم؟ هل تبحث عن توأم الروح؟ 💕
[26-Mar-2025 21:54:35 Europe/London] Plugin response saved with ID: 145
[26-Mar-2025 21:54:35 Europe/London] === Message creation process completed successfully ===
[26-Mar-2025 21:54:35 Europe/London] Sending response to client: {"success":true,"data":{"message":{"id":"144","conversation_id":"139","content":"hi","role":"user"},"assistant_message":{"id":"145","conversation_id":"139","content":"\u0645\u0631\u062d\u0628\u0627\u064b! \ud83d\ude0a  \n\u0643\u064a\u0641 \u064a\u0645\u0643\u0646\u0646\u064a \u0645\u0633\u0627\u0639\u062f\u062a\u0643 \u0627\u0644\u064a\u0648\u0645\u061f \u0647\u0644 \u062a\u0628\u062d\u062b \u0639\u0646 \u062a\u0648\u0623\u0645 \u0627\u0644\u0631\u0648\u062d\u061f \ud83d\udc95","role":"assistant"}}}
[26-Mar-2025 21:55:24 Europe/London] DirectMessageHandler: Constructing plugin
[26-Mar-2025 21:55:24 Europe/London] LLMModelSelector: Constructing plugin
[26-Mar-2025 21:55:25 Europe/London] DirectMessageHandler: Constructing plugin
[26-Mar-2025 21:55:25 Europe/London] LLMModelSelector: Constructing plugin
[26-Mar-2025 21:55:26 Europe/London] DirectMessageHandler: Constructing plugin
[26-Mar-2025 21:55:26 Europe/London] LLMModelSelector: Constructing plugin
[26-Mar-2025 23:37:52 Europe/London] Checking conversation limit for user 8: current usage = 7, limit = 50
[26-Mar-2025 23:37:52 Europe/London] PluginManager: Loading plugins from directory: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins
[26-Mar-2025 23:37:52 Europe/London] PluginManager: Found plugin directories: Array
(
    [0] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler
    [1] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector
    [2] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler
    [3] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut
    [4] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin
)

[26-Mar-2025 23:37:52 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[26-Mar-2025 23:37:52 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[26-Mar-2025 23:37:52 Europe/London] PluginManager: Creating instance of plugin class: DirectMessageHandler
[26-Mar-2025 23:37:52 Europe/London] PluginManager: Plugin not found in database, creating record for: DirectMessageHandler
[26-Mar-2025 23:37:52 Europe/London] PluginManager ERROR: Failed to load plugin DirectMessageHandler: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 23:37:52 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 23:37:52 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[26-Mar-2025 23:37:52 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[26-Mar-2025 23:37:52 Europe/London] PluginManager: Creating instance of plugin class: LLMModelSelector
[26-Mar-2025 23:37:52 Europe/London] PluginManager: Plugin not found in database, creating record for: LLMModelSelector
[26-Mar-2025 23:37:52 Europe/London] PluginManager ERROR: Failed to load plugin LLMModelSelector: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 23:37:52 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 23:37:52 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[26-Mar-2025 23:37:52 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[26-Mar-2025 23:37:52 Europe/London] PluginManager: Creating instance of plugin class: N8nWebhookHandler
[26-Mar-2025 23:37:52 Europe/London] PluginManager: Instantiating plugin with ID: 12
[26-Mar-2025 23:37:52 Europe/London] N8nWebhookHandler: Constructing with plugin ID: 12
[26-Mar-2025 23:37:52 Europe/London] N8nWebhookHandler: Constructing plugin
[26-Mar-2025 23:37:52 Europe/London] N8nWebhookHandler: Construction completed
[26-Mar-2025 23:37:52 Europe/London] PluginManager: Activating plugin: N8nWebhookHandler
[26-Mar-2025 23:37:52 Europe/London] N8nWebhookHandler: Activating plugin with ID: 12
[26-Mar-2025 23:37:52 Europe/London] Plugin N8nWebhookHandler: Activated with ID 12
[26-Mar-2025 23:37:52 Europe/London] N8nWebhookHandler: Creating/checking database tables
[26-Mar-2025 23:37:52 Europe/London] N8nWebhookHandler: Checking for existing settings
[26-Mar-2025 23:37:52 Europe/London] N8nWebhookHandler: Activation completed successfully
[26-Mar-2025 23:37:52 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 23:37:52 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 23:37:52 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 23:37:52 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:37:52 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 23:37:52 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:37:52 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:37:52 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 23:37:52 Europe/London] PluginManager: Initializing plugin: N8nWebhookHandler
[26-Mar-2025 23:37:52 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 23:37:52 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 23:37:52 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 23:37:52 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:37:52 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 23:37:52 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:37:52 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:37:52 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 23:37:52 Europe/London] PluginManager: Plugin activated and initialized: N8nWebhookHandler
[26-Mar-2025 23:37:52 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[26-Mar-2025 23:37:52 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[26-Mar-2025 23:37:52 Europe/London] PluginManager: Creating instance of plugin class: SameInSameOut
[26-Mar-2025 23:37:52 Europe/London] PluginManager: Instantiating plugin with ID: 13
[26-Mar-2025 23:37:52 Europe/London] SameInSameOut: Constructing plugin
[26-Mar-2025 23:37:52 Europe/London] PluginManager: Activating plugin: SameInSameOut
[26-Mar-2025 23:37:52 Europe/London] Plugin SameInSameOut: Activated with ID 13
[26-Mar-2025 23:37:52 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[26-Mar-2025 23:37:52 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:37:52 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[26-Mar-2025 23:37:52 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:37:52 Europe/London] PluginManager: Initializing plugin: SameInSameOut
[26-Mar-2025 23:37:52 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[26-Mar-2025 23:37:52 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:37:52 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[26-Mar-2025 23:37:52 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:37:52 Europe/London] PluginManager: Plugin activated and initialized: SameInSameOut
[26-Mar-2025 23:37:52 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[26-Mar-2025 23:37:52 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[26-Mar-2025 23:37:52 Europe/London] PluginManager: Creating instance of plugin class: TestPlugin
[26-Mar-2025 23:37:52 Europe/London] PluginManager: Plugin not found in database, creating record for: TestPlugin
[26-Mar-2025 23:37:52 Europe/London] PluginManager ERROR: Failed to load plugin TestPlugin: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 23:37:52 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 23:37:52 Europe/London] PluginManager: Loaded plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[26-Mar-2025 23:37:52 Europe/London] PluginManager: Active plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[26-Mar-2025 23:37:52 Europe/London] === Starting message creation process ===
[26-Mar-2025 23:37:52 Europe/London] User authenticated successfully - User ID: 8
[26-Mar-2025 23:37:52 Europe/London] Received message data: {"conversation_id":"140","content":"hi"}
[26-Mar-2025 23:37:52 Europe/London] Message data validation passed
[26-Mar-2025 23:37:52 Europe/London] Checking question limit for user 8: current usage = 0, limit = 500
[26-Mar-2025 23:37:52 Europe/London] Question limit check passed
[26-Mar-2025 23:37:52 Europe/London] Fetching conversation and plugin info for conversation ID: 140
[26-Mar-2025 23:37:52 Europe/London] Found conversation - Plugin ID: 12, Plugin Name: N8nWebhookHandler, Plugin Active: yes
[26-Mar-2025 23:37:52 Europe/London] Created message data structure
[26-Mar-2025 23:37:52 Europe/London] Attempting to get plugin instance for: N8nWebhookHandler
[26-Mar-2025 23:37:52 Europe/London] Successfully got plugin instance of class: N8nWebhookHandler
[26-Mar-2025 23:37:52 Europe/London] Plugin hooks: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:37:52 Europe/London] Executing before_send_message hook for plugin: N8nWebhookHandler
[26-Mar-2025 23:37:52 Europe/London] Plugin N8nWebhookHandler: Executing hook before_send_message
[26-Mar-2025 23:37:52 Europe/London] Plugin N8nWebhookHandler: Available hooks: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:37:52 Europe/London] Plugin N8nWebhookHandler: No handlers registered for hook before_send_message
[26-Mar-2025 23:37:52 Europe/London] before_send_message hook executed successfully
[26-Mar-2025 23:37:52 Europe/London] Saving message to database
[26-Mar-2025 23:37:52 Europe/London] Message saved successfully with ID: 146
[26-Mar-2025 23:37:52 Europe/London] Executing after_send_message hook for plugin: N8nWebhookHandler
[26-Mar-2025 23:37:52 Europe/London] Plugin N8nWebhookHandler: Executing hook after_send_message
[26-Mar-2025 23:37:52 Europe/London] Plugin N8nWebhookHandler: Available hooks: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:37:52 Europe/London] Plugin N8nWebhookHandler: Calling hook handler for after_send_message
[26-Mar-2025 23:37:52 Europe/London] N8nWebhookHandler: Starting message processing
[26-Mar-2025 23:37:52 Europe/London] N8nWebhookHandler: Message data: {"conversation_id":"140","content":"hi","role":"user"}
[26-Mar-2025 23:37:52 Europe/London] N8nWebhookHandler: Using webhook URL: https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
[26-Mar-2025 23:37:52 Europe/London] N8nWebhookHandler: Sending request data: {"message":"hi","conversation_id":"140","timestamp":"2025-03-26 23:37:52"}
[26-Mar-2025 23:37:52 Europe/London] N8nWebhookHandler: SSL certificate verification is disabled for testing
[26-Mar-2025 23:37:53 Europe/London] N8nWebhookHandler: Verbose curl output:
*   Trying 104.21.48.1:443...
* Connected to n8n.mazcode.com (104.21.48.1) port 443
* ALPN: curl offers h2,http/1.1
* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384
* ALPN: server accepted h2
* Server certificate:
*  subject: CN=mazcode.com
*  start date: Mar 21 01:54:39 2025 GMT
*  expire date: Jun 19 02:51:08 2025 GMT
*  issuer: C=US; O=Google Trust Services; CN=WE1
*  SSL certificate verify result: unable to get local issuer certificate (20), continuing anyway.
* using HTTP/2
* [HTTP/2] [1] OPENED stream for https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
* [HTTP/2] [1] [:method: POST]
* [HTTP/2] [1] [:scheme: https]
* [HTTP/2] [1] [:authority: n8n.mazcode.com]
* [HTTP/2] [1] [:path: /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f]
* [HTTP/2] [1] [content-type: application/json]
* [HTTP/2] [1] [accept: application/json]
* [HTTP/2] [1] [content-length: 74]
> POST /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f HTTP/2
Host: n8n.mazcode.com
Content-Type: application/json
Accept: application/json
Content-Length: 74

* old SSL session ID is stale, removing
< HTTP/2 200 
< date: Wed, 26 Mar 2025 23:37:52 GMT
< content-type: text/html; charset=utf-8
< vary: Accept-Encoding
< vary: Accept-Encoding
< cf-cache-status: DYNAMIC
< report-to: {"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=55MabqOfNzLVp0KuYREY9Kiug%2FhCunNVS0M6I10agIyvjgxJCL9tbweZl78PX7c09qSiiNF9J3d4LbnzXn4%2BGsge7H7BwOoyoTw4gDU70IErUzoazGUjrRbXrTGfKuQcPcE%3D"}],"group":"cf-nel","max_age":604800}
< nel: {"success_fraction":0,"report_to":"cf-nel","max_age":604800}
< server: cloudflare
< cf-ray: 926a7a74fc2bee65-MXP
< alt-svc: h3=":443"; ma=86400
< server-timing: cfL4;desc="?proto=TCP&rtt=103876&min_rtt=97831&rtt_var=31637&sent=7&recv=9&lost=0&retrans=0&sent_bytes=3409&recv_bytes=908&delivery_rate=26802&cwnd=253&unsent_bytes=0&cid=b08b47ee92dbc067&ts=938&x=0"
< 
* Connection #0 to host n8n.mazcode.com left intact

[26-Mar-2025 23:37:53 Europe/London] N8nWebhookHandler: Webhook response code: 200
[26-Mar-2025 23:37:53 Europe/London] N8nWebhookHandler: Webhook response: مرحبًا! كيف يمكنني مساعدتك اليوم؟ 😊
[26-Mar-2025 23:37:53 Europe/London] N8nWebhookHandler: Message successfully processed by webhook
[26-Mar-2025 23:37:53 Europe/London] Plugin N8nWebhookHandler: Hook handler executed successfully with result: مرحبًا! كيف يمكنني مساعدتك اليوم؟ 😊
[26-Mar-2025 23:37:53 Europe/London] after_send_message hook executed successfully
[26-Mar-2025 23:37:53 Europe/London] Saving plugin response to database: مرحبًا! كيف يمكنني مساعدتك اليوم؟ 😊
[26-Mar-2025 23:37:53 Europe/London] Plugin response saved with ID: 147
[26-Mar-2025 23:37:53 Europe/London] === Message creation process completed successfully ===
[26-Mar-2025 23:37:53 Europe/London] Sending response to client: {"success":true,"data":{"message":{"id":"146","conversation_id":"140","content":"hi","role":"user"},"assistant_message":{"id":"147","conversation_id":"140","content":"\u0645\u0631\u062d\u0628\u064b\u0627! \u0643\u064a\u0641 \u064a\u0645\u0643\u0646\u0646\u064a \u0645\u0633\u0627\u0639\u062f\u062a\u0643 \u0627\u0644\u064a\u0648\u0645\u061f \ud83d\ude0a","role":"assistant"}}}
[26-Mar-2025 23:38:06 Europe/London] Checking conversation limit for user 8: current usage = 8, limit = 50
[26-Mar-2025 23:38:06 Europe/London] PluginManager: Loading plugins from directory: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins
[26-Mar-2025 23:38:06 Europe/London] PluginManager: Found plugin directories: Array
(
    [0] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler
    [1] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector
    [2] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler
    [3] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut
    [4] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin
)

[26-Mar-2025 23:38:06 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[26-Mar-2025 23:38:06 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[26-Mar-2025 23:38:06 Europe/London] PluginManager: Creating instance of plugin class: DirectMessageHandler
[26-Mar-2025 23:38:06 Europe/London] PluginManager: Plugin not found in database, creating record for: DirectMessageHandler
[26-Mar-2025 23:38:06 Europe/London] PluginManager ERROR: Failed to load plugin DirectMessageHandler: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 23:38:06 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 23:38:06 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[26-Mar-2025 23:38:06 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[26-Mar-2025 23:38:06 Europe/London] PluginManager: Creating instance of plugin class: LLMModelSelector
[26-Mar-2025 23:38:06 Europe/London] PluginManager: Plugin not found in database, creating record for: LLMModelSelector
[26-Mar-2025 23:38:06 Europe/London] PluginManager ERROR: Failed to load plugin LLMModelSelector: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 23:38:06 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 23:38:06 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[26-Mar-2025 23:38:06 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[26-Mar-2025 23:38:06 Europe/London] PluginManager: Creating instance of plugin class: N8nWebhookHandler
[26-Mar-2025 23:38:06 Europe/London] PluginManager: Instantiating plugin with ID: 12
[26-Mar-2025 23:38:06 Europe/London] N8nWebhookHandler: Constructing with plugin ID: 12
[26-Mar-2025 23:38:06 Europe/London] N8nWebhookHandler: Constructing plugin
[26-Mar-2025 23:38:06 Europe/London] N8nWebhookHandler: Construction completed
[26-Mar-2025 23:38:06 Europe/London] PluginManager: Activating plugin: N8nWebhookHandler
[26-Mar-2025 23:38:06 Europe/London] N8nWebhookHandler: Activating plugin with ID: 12
[26-Mar-2025 23:38:06 Europe/London] Plugin N8nWebhookHandler: Activated with ID 12
[26-Mar-2025 23:38:06 Europe/London] N8nWebhookHandler: Creating/checking database tables
[26-Mar-2025 23:38:06 Europe/London] N8nWebhookHandler: Checking for existing settings
[26-Mar-2025 23:38:06 Europe/London] N8nWebhookHandler: Activation completed successfully
[26-Mar-2025 23:38:06 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 23:38:06 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 23:38:06 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 23:38:06 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:38:06 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 23:38:06 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:38:06 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:38:06 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 23:38:06 Europe/London] PluginManager: Initializing plugin: N8nWebhookHandler
[26-Mar-2025 23:38:06 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 23:38:06 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 23:38:06 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 23:38:06 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:38:06 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 23:38:06 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:38:06 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:38:06 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 23:38:06 Europe/London] PluginManager: Plugin activated and initialized: N8nWebhookHandler
[26-Mar-2025 23:38:06 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[26-Mar-2025 23:38:06 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[26-Mar-2025 23:38:06 Europe/London] PluginManager: Creating instance of plugin class: SameInSameOut
[26-Mar-2025 23:38:06 Europe/London] PluginManager: Instantiating plugin with ID: 13
[26-Mar-2025 23:38:06 Europe/London] SameInSameOut: Constructing plugin
[26-Mar-2025 23:38:06 Europe/London] PluginManager: Activating plugin: SameInSameOut
[26-Mar-2025 23:38:06 Europe/London] Plugin SameInSameOut: Activated with ID 13
[26-Mar-2025 23:38:06 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[26-Mar-2025 23:38:06 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:38:06 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[26-Mar-2025 23:38:06 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:38:06 Europe/London] PluginManager: Initializing plugin: SameInSameOut
[26-Mar-2025 23:38:06 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[26-Mar-2025 23:38:06 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:38:06 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[26-Mar-2025 23:38:06 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:38:06 Europe/London] PluginManager: Plugin activated and initialized: SameInSameOut
[26-Mar-2025 23:38:06 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[26-Mar-2025 23:38:06 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[26-Mar-2025 23:38:06 Europe/London] PluginManager: Creating instance of plugin class: TestPlugin
[26-Mar-2025 23:38:06 Europe/London] PluginManager: Plugin not found in database, creating record for: TestPlugin
[26-Mar-2025 23:38:06 Europe/London] PluginManager ERROR: Failed to load plugin TestPlugin: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 23:38:06 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 23:38:06 Europe/London] PluginManager: Loaded plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[26-Mar-2025 23:38:06 Europe/London] PluginManager: Active plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[26-Mar-2025 23:38:06 Europe/London] === Starting message creation process ===
[26-Mar-2025 23:38:06 Europe/London] User authenticated successfully - User ID: 8
[26-Mar-2025 23:38:06 Europe/London] Received message data: {"conversation_id":"141","content":"hi"}
[26-Mar-2025 23:38:06 Europe/London] Message data validation passed
[26-Mar-2025 23:38:06 Europe/London] Checking question limit for user 8: current usage = 0, limit = 500
[26-Mar-2025 23:38:06 Europe/London] Question limit check passed
[26-Mar-2025 23:38:06 Europe/London] Fetching conversation and plugin info for conversation ID: 141
[26-Mar-2025 23:38:06 Europe/London] Found conversation - Plugin ID: 12, Plugin Name: N8nWebhookHandler, Plugin Active: yes
[26-Mar-2025 23:38:06 Europe/London] Created message data structure
[26-Mar-2025 23:38:06 Europe/London] Attempting to get plugin instance for: N8nWebhookHandler
[26-Mar-2025 23:38:06 Europe/London] Successfully got plugin instance of class: N8nWebhookHandler
[26-Mar-2025 23:38:06 Europe/London] Plugin hooks: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:38:06 Europe/London] Executing before_send_message hook for plugin: N8nWebhookHandler
[26-Mar-2025 23:38:06 Europe/London] Plugin N8nWebhookHandler: Executing hook before_send_message
[26-Mar-2025 23:38:06 Europe/London] Plugin N8nWebhookHandler: Available hooks: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:38:06 Europe/London] Plugin N8nWebhookHandler: No handlers registered for hook before_send_message
[26-Mar-2025 23:38:06 Europe/London] before_send_message hook executed successfully
[26-Mar-2025 23:38:06 Europe/London] Saving message to database
[26-Mar-2025 23:38:06 Europe/London] Message saved successfully with ID: 148
[26-Mar-2025 23:38:06 Europe/London] Executing after_send_message hook for plugin: N8nWebhookHandler
[26-Mar-2025 23:38:06 Europe/London] Plugin N8nWebhookHandler: Executing hook after_send_message
[26-Mar-2025 23:38:06 Europe/London] Plugin N8nWebhookHandler: Available hooks: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:38:06 Europe/London] Plugin N8nWebhookHandler: Calling hook handler for after_send_message
[26-Mar-2025 23:38:06 Europe/London] N8nWebhookHandler: Starting message processing
[26-Mar-2025 23:38:06 Europe/London] N8nWebhookHandler: Message data: {"conversation_id":"141","content":"hi","role":"user"}
[26-Mar-2025 23:38:06 Europe/London] N8nWebhookHandler: Using webhook URL: https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
[26-Mar-2025 23:38:06 Europe/London] N8nWebhookHandler: Sending request data: {"message":"hi","conversation_id":"141","timestamp":"2025-03-26 23:38:06"}
[26-Mar-2025 23:38:06 Europe/London] N8nWebhookHandler: SSL certificate verification is disabled for testing
[26-Mar-2025 23:38:08 Europe/London] N8nWebhookHandler: Verbose curl output:
*   Trying 104.21.48.1:443...
* Connected to n8n.mazcode.com (104.21.48.1) port 443
* ALPN: curl offers h2,http/1.1
* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384
* ALPN: server accepted h2
* Server certificate:
*  subject: CN=mazcode.com
*  start date: Mar 21 01:54:39 2025 GMT
*  expire date: Jun 19 02:51:08 2025 GMT
*  issuer: C=US; O=Google Trust Services; CN=WE1
*  SSL certificate verify result: unable to get local issuer certificate (20), continuing anyway.
* using HTTP/2
* [HTTP/2] [1] OPENED stream for https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
* [HTTP/2] [1] [:method: POST]
* [HTTP/2] [1] [:scheme: https]
* [HTTP/2] [1] [:authority: n8n.mazcode.com]
* [HTTP/2] [1] [:path: /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f]
* [HTTP/2] [1] [content-type: application/json]
* [HTTP/2] [1] [accept: application/json]
* [HTTP/2] [1] [content-length: 74]
> POST /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f HTTP/2
Host: n8n.mazcode.com
Content-Type: application/json
Accept: application/json
Content-Length: 74

* old SSL session ID is stale, removing
< HTTP/2 200 
< date: Wed, 26 Mar 2025 23:38:07 GMT
< content-type: text/html; charset=utf-8
< vary: Accept-Encoding
< vary: Accept-Encoding
< cf-cache-status: DYNAMIC
< report-to: {"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=GIU%2FV6vzUNzMcmKXHwqKFd6c9sjB%2FH8jmUz0zwh50Oj0POFIbpCTC4O78GE6wHX8CJLOO%2BDtD2QOp3ZUtNyLXs84s0MrwhcU3UuVvbxdlwdBt%2Fre8keEp8ZN8zDujjrWqMs%3D"}],"group":"cf-nel","max_age":604800}
< nel: {"success_fraction":0,"report_to":"cf-nel","max_age":604800}
< server: cloudflare
< cf-ray: 926a7acd7cdfed49-MXP
< alt-svc: h3=":443"; ma=86400
< server-timing: cfL4;desc="?proto=TCP&rtt=95918&min_rtt=87565&rtt_var=35100&sent=7&recv=9&lost=0&retrans=0&sent_bytes=3411&recv_bytes=908&delivery_rate=32043&cwnd=253&unsent_bytes=0&cid=db3deac50035ee0c&ts=1070&x=0"
< 
* Connection #0 to host n8n.mazcode.com left intact

[26-Mar-2025 23:38:08 Europe/London] N8nWebhookHandler: Webhook response code: 200
[26-Mar-2025 23:38:08 Europe/London] N8nWebhookHandler: Webhook response: مرحباً! 😊  
كيف يمكنني مساعدتك اليوم؟  
هل تبحث عن شريك حياتك المثالي؟ إذا كان الأمر كذلك، يرجى إخباري بالمواصفات التي تبحث عنها وسأساعدك بأفضل ما لدي! 💕
[26-Mar-2025 23:38:08 Europe/London] N8nWebhookHandler: Message successfully processed by webhook
[26-Mar-2025 23:38:08 Europe/London] Plugin N8nWebhookHandler: Hook handler executed successfully with result: مرحباً! 😊  
كيف يمكنني مساعدتك اليوم؟  
هل تبحث عن شريك حياتك المثالي؟ إذا كان الأمر كذلك، يرجى إخباري بالمواصفات التي تبحث عنها وسأساعدك بأفضل ما لدي! 💕
[26-Mar-2025 23:38:08 Europe/London] after_send_message hook executed successfully
[26-Mar-2025 23:38:08 Europe/London] Saving plugin response to database: مرحباً! 😊  
كيف يمكنني مساعدتك اليوم؟  
هل تبحث عن شريك حياتك المثالي؟ إذا كان الأمر كذلك، يرجى إخباري بالمواصفات التي تبحث عنها وسأساعدك بأفضل ما لدي! 💕
[26-Mar-2025 23:38:08 Europe/London] Plugin response saved with ID: 149
[26-Mar-2025 23:38:08 Europe/London] === Message creation process completed successfully ===
[26-Mar-2025 23:38:08 Europe/London] Sending response to client: {"success":true,"data":{"message":{"id":"148","conversation_id":"141","content":"hi","role":"user"},"assistant_message":{"id":"149","conversation_id":"141","content":"\u0645\u0631\u062d\u0628\u0627\u064b! \ud83d\ude0a  \n\u0643\u064a\u0641 \u064a\u0645\u0643\u0646\u0646\u064a \u0645\u0633\u0627\u0639\u062f\u062a\u0643 \u0627\u0644\u064a\u0648\u0645\u061f  \n\u0647\u0644 \u062a\u0628\u062d\u062b \u0639\u0646 \u0634\u0631\u064a\u0643 \u062d\u064a\u0627\u062a\u0643 \u0627\u0644\u0645\u062b\u0627\u0644\u064a\u061f \u0625\u0630\u0627 \u0643\u0627\u0646 \u0627\u0644\u0623\u0645\u0631 \u0643\u0630\u0644\u0643\u060c \u064a\u0631\u062c\u0649 \u0625\u062e\u0628\u0627\u0631\u064a \u0628\u0627\u0644\u0645\u0648\u0627\u0635\u0641\u0627\u062a \u0627\u0644\u062a\u064a \u062a\u0628\u062d\u062b \u0639\u0646\u0647\u0627 \u0648\u0633\u0623\u0633\u0627\u0639\u062f\u0643 \u0628\u0623\u0641\u0636\u0644 \u0645\u0627 \u0644\u062f\u064a! \ud83d\udc95","role":"assistant"}}}
[26-Mar-2025 23:38:11 Europe/London] PluginManager: Loading plugins from directory: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins
[26-Mar-2025 23:38:11 Europe/London] PluginManager: Found plugin directories: Array
(
    [0] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler
    [1] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector
    [2] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler
    [3] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut
    [4] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin
)

[26-Mar-2025 23:38:11 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[26-Mar-2025 23:38:11 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[26-Mar-2025 23:38:11 Europe/London] PluginManager: Creating instance of plugin class: DirectMessageHandler
[26-Mar-2025 23:38:11 Europe/London] PluginManager: Plugin not found in database, creating record for: DirectMessageHandler
[26-Mar-2025 23:38:11 Europe/London] PluginManager ERROR: Failed to load plugin DirectMessageHandler: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 23:38:11 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 23:38:11 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[26-Mar-2025 23:38:11 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[26-Mar-2025 23:38:11 Europe/London] PluginManager: Creating instance of plugin class: LLMModelSelector
[26-Mar-2025 23:38:11 Europe/London] PluginManager: Plugin not found in database, creating record for: LLMModelSelector
[26-Mar-2025 23:38:11 Europe/London] PluginManager ERROR: Failed to load plugin LLMModelSelector: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 23:38:11 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 23:38:11 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[26-Mar-2025 23:38:11 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[26-Mar-2025 23:38:11 Europe/London] PluginManager: Creating instance of plugin class: N8nWebhookHandler
[26-Mar-2025 23:38:11 Europe/London] PluginManager: Instantiating plugin with ID: 12
[26-Mar-2025 23:38:11 Europe/London] N8nWebhookHandler: Constructing with plugin ID: 12
[26-Mar-2025 23:38:11 Europe/London] N8nWebhookHandler: Constructing plugin
[26-Mar-2025 23:38:11 Europe/London] N8nWebhookHandler: Construction completed
[26-Mar-2025 23:38:11 Europe/London] PluginManager: Activating plugin: N8nWebhookHandler
[26-Mar-2025 23:38:11 Europe/London] N8nWebhookHandler: Activating plugin with ID: 12
[26-Mar-2025 23:38:11 Europe/London] Plugin N8nWebhookHandler: Activated with ID 12
[26-Mar-2025 23:38:11 Europe/London] N8nWebhookHandler: Creating/checking database tables
[26-Mar-2025 23:38:11 Europe/London] N8nWebhookHandler: Checking for existing settings
[26-Mar-2025 23:38:11 Europe/London] N8nWebhookHandler: Activation completed successfully
[26-Mar-2025 23:38:11 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 23:38:11 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 23:38:11 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 23:38:11 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:38:11 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 23:38:11 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:38:11 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:38:11 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 23:38:11 Europe/London] PluginManager: Initializing plugin: N8nWebhookHandler
[26-Mar-2025 23:38:11 Europe/London] N8nWebhookHandler: Initializing plugin
[26-Mar-2025 23:38:11 Europe/London] N8nWebhookHandler: Registering hooks
[26-Mar-2025 23:38:11 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[26-Mar-2025 23:38:11 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:38:11 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[26-Mar-2025 23:38:11 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:38:11 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:38:11 Europe/London] N8nWebhookHandler: Initialization completed
[26-Mar-2025 23:38:11 Europe/London] PluginManager: Plugin activated and initialized: N8nWebhookHandler
[26-Mar-2025 23:38:11 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[26-Mar-2025 23:38:11 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[26-Mar-2025 23:38:11 Europe/London] PluginManager: Creating instance of plugin class: SameInSameOut
[26-Mar-2025 23:38:11 Europe/London] PluginManager: Instantiating plugin with ID: 13
[26-Mar-2025 23:38:11 Europe/London] SameInSameOut: Constructing plugin
[26-Mar-2025 23:38:11 Europe/London] PluginManager: Activating plugin: SameInSameOut
[26-Mar-2025 23:38:11 Europe/London] Plugin SameInSameOut: Activated with ID 13
[26-Mar-2025 23:38:11 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[26-Mar-2025 23:38:11 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:38:11 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[26-Mar-2025 23:38:11 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:38:11 Europe/London] PluginManager: Initializing plugin: SameInSameOut
[26-Mar-2025 23:38:11 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[26-Mar-2025 23:38:11 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:38:11 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[26-Mar-2025 23:38:11 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:38:11 Europe/London] PluginManager: Plugin activated and initialized: SameInSameOut
[26-Mar-2025 23:38:11 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[26-Mar-2025 23:38:11 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[26-Mar-2025 23:38:11 Europe/London] PluginManager: Creating instance of plugin class: TestPlugin
[26-Mar-2025 23:38:11 Europe/London] PluginManager: Plugin not found in database, creating record for: TestPlugin
[26-Mar-2025 23:38:11 Europe/London] PluginManager ERROR: Failed to load plugin TestPlugin: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[26-Mar-2025 23:38:11 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[26-Mar-2025 23:38:11 Europe/London] PluginManager: Loaded plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[26-Mar-2025 23:38:11 Europe/London] PluginManager: Active plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[26-Mar-2025 23:38:11 Europe/London] === Starting message creation process ===
[26-Mar-2025 23:38:11 Europe/London] User authenticated successfully - User ID: 8
[26-Mar-2025 23:38:11 Europe/London] Received message data: {"conversation_id":"141","content":"hi"}
[26-Mar-2025 23:38:11 Europe/London] Message data validation passed
[26-Mar-2025 23:38:11 Europe/London] Checking question limit for user 8: current usage = 0, limit = 500
[26-Mar-2025 23:38:11 Europe/London] Question limit check passed
[26-Mar-2025 23:38:11 Europe/London] Fetching conversation and plugin info for conversation ID: 141
[26-Mar-2025 23:38:11 Europe/London] Found conversation - Plugin ID: 13, Plugin Name: SameInSameOut, Plugin Active: yes
[26-Mar-2025 23:38:11 Europe/London] Created message data structure
[26-Mar-2025 23:38:11 Europe/London] Attempting to get plugin instance for: SameInSameOut
[26-Mar-2025 23:38:11 Europe/London] Successfully got plugin instance of class: SameInSameOut
[26-Mar-2025 23:38:11 Europe/London] Plugin hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:38:11 Europe/London] Executing before_send_message hook for plugin: SameInSameOut
[26-Mar-2025 23:38:11 Europe/London] Plugin SameInSameOut: Executing hook before_send_message
[26-Mar-2025 23:38:11 Europe/London] Plugin SameInSameOut: Available hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:38:11 Europe/London] Plugin SameInSameOut: Calling hook handler for before_send_message
[26-Mar-2025 23:38:11 Europe/London] Plugin SameInSameOut: Hook handler executed successfully with result: hi
[26-Mar-2025 23:38:11 Europe/London] before_send_message hook executed successfully
[26-Mar-2025 23:38:11 Europe/London] Got response from before_send_message: hi
[26-Mar-2025 23:38:11 Europe/London] Saving message to database
[26-Mar-2025 23:38:11 Europe/London] Message saved successfully with ID: 150
[26-Mar-2025 23:38:11 Europe/London] Executing after_send_message hook for plugin: SameInSameOut
[26-Mar-2025 23:38:11 Europe/London] Plugin SameInSameOut: Executing hook after_send_message
[26-Mar-2025 23:38:11 Europe/London] Plugin SameInSameOut: Available hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[26-Mar-2025 23:38:11 Europe/London] Plugin SameInSameOut: Calling hook handler for after_send_message
[26-Mar-2025 23:38:11 Europe/London] Plugin SameInSameOut: Hook handler executed successfully with result: hi
[26-Mar-2025 23:38:11 Europe/London] after_send_message hook executed successfully
[26-Mar-2025 23:38:11 Europe/London] Saving plugin response to database: hi
[26-Mar-2025 23:38:11 Europe/London] Plugin response saved with ID: 151
[26-Mar-2025 23:38:11 Europe/London] === Message creation process completed successfully ===
[26-Mar-2025 23:38:11 Europe/London] Sending response to client: {"success":true,"data":{"message":{"id":"150","conversation_id":"141","content":"hi","role":"user"},"assistant_message":{"id":"151","conversation_id":"141","content":"hi","role":"assistant"}}}
[26-Mar-2025 23:38:18 Europe/London] DirectMessageHandler: Constructing plugin
[26-Mar-2025 23:38:18 Europe/London] LLMModelSelector: Constructing plugin
[27-Mar-2025 06:25:11 Europe/London] DirectMessageHandler: Constructing plugin
[27-Mar-2025 06:25:11 Europe/London] LLMModelSelector: Constructing plugin
[27-Mar-2025 06:25:13 Europe/London] DirectMessageHandler: Constructing plugin
[27-Mar-2025 06:25:13 Europe/London] LLMModelSelector: Constructing plugin
[27-Mar-2025 06:25:14 Europe/London] N8nWebhookHandler: Constructing with plugin ID: 12
[27-Mar-2025 06:25:14 Europe/London] N8nWebhookHandler: Constructing plugin
[27-Mar-2025 06:25:14 Europe/London] N8nWebhookHandler: Construction completed
[27-Mar-2025 06:25:14 Europe/London] Plugin loaded successfully: N8nWebhookHandler
[27-Mar-2025 06:25:14 Europe/London] N8nWebhookHandler: Activating plugin with ID: 12
[27-Mar-2025 06:25:14 Europe/London] Plugin N8nWebhookHandler: Activated with ID 12
[27-Mar-2025 06:25:14 Europe/London] N8nWebhookHandler: Creating/checking database tables
[27-Mar-2025 06:25:14 Europe/London] N8nWebhookHandler: Checking for existing settings
[27-Mar-2025 06:25:14 Europe/London] N8nWebhookHandler: Activation completed successfully
[27-Mar-2025 06:25:14 Europe/London] N8nWebhookHandler: Initializing plugin
[27-Mar-2025 06:25:14 Europe/London] N8nWebhookHandler: Registering hooks
[27-Mar-2025 06:25:14 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[27-Mar-2025 06:25:14 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[27-Mar-2025 06:25:14 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[27-Mar-2025 06:25:14 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[27-Mar-2025 06:25:14 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[27-Mar-2025 06:25:14 Europe/London] N8nWebhookHandler: Initialization completed
[27-Mar-2025 06:25:14 Europe/London] Plugin Class: N8nWebhookHandler
[27-Mar-2025 06:25:14 Europe/London] Plugin Instance: N8nWebhookHandler
[27-Mar-2025 06:25:14 Europe/London] Settings: Array
(
    [id] => 4
    [plugin_id] => 12
    [webhook_url] => https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
    [is_active] => 1
    [timeout] => 120
    [created_at] => 2025-03-26 21:10:05
    [updated_at] => 2025-03-26 21:10:19
)

[27-Mar-2025 06:25:30 Europe/London] DirectMessageHandler: Constructing plugin
[27-Mar-2025 06:25:30 Europe/London] LLMModelSelector: Constructing plugin
[27-Mar-2025 06:25:43 Europe/London] DirectMessageHandler: Constructing plugin
[27-Mar-2025 06:25:43 Europe/London] LLMModelSelector: Constructing plugin
[27-Mar-2025 06:25:45 Europe/London] DirectMessageHandler: Constructing plugin
[27-Mar-2025 06:25:45 Europe/London] LLMModelSelector: Constructing plugin
[27-Mar-2025 08:20:45 Europe/London] Checking conversation limit for user 8: current usage = 15, limit = 50
[27-Mar-2025 08:20:45 Europe/London] PluginManager: Loading plugins from directory: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins
[27-Mar-2025 08:20:45 Europe/London] PluginManager: Found plugin directories: Array
(
    [0] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler
    [1] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector
    [2] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler
    [3] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut
    [4] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin
)

[27-Mar-2025 08:20:45 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[27-Mar-2025 08:20:45 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[27-Mar-2025 08:20:45 Europe/London] PluginManager: Creating instance of plugin class: DirectMessageHandler
[27-Mar-2025 08:20:45 Europe/London] PluginManager: Plugin not found in database, creating record for: DirectMessageHandler
[27-Mar-2025 08:20:45 Europe/London] PluginManager ERROR: Failed to load plugin DirectMessageHandler: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[27-Mar-2025 08:20:45 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[27-Mar-2025 08:20:45 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[27-Mar-2025 08:20:45 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[27-Mar-2025 08:20:45 Europe/London] PluginManager: Creating instance of plugin class: LLMModelSelector
[27-Mar-2025 08:20:45 Europe/London] PluginManager: Plugin not found in database, creating record for: LLMModelSelector
[27-Mar-2025 08:20:45 Europe/London] PluginManager ERROR: Failed to load plugin LLMModelSelector: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[27-Mar-2025 08:20:45 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[27-Mar-2025 08:20:45 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[27-Mar-2025 08:20:45 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[27-Mar-2025 08:20:45 Europe/London] PluginManager: Creating instance of plugin class: N8nWebhookHandler
[27-Mar-2025 08:20:45 Europe/London] PluginManager: Instantiating plugin with ID: 12
[27-Mar-2025 08:20:45 Europe/London] N8nWebhookHandler: Constructing with plugin ID: 12
[27-Mar-2025 08:20:45 Europe/London] N8nWebhookHandler: Constructing plugin
[27-Mar-2025 08:20:45 Europe/London] N8nWebhookHandler: Construction completed
[27-Mar-2025 08:20:45 Europe/London] PluginManager: Activating plugin: N8nWebhookHandler
[27-Mar-2025 08:20:45 Europe/London] N8nWebhookHandler: Activating plugin with ID: 12
[27-Mar-2025 08:20:45 Europe/London] Plugin N8nWebhookHandler: Activated with ID 12
[27-Mar-2025 08:20:45 Europe/London] N8nWebhookHandler: Creating/checking database tables
[27-Mar-2025 08:20:45 Europe/London] N8nWebhookHandler: Checking for existing settings
[27-Mar-2025 08:20:45 Europe/London] N8nWebhookHandler: Activation completed successfully
[27-Mar-2025 08:20:45 Europe/London] N8nWebhookHandler: Initializing plugin
[27-Mar-2025 08:20:45 Europe/London] N8nWebhookHandler: Registering hooks
[27-Mar-2025 08:20:45 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[27-Mar-2025 08:20:45 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[27-Mar-2025 08:20:45 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[27-Mar-2025 08:20:45 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[27-Mar-2025 08:20:45 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[27-Mar-2025 08:20:45 Europe/London] N8nWebhookHandler: Initialization completed
[27-Mar-2025 08:20:45 Europe/London] PluginManager: Initializing plugin: N8nWebhookHandler
[27-Mar-2025 08:20:45 Europe/London] N8nWebhookHandler: Initializing plugin
[27-Mar-2025 08:20:45 Europe/London] N8nWebhookHandler: Registering hooks
[27-Mar-2025 08:20:45 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[27-Mar-2025 08:20:45 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[27-Mar-2025 08:20:45 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[27-Mar-2025 08:20:45 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[27-Mar-2025 08:20:45 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[27-Mar-2025 08:20:45 Europe/London] N8nWebhookHandler: Initialization completed
[27-Mar-2025 08:20:45 Europe/London] PluginManager: Plugin activated and initialized: N8nWebhookHandler
[27-Mar-2025 08:20:45 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[27-Mar-2025 08:20:45 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[27-Mar-2025 08:20:45 Europe/London] PluginManager: Creating instance of plugin class: SameInSameOut
[27-Mar-2025 08:20:45 Europe/London] PluginManager: Instantiating plugin with ID: 13
[27-Mar-2025 08:20:45 Europe/London] SameInSameOut: Constructing plugin
[27-Mar-2025 08:20:45 Europe/London] PluginManager: Activating plugin: SameInSameOut
[27-Mar-2025 08:20:45 Europe/London] Plugin SameInSameOut: Activated with ID 13
[27-Mar-2025 08:20:45 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[27-Mar-2025 08:20:45 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[27-Mar-2025 08:20:45 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[27-Mar-2025 08:20:45 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[27-Mar-2025 08:20:45 Europe/London] PluginManager: Initializing plugin: SameInSameOut
[27-Mar-2025 08:20:45 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[27-Mar-2025 08:20:45 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[27-Mar-2025 08:20:45 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[27-Mar-2025 08:20:45 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[27-Mar-2025 08:20:45 Europe/London] PluginManager: Plugin activated and initialized: SameInSameOut
[27-Mar-2025 08:20:45 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[27-Mar-2025 08:20:45 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[27-Mar-2025 08:20:45 Europe/London] PluginManager: Creating instance of plugin class: TestPlugin
[27-Mar-2025 08:20:45 Europe/London] PluginManager: Plugin not found in database, creating record for: TestPlugin
[27-Mar-2025 08:20:45 Europe/London] PluginManager ERROR: Failed to load plugin TestPlugin: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[27-Mar-2025 08:20:45 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[27-Mar-2025 08:20:45 Europe/London] PluginManager: Loaded plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[27-Mar-2025 08:20:45 Europe/London] PluginManager: Active plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[27-Mar-2025 08:20:45 Europe/London] === Starting message creation process ===
[27-Mar-2025 08:20:45 Europe/London] User authenticated successfully - User ID: 8
[27-Mar-2025 08:20:45 Europe/London] Received message data: {"conversation_id":"148","content":"hi"}
[27-Mar-2025 08:20:45 Europe/London] Message data validation passed
[27-Mar-2025 08:20:45 Europe/London] Checking question limit for user 8: current usage = 0, limit = 500
[27-Mar-2025 08:20:45 Europe/London] Question limit check passed
[27-Mar-2025 08:20:45 Europe/London] Fetching conversation and plugin info for conversation ID: 148
[27-Mar-2025 08:20:45 Europe/London] Found conversation - Plugin ID: 12, Plugin Name: N8nWebhookHandler, Plugin Active: yes
[27-Mar-2025 08:20:45 Europe/London] Created message data structure
[27-Mar-2025 08:20:45 Europe/London] Attempting to get plugin instance for: N8nWebhookHandler
[27-Mar-2025 08:20:45 Europe/London] Successfully got plugin instance of class: N8nWebhookHandler
[27-Mar-2025 08:20:45 Europe/London] Plugin hooks: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[27-Mar-2025 08:20:45 Europe/London] Executing before_send_message hook for plugin: N8nWebhookHandler
[27-Mar-2025 08:20:45 Europe/London] Plugin N8nWebhookHandler: Executing hook before_send_message
[27-Mar-2025 08:20:45 Europe/London] Plugin N8nWebhookHandler: Available hooks: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[27-Mar-2025 08:20:45 Europe/London] Plugin N8nWebhookHandler: No handlers registered for hook before_send_message
[27-Mar-2025 08:20:45 Europe/London] before_send_message hook executed successfully
[27-Mar-2025 08:20:45 Europe/London] Saving message to database
[27-Mar-2025 08:20:45 Europe/London] Message saved successfully with ID: 156
[27-Mar-2025 08:20:45 Europe/London] Executing after_send_message hook for plugin: N8nWebhookHandler
[27-Mar-2025 08:20:45 Europe/London] Plugin N8nWebhookHandler: Executing hook after_send_message
[27-Mar-2025 08:20:45 Europe/London] Plugin N8nWebhookHandler: Available hooks: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[27-Mar-2025 08:20:45 Europe/London] Plugin N8nWebhookHandler: Calling hook handler for after_send_message
[27-Mar-2025 08:20:45 Europe/London] N8nWebhookHandler: Starting message processing
[27-Mar-2025 08:20:45 Europe/London] N8nWebhookHandler: Message data: {"conversation_id":"148","content":"hi","role":"user"}
[27-Mar-2025 08:20:45 Europe/London] N8nWebhookHandler: Using webhook URL: https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
[27-Mar-2025 08:20:45 Europe/London] N8nWebhookHandler: Sending request data: {"message":"hi","conversation_id":"148","timestamp":"2025-03-27 08:20:45"}
[27-Mar-2025 08:20:45 Europe/London] N8nWebhookHandler: SSL certificate verification is disabled for testing
[27-Mar-2025 08:20:46 Europe/London] N8nWebhookHandler: Verbose curl output:
*   Trying 104.21.96.1:443...
* Connected to n8n.mazcode.com (104.21.96.1) port 443
* ALPN: curl offers h2,http/1.1
* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384
* ALPN: server accepted h2
* Server certificate:
*  subject: CN=mazcode.com
*  start date: Mar 21 01:54:39 2025 GMT
*  expire date: Jun 19 02:51:08 2025 GMT
*  issuer: C=US; O=Google Trust Services; CN=WE1
*  SSL certificate verify result: unable to get local issuer certificate (20), continuing anyway.
* using HTTP/2
* [HTTP/2] [1] OPENED stream for https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
* [HTTP/2] [1] [:method: POST]
* [HTTP/2] [1] [:scheme: https]
* [HTTP/2] [1] [:authority: n8n.mazcode.com]
* [HTTP/2] [1] [:path: /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f]
* [HTTP/2] [1] [content-type: application/json]
* [HTTP/2] [1] [accept: application/json]
* [HTTP/2] [1] [content-length: 74]
> POST /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f HTTP/2
Host: n8n.mazcode.com
Content-Type: application/json
Accept: application/json
Content-Length: 74

* old SSL session ID is stale, removing
< HTTP/2 200 
< date: Thu, 27 Mar 2025 08:20:46 GMT
< content-type: text/html; charset=utf-8
< vary: Accept-Encoding
< vary: Accept-Encoding
< cf-cache-status: DYNAMIC
< report-to: {"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=%2Fzk58dWSubinRQSmqkdxfEhuwJX3TJxkocBZ%2Fz8YdkEW%2FV%2B%2BOTg3DCFIIA%2BMN4sz4mX3a%2BvSyiWVm3Bw2WhBzzWNfp5m9%2FG6YFuKmfCPPyTfE%2B1Tvte8kLLg61B2Rt%2FKRfk%3D"}],"group":"cf-nel","max_age":604800}
< nel: {"success_fraction":0,"report_to":"cf-nel","max_age":604800}
< server: cloudflare
< cf-ray: 926d7866083f0df1-MXP
< alt-svc: h3=":443"; ma=86400
< server-timing: cfL4;desc="?proto=TCP&rtt=92046&min_rtt=91745&rtt_var=34619&sent=7&recv=9&lost=0&retrans=1&sent_bytes=4801&recv_bytes=908&delivery_rate=30955&cwnd=253&unsent_bytes=0&cid=8843fadf176ae0fe&ts=1273&x=0"
< 
* Connection #0 to host n8n.mazcode.com left intact

[27-Mar-2025 08:20:46 Europe/London] N8nWebhookHandler: Webhook response code: 200
[27-Mar-2025 08:20:46 Europe/London] N8nWebhookHandler: Webhook response: مرحباً! 😊  
كيف يمكنني مساعدتك في البحث عن شريك الحياة المثالي؟ 🌟
[27-Mar-2025 08:20:46 Europe/London] N8nWebhookHandler: Message successfully processed by webhook
[27-Mar-2025 08:20:46 Europe/London] Plugin N8nWebhookHandler: Hook handler executed successfully with result: مرحباً! 😊  
كيف يمكنني مساعدتك في البحث عن شريك الحياة المثالي؟ 🌟
[27-Mar-2025 08:20:46 Europe/London] after_send_message hook executed successfully
[27-Mar-2025 08:20:46 Europe/London] Saving plugin response to database: مرحباً! 😊  
كيف يمكنني مساعدتك في البحث عن شريك الحياة المثالي؟ 🌟
[27-Mar-2025 08:20:47 Europe/London] Plugin response saved with ID: 157
[27-Mar-2025 08:20:47 Europe/London] === Message creation process completed successfully ===
[27-Mar-2025 08:20:47 Europe/London] Sending response to client: {"success":true,"data":{"message":{"id":"156","conversation_id":"148","content":"hi","role":"user"},"assistant_message":{"id":"157","conversation_id":"148","content":"\u0645\u0631\u062d\u0628\u0627\u064b! \ud83d\ude0a  \n\u0643\u064a\u0641 \u064a\u0645\u0643\u0646\u0646\u064a \u0645\u0633\u0627\u0639\u062f\u062a\u0643 \u0641\u064a \u0627\u0644\u0628\u062d\u062b \u0639\u0646 \u0634\u0631\u064a\u0643 \u0627\u0644\u062d\u064a\u0627\u0629 \u0627\u0644\u0645\u062b\u0627\u0644\u064a\u061f \ud83c\udf1f","role":"assistant"}}}
[27-Mar-2025 08:25:03 Europe/London] Checking conversation limit for user 8: current usage = 16, limit = 50
[27-Mar-2025 08:25:03 Europe/London] PluginManager: Loading plugins from directory: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins
[27-Mar-2025 08:25:03 Europe/London] PluginManager: Found plugin directories: Array
(
    [0] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler
    [1] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector
    [2] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler
    [3] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut
    [4] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin
)

[27-Mar-2025 08:25:03 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[27-Mar-2025 08:25:03 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[27-Mar-2025 08:25:03 Europe/London] PluginManager: Creating instance of plugin class: DirectMessageHandler
[27-Mar-2025 08:25:03 Europe/London] PluginManager: Plugin not found in database, creating record for: DirectMessageHandler
[27-Mar-2025 08:25:03 Europe/London] PluginManager ERROR: Failed to load plugin DirectMessageHandler: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[27-Mar-2025 08:25:03 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[27-Mar-2025 08:25:03 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[27-Mar-2025 08:25:03 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[27-Mar-2025 08:25:03 Europe/London] PluginManager: Creating instance of plugin class: LLMModelSelector
[27-Mar-2025 08:25:03 Europe/London] PluginManager: Plugin not found in database, creating record for: LLMModelSelector
[27-Mar-2025 08:25:03 Europe/London] PluginManager ERROR: Failed to load plugin LLMModelSelector: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[27-Mar-2025 08:25:03 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[27-Mar-2025 08:25:03 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[27-Mar-2025 08:25:03 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[27-Mar-2025 08:25:03 Europe/London] PluginManager: Creating instance of plugin class: N8nWebhookHandler
[27-Mar-2025 08:25:03 Europe/London] PluginManager: Instantiating plugin with ID: 12
[27-Mar-2025 08:25:03 Europe/London] N8nWebhookHandler: Constructing with plugin ID: 12
[27-Mar-2025 08:25:03 Europe/London] N8nWebhookHandler: Constructing plugin
[27-Mar-2025 08:25:03 Europe/London] N8nWebhookHandler: Construction completed
[27-Mar-2025 08:25:03 Europe/London] PluginManager: Activating plugin: N8nWebhookHandler
[27-Mar-2025 08:25:03 Europe/London] N8nWebhookHandler: Activating plugin with ID: 12
[27-Mar-2025 08:25:03 Europe/London] Plugin N8nWebhookHandler: Activated with ID 12
[27-Mar-2025 08:25:03 Europe/London] N8nWebhookHandler: Creating/checking database tables
[27-Mar-2025 08:25:03 Europe/London] N8nWebhookHandler: Checking for existing settings
[27-Mar-2025 08:25:03 Europe/London] N8nWebhookHandler: Activation completed successfully
[27-Mar-2025 08:25:03 Europe/London] N8nWebhookHandler: Initializing plugin
[27-Mar-2025 08:25:03 Europe/London] N8nWebhookHandler: Registering hooks
[27-Mar-2025 08:25:03 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[27-Mar-2025 08:25:03 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[27-Mar-2025 08:25:03 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[27-Mar-2025 08:25:03 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[27-Mar-2025 08:25:03 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[27-Mar-2025 08:25:03 Europe/London] N8nWebhookHandler: Initialization completed
[27-Mar-2025 08:25:03 Europe/London] PluginManager: Initializing plugin: N8nWebhookHandler
[27-Mar-2025 08:25:03 Europe/London] N8nWebhookHandler: Initializing plugin
[27-Mar-2025 08:25:03 Europe/London] N8nWebhookHandler: Registering hooks
[27-Mar-2025 08:25:03 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[27-Mar-2025 08:25:03 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[27-Mar-2025 08:25:03 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[27-Mar-2025 08:25:03 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[27-Mar-2025 08:25:03 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[27-Mar-2025 08:25:03 Europe/London] N8nWebhookHandler: Initialization completed
[27-Mar-2025 08:25:03 Europe/London] PluginManager: Plugin activated and initialized: N8nWebhookHandler
[27-Mar-2025 08:25:03 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[27-Mar-2025 08:25:03 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[27-Mar-2025 08:25:03 Europe/London] PluginManager: Creating instance of plugin class: SameInSameOut
[27-Mar-2025 08:25:03 Europe/London] PluginManager: Instantiating plugin with ID: 13
[27-Mar-2025 08:25:03 Europe/London] SameInSameOut: Constructing plugin
[27-Mar-2025 08:25:03 Europe/London] PluginManager: Activating plugin: SameInSameOut
[27-Mar-2025 08:25:03 Europe/London] Plugin SameInSameOut: Activated with ID 13
[27-Mar-2025 08:25:03 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[27-Mar-2025 08:25:03 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[27-Mar-2025 08:25:03 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[27-Mar-2025 08:25:03 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[27-Mar-2025 08:25:03 Europe/London] PluginManager: Initializing plugin: SameInSameOut
[27-Mar-2025 08:25:03 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[27-Mar-2025 08:25:03 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[27-Mar-2025 08:25:03 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[27-Mar-2025 08:25:03 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[27-Mar-2025 08:25:03 Europe/London] PluginManager: Plugin activated and initialized: SameInSameOut
[27-Mar-2025 08:25:03 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[27-Mar-2025 08:25:03 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[27-Mar-2025 08:25:03 Europe/London] PluginManager: Creating instance of plugin class: TestPlugin
[27-Mar-2025 08:25:03 Europe/London] PluginManager: Plugin not found in database, creating record for: TestPlugin
[27-Mar-2025 08:25:03 Europe/London] PluginManager ERROR: Failed to load plugin TestPlugin: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[27-Mar-2025 08:25:03 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[27-Mar-2025 08:25:03 Europe/London] PluginManager: Loaded plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[27-Mar-2025 08:25:03 Europe/London] PluginManager: Active plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[27-Mar-2025 08:25:03 Europe/London] === Starting message creation process ===
[27-Mar-2025 08:25:03 Europe/London] User authenticated successfully - User ID: 8
[27-Mar-2025 08:25:03 Europe/London] Received message data: {"conversation_id":"149","content":"hi"}
[27-Mar-2025 08:25:03 Europe/London] Message data validation passed
[27-Mar-2025 08:25:03 Europe/London] Checking question limit for user 8: current usage = 0, limit = 500
[27-Mar-2025 08:25:03 Europe/London] Question limit check passed
[27-Mar-2025 08:25:03 Europe/London] Fetching conversation and plugin info for conversation ID: 149
[27-Mar-2025 08:25:03 Europe/London] Found conversation - Plugin ID: 12, Plugin Name: N8nWebhookHandler, Plugin Active: yes
[27-Mar-2025 08:25:03 Europe/London] Created message data structure
[27-Mar-2025 08:25:03 Europe/London] Attempting to get plugin instance for: N8nWebhookHandler
[27-Mar-2025 08:25:03 Europe/London] Successfully got plugin instance of class: N8nWebhookHandler
[27-Mar-2025 08:25:03 Europe/London] Plugin hooks: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[27-Mar-2025 08:25:03 Europe/London] Executing before_send_message hook for plugin: N8nWebhookHandler
[27-Mar-2025 08:25:03 Europe/London] Plugin N8nWebhookHandler: Executing hook before_send_message
[27-Mar-2025 08:25:03 Europe/London] Plugin N8nWebhookHandler: Available hooks: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[27-Mar-2025 08:25:03 Europe/London] Plugin N8nWebhookHandler: No handlers registered for hook before_send_message
[27-Mar-2025 08:25:03 Europe/London] before_send_message hook executed successfully
[27-Mar-2025 08:25:03 Europe/London] Saving message to database
[27-Mar-2025 08:25:03 Europe/London] Message saved successfully with ID: 158
[27-Mar-2025 08:25:03 Europe/London] Executing after_send_message hook for plugin: N8nWebhookHandler
[27-Mar-2025 08:25:03 Europe/London] Plugin N8nWebhookHandler: Executing hook after_send_message
[27-Mar-2025 08:25:03 Europe/London] Plugin N8nWebhookHandler: Available hooks: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[27-Mar-2025 08:25:03 Europe/London] Plugin N8nWebhookHandler: Calling hook handler for after_send_message
[27-Mar-2025 08:25:03 Europe/London] N8nWebhookHandler: Starting message processing
[27-Mar-2025 08:25:03 Europe/London] N8nWebhookHandler: Message data: {"conversation_id":"149","content":"hi","role":"user"}
[27-Mar-2025 08:25:03 Europe/London] N8nWebhookHandler: Using webhook URL: https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
[27-Mar-2025 08:25:03 Europe/London] N8nWebhookHandler: Sending request data: {"message":"hi","conversation_id":"149","timestamp":"2025-03-27 08:25:03"}
[27-Mar-2025 08:25:03 Europe/London] N8nWebhookHandler: SSL certificate verification is disabled for testing
[27-Mar-2025 08:25:04 Europe/London] N8nWebhookHandler: Verbose curl output:
*   Trying 104.21.96.1:443...
* Connected to n8n.mazcode.com (104.21.96.1) port 443
* ALPN: curl offers h2,http/1.1
* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384
* ALPN: server accepted h2
* Server certificate:
*  subject: CN=mazcode.com
*  start date: Mar 21 01:54:39 2025 GMT
*  expire date: Jun 19 02:51:08 2025 GMT
*  issuer: C=US; O=Google Trust Services; CN=WE1
*  SSL certificate verify result: unable to get local issuer certificate (20), continuing anyway.
* using HTTP/2
* [HTTP/2] [1] OPENED stream for https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
* [HTTP/2] [1] [:method: POST]
* [HTTP/2] [1] [:scheme: https]
* [HTTP/2] [1] [:authority: n8n.mazcode.com]
* [HTTP/2] [1] [:path: /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f]
* [HTTP/2] [1] [content-type: application/json]
* [HTTP/2] [1] [accept: application/json]
* [HTTP/2] [1] [content-length: 74]
> POST /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f HTTP/2
Host: n8n.mazcode.com
Content-Type: application/json
Accept: application/json
Content-Length: 74

* old SSL session ID is stale, removing
< HTTP/2 200 
< date: Thu, 27 Mar 2025 08:25:03 GMT
< content-type: text/html; charset=utf-8
< vary: Accept-Encoding
< vary: Accept-Encoding
< cf-cache-status: DYNAMIC
< server: cloudflare
< cf-ray: 926d7eb36eeb4c6a-MXP
< alt-svc: h3=":443"; ma=86400
< 
* Connection #0 to host n8n.mazcode.com left intact

[27-Mar-2025 08:25:04 Europe/London] N8nWebhookHandler: Webhook response code: 200
[27-Mar-2025 08:25:04 Europe/London] N8nWebhookHandler: Webhook response: مرحبًا! كيف يمكنني مساعدتك اليوم؟ 😊
[27-Mar-2025 08:25:04 Europe/London] N8nWebhookHandler: Message successfully processed by webhook
[27-Mar-2025 08:25:04 Europe/London] Plugin N8nWebhookHandler: Hook handler executed successfully with result: مرحبًا! كيف يمكنني مساعدتك اليوم؟ 😊
[27-Mar-2025 08:25:04 Europe/London] after_send_message hook executed successfully
[27-Mar-2025 08:25:04 Europe/London] Saving plugin response to database: مرحبًا! كيف يمكنني مساعدتك اليوم؟ 😊
[27-Mar-2025 08:25:04 Europe/London] Plugin response saved with ID: 159
[27-Mar-2025 08:25:04 Europe/London] === Message creation process completed successfully ===
[27-Mar-2025 08:25:04 Europe/London] Sending response to client: {"success":true,"data":{"message":{"id":"158","conversation_id":"149","content":"hi","role":"user"},"assistant_message":{"id":"159","conversation_id":"149","content":"\u0645\u0631\u062d\u0628\u064b\u0627! \u0643\u064a\u0641 \u064a\u0645\u0643\u0646\u0646\u064a \u0645\u0633\u0627\u0639\u062f\u062a\u0643 \u0627\u0644\u064a\u0648\u0645\u061f \ud83d\ude0a","role":"assistant"}}}
[28-Mar-2025 12:14:48 Europe/London] PluginManager: Loading plugins from directory: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins
[28-Mar-2025 12:14:48 Europe/London] PluginManager: Found plugin directories: Array
(
    [0] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler
    [1] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector
    [2] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler
    [3] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut
    [4] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin
)

[28-Mar-2025 12:14:48 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[28-Mar-2025 12:14:48 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[28-Mar-2025 12:14:48 Europe/London] PluginManager: Creating instance of plugin class: DirectMessageHandler
[28-Mar-2025 12:14:48 Europe/London] PluginManager: Plugin not found in database, creating record for: DirectMessageHandler
[28-Mar-2025 12:14:48 Europe/London] PluginManager ERROR: Failed to load plugin DirectMessageHandler: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[28-Mar-2025 12:14:48 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[28-Mar-2025 12:14:48 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[28-Mar-2025 12:14:48 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[28-Mar-2025 12:14:48 Europe/London] PluginManager: Creating instance of plugin class: LLMModelSelector
[28-Mar-2025 12:14:48 Europe/London] PluginManager: Plugin not found in database, creating record for: LLMModelSelector
[28-Mar-2025 12:14:48 Europe/London] PluginManager ERROR: Failed to load plugin LLMModelSelector: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[28-Mar-2025 12:14:48 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[28-Mar-2025 12:14:48 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[28-Mar-2025 12:14:48 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[28-Mar-2025 12:14:48 Europe/London] PluginManager: Creating instance of plugin class: N8nWebhookHandler
[28-Mar-2025 12:14:48 Europe/London] PluginManager: Instantiating plugin with ID: 12
[28-Mar-2025 12:14:48 Europe/London] N8nWebhookHandler: Constructing with plugin ID: 12
[28-Mar-2025 12:14:48 Europe/London] N8nWebhookHandler: Constructing plugin
[28-Mar-2025 12:14:48 Europe/London] N8nWebhookHandler: Construction completed
[28-Mar-2025 12:14:48 Europe/London] PluginManager: Activating plugin: N8nWebhookHandler
[28-Mar-2025 12:14:48 Europe/London] N8nWebhookHandler: Activating plugin with ID: 12
[28-Mar-2025 12:14:48 Europe/London] Plugin N8nWebhookHandler: Activated with ID 12
[28-Mar-2025 12:14:48 Europe/London] N8nWebhookHandler: Creating/checking database tables
[28-Mar-2025 12:14:48 Europe/London] N8nWebhookHandler: Checking for existing settings
[28-Mar-2025 12:14:48 Europe/London] N8nWebhookHandler: Activation completed successfully
[28-Mar-2025 12:14:48 Europe/London] N8nWebhookHandler: Initializing plugin
[28-Mar-2025 12:14:48 Europe/London] N8nWebhookHandler: Registering hooks
[28-Mar-2025 12:14:48 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[28-Mar-2025 12:14:48 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:14:48 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[28-Mar-2025 12:14:48 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:14:48 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:14:48 Europe/London] N8nWebhookHandler: Initialization completed
[28-Mar-2025 12:14:48 Europe/London] PluginManager: Initializing plugin: N8nWebhookHandler
[28-Mar-2025 12:14:48 Europe/London] N8nWebhookHandler: Initializing plugin
[28-Mar-2025 12:14:48 Europe/London] N8nWebhookHandler: Registering hooks
[28-Mar-2025 12:14:48 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[28-Mar-2025 12:14:48 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:14:48 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[28-Mar-2025 12:14:48 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:14:48 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:14:48 Europe/London] N8nWebhookHandler: Initialization completed
[28-Mar-2025 12:14:48 Europe/London] PluginManager: Plugin activated and initialized: N8nWebhookHandler
[28-Mar-2025 12:14:48 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[28-Mar-2025 12:14:48 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[28-Mar-2025 12:14:48 Europe/London] PluginManager: Creating instance of plugin class: SameInSameOut
[28-Mar-2025 12:14:48 Europe/London] PluginManager: Instantiating plugin with ID: 13
[28-Mar-2025 12:14:48 Europe/London] SameInSameOut: Constructing plugin
[28-Mar-2025 12:14:48 Europe/London] PluginManager: Activating plugin: SameInSameOut
[28-Mar-2025 12:14:48 Europe/London] Plugin SameInSameOut: Activated with ID 13
[28-Mar-2025 12:14:48 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[28-Mar-2025 12:14:48 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:14:48 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[28-Mar-2025 12:14:48 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:14:48 Europe/London] PluginManager: Initializing plugin: SameInSameOut
[28-Mar-2025 12:14:48 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[28-Mar-2025 12:14:48 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:14:48 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[28-Mar-2025 12:14:48 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:14:48 Europe/London] PluginManager: Plugin activated and initialized: SameInSameOut
[28-Mar-2025 12:14:48 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[28-Mar-2025 12:14:48 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[28-Mar-2025 12:14:48 Europe/London] PluginManager: Creating instance of plugin class: TestPlugin
[28-Mar-2025 12:14:48 Europe/London] PluginManager: Plugin not found in database, creating record for: TestPlugin
[28-Mar-2025 12:14:48 Europe/London] PluginManager ERROR: Failed to load plugin TestPlugin: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[28-Mar-2025 12:14:48 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[28-Mar-2025 12:14:48 Europe/London] PluginManager: Loaded plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[28-Mar-2025 12:14:48 Europe/London] PluginManager: Active plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[28-Mar-2025 12:14:48 Europe/London] === Starting message creation process ===
[28-Mar-2025 12:14:48 Europe/London] User authenticated successfully - User ID: 8
[28-Mar-2025 12:14:48 Europe/London] Received message data: {"conversation_id":142,"content":"hi"}
[28-Mar-2025 12:14:48 Europe/London] Message data validation passed
[28-Mar-2025 12:14:48 Europe/London] Checking question limit for user 8: current usage = 0, limit = 500
[28-Mar-2025 12:14:48 Europe/London] Question limit check passed
[28-Mar-2025 12:14:48 Europe/London] Fetching conversation and plugin info for conversation ID: 142
[28-Mar-2025 12:14:48 Europe/London] Found conversation - Plugin ID: 12, Plugin Name: N8nWebhookHandler, Plugin Active: yes
[28-Mar-2025 12:14:48 Europe/London] Created message data structure
[28-Mar-2025 12:14:48 Europe/London] Attempting to get plugin instance for: N8nWebhookHandler
[28-Mar-2025 12:14:48 Europe/London] Successfully got plugin instance of class: N8nWebhookHandler
[28-Mar-2025 12:14:48 Europe/London] Plugin hooks: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:14:48 Europe/London] Executing before_send_message hook for plugin: N8nWebhookHandler
[28-Mar-2025 12:14:48 Europe/London] Plugin N8nWebhookHandler: Executing hook before_send_message
[28-Mar-2025 12:14:48 Europe/London] Plugin N8nWebhookHandler: Available hooks: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:14:48 Europe/London] Plugin N8nWebhookHandler: No handlers registered for hook before_send_message
[28-Mar-2025 12:14:48 Europe/London] before_send_message hook executed successfully
[28-Mar-2025 12:14:48 Europe/London] Saving message to database
[28-Mar-2025 12:14:48 Europe/London] Message saved successfully with ID: 160
[28-Mar-2025 12:14:48 Europe/London] Executing after_send_message hook for plugin: N8nWebhookHandler
[28-Mar-2025 12:14:48 Europe/London] Plugin N8nWebhookHandler: Executing hook after_send_message
[28-Mar-2025 12:14:48 Europe/London] Plugin N8nWebhookHandler: Available hooks: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:14:48 Europe/London] Plugin N8nWebhookHandler: Calling hook handler for after_send_message
[28-Mar-2025 12:14:48 Europe/London] N8nWebhookHandler: Starting message processing
[28-Mar-2025 12:14:48 Europe/London] N8nWebhookHandler: Message data: {"conversation_id":142,"content":"hi","role":"user"}
[28-Mar-2025 12:14:48 Europe/London] N8nWebhookHandler: Using webhook URL: https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
[28-Mar-2025 12:14:48 Europe/London] N8nWebhookHandler: Sending request data: {"message":"hi","conversation_id":142,"timestamp":"2025-03-28 12:14:48"}
[28-Mar-2025 12:14:48 Europe/London] N8nWebhookHandler: SSL certificate verification is disabled for testing
[28-Mar-2025 12:14:50 Europe/London] N8nWebhookHandler: Verbose curl output:
*   Trying [2606:4700:3030::6815:4001]:443...
* Connected to n8n.mazcode.com (2606:4700:3030::6815:4001) port 443
* ALPN: curl offers h2,http/1.1
* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384
* ALPN: server accepted h2
* Server certificate:
*  subject: CN=mazcode.com
*  start date: Mar 21 01:54:39 2025 GMT
*  expire date: Jun 19 02:51:08 2025 GMT
*  issuer: C=US; O=Google Trust Services; CN=WE1
*  SSL certificate verify result: unable to get local issuer certificate (20), continuing anyway.
* using HTTP/2
* [HTTP/2] [1] OPENED stream for https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
* [HTTP/2] [1] [:method: POST]
* [HTTP/2] [1] [:scheme: https]
* [HTTP/2] [1] [:authority: n8n.mazcode.com]
* [HTTP/2] [1] [:path: /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f]
* [HTTP/2] [1] [content-type: application/json]
* [HTTP/2] [1] [accept: application/json]
* [HTTP/2] [1] [content-length: 72]
> POST /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f HTTP/2
Host: n8n.mazcode.com
Content-Type: application/json
Accept: application/json
Content-Length: 72

* old SSL session ID is stale, removing
< HTTP/2 200 
< date: Fri, 28 Mar 2025 12:14:49 GMT
< content-type: text/html; charset=utf-8
< vary: Accept-Encoding
< vary: Accept-Encoding
< cf-cache-status: DYNAMIC
< report-to: {"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=IXGeia4PlOVvpbhj%2FjJ9p1w2jCXzlEY1SJmSblNNCKHwwhjs%2BN3RUlA103RbGV5HP821NB8tYe6iooqNYWJ1yphizrCe9xeylfB1xBJV4bmeDkO1%2BJ3mRvXtDGFfyaH5bc1jqk6wsJ8%2BaD4RK20%3D"}],"group":"cf-nel","max_age":604800}
< nel: {"success_fraction":0,"report_to":"cf-nel","max_age":604800}
< server: cloudflare
< cf-ray: 92770c9bec42ed58-MXP
< alt-svc: h3=":443"; ma=86400
< server-timing: cfL4;desc="?proto=TCP&rtt=69562&min_rtt=64400&rtt_var=23686&sent=8&recv=9&lost=0&retrans=0&sent_bytes=3409&recv_bytes=906&delivery_rate=63354&cwnd=254&unsent_bytes=0&cid=4e8b6687edac930b&ts=1814&x=0"
< 
* Connection #0 to host n8n.mazcode.com left intact

[28-Mar-2025 12:14:50 Europe/London] N8nWebhookHandler: Webhook response code: 200
[28-Mar-2025 12:14:50 Europe/London] N8nWebhookHandler: Webhook response: مرحبًا! 😊  
كيف يمكنني مساعدتك اليوم؟
[28-Mar-2025 12:14:50 Europe/London] N8nWebhookHandler: Message successfully processed by webhook
[28-Mar-2025 12:14:50 Europe/London] Plugin N8nWebhookHandler: Hook handler executed successfully with result: مرحبًا! 😊  
كيف يمكنني مساعدتك اليوم؟
[28-Mar-2025 12:14:50 Europe/London] after_send_message hook executed successfully
[28-Mar-2025 12:14:50 Europe/London] Saving plugin response to database: مرحبًا! 😊  
كيف يمكنني مساعدتك اليوم؟
[28-Mar-2025 12:14:50 Europe/London] Plugin response saved with ID: 161
[28-Mar-2025 12:14:50 Europe/London] === Message creation process completed successfully ===
[28-Mar-2025 12:14:50 Europe/London] Sending response to client: {"success":true,"data":{"message":{"id":"160","conversation_id":142,"content":"hi","role":"user"},"assistant_message":{"id":"161","conversation_id":142,"content":"\u0645\u0631\u062d\u0628\u064b\u0627! \ud83d\ude0a  \n\u0643\u064a\u0641 \u064a\u0645\u0643\u0646\u0646\u064a \u0645\u0633\u0627\u0639\u062f\u062a\u0643 \u0627\u0644\u064a\u0648\u0645\u061f","role":"assistant"}}}
[28-Mar-2025 12:15:08 Europe/London] PluginManager: Loading plugins from directory: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins
[28-Mar-2025 12:15:08 Europe/London] PluginManager: Found plugin directories: Array
(
    [0] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler
    [1] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector
    [2] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler
    [3] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut
    [4] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin
)

[28-Mar-2025 12:15:08 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[28-Mar-2025 12:15:08 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[28-Mar-2025 12:15:08 Europe/London] PluginManager: Creating instance of plugin class: DirectMessageHandler
[28-Mar-2025 12:15:08 Europe/London] PluginManager: Plugin not found in database, creating record for: DirectMessageHandler
[28-Mar-2025 12:15:08 Europe/London] PluginManager ERROR: Failed to load plugin DirectMessageHandler: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[28-Mar-2025 12:15:08 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[28-Mar-2025 12:15:08 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[28-Mar-2025 12:15:08 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[28-Mar-2025 12:15:08 Europe/London] PluginManager: Creating instance of plugin class: LLMModelSelector
[28-Mar-2025 12:15:08 Europe/London] PluginManager: Plugin not found in database, creating record for: LLMModelSelector
[28-Mar-2025 12:15:08 Europe/London] PluginManager ERROR: Failed to load plugin LLMModelSelector: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[28-Mar-2025 12:15:08 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[28-Mar-2025 12:15:08 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[28-Mar-2025 12:15:08 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[28-Mar-2025 12:15:08 Europe/London] PluginManager: Creating instance of plugin class: N8nWebhookHandler
[28-Mar-2025 12:15:08 Europe/London] PluginManager: Instantiating plugin with ID: 12
[28-Mar-2025 12:15:08 Europe/London] N8nWebhookHandler: Constructing with plugin ID: 12
[28-Mar-2025 12:15:08 Europe/London] N8nWebhookHandler: Constructing plugin
[28-Mar-2025 12:15:08 Europe/London] N8nWebhookHandler: Construction completed
[28-Mar-2025 12:15:08 Europe/London] PluginManager: Activating plugin: N8nWebhookHandler
[28-Mar-2025 12:15:08 Europe/London] N8nWebhookHandler: Activating plugin with ID: 12
[28-Mar-2025 12:15:08 Europe/London] Plugin N8nWebhookHandler: Activated with ID 12
[28-Mar-2025 12:15:08 Europe/London] N8nWebhookHandler: Creating/checking database tables
[28-Mar-2025 12:15:08 Europe/London] N8nWebhookHandler: Checking for existing settings
[28-Mar-2025 12:15:08 Europe/London] N8nWebhookHandler: Activation completed successfully
[28-Mar-2025 12:15:08 Europe/London] N8nWebhookHandler: Initializing plugin
[28-Mar-2025 12:15:08 Europe/London] N8nWebhookHandler: Registering hooks
[28-Mar-2025 12:15:08 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[28-Mar-2025 12:15:08 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:08 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[28-Mar-2025 12:15:08 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:08 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:08 Europe/London] N8nWebhookHandler: Initialization completed
[28-Mar-2025 12:15:08 Europe/London] PluginManager: Initializing plugin: N8nWebhookHandler
[28-Mar-2025 12:15:08 Europe/London] N8nWebhookHandler: Initializing plugin
[28-Mar-2025 12:15:08 Europe/London] N8nWebhookHandler: Registering hooks
[28-Mar-2025 12:15:08 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[28-Mar-2025 12:15:08 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:08 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[28-Mar-2025 12:15:08 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:08 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:08 Europe/London] N8nWebhookHandler: Initialization completed
[28-Mar-2025 12:15:08 Europe/London] PluginManager: Plugin activated and initialized: N8nWebhookHandler
[28-Mar-2025 12:15:08 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[28-Mar-2025 12:15:08 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[28-Mar-2025 12:15:08 Europe/London] PluginManager: Creating instance of plugin class: SameInSameOut
[28-Mar-2025 12:15:08 Europe/London] PluginManager: Instantiating plugin with ID: 13
[28-Mar-2025 12:15:08 Europe/London] SameInSameOut: Constructing plugin
[28-Mar-2025 12:15:08 Europe/London] PluginManager: Activating plugin: SameInSameOut
[28-Mar-2025 12:15:08 Europe/London] Plugin SameInSameOut: Activated with ID 13
[28-Mar-2025 12:15:08 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[28-Mar-2025 12:15:08 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:08 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[28-Mar-2025 12:15:08 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:08 Europe/London] PluginManager: Initializing plugin: SameInSameOut
[28-Mar-2025 12:15:08 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[28-Mar-2025 12:15:08 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:08 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[28-Mar-2025 12:15:08 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:08 Europe/London] PluginManager: Plugin activated and initialized: SameInSameOut
[28-Mar-2025 12:15:08 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[28-Mar-2025 12:15:08 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[28-Mar-2025 12:15:08 Europe/London] PluginManager: Creating instance of plugin class: TestPlugin
[28-Mar-2025 12:15:08 Europe/London] PluginManager: Plugin not found in database, creating record for: TestPlugin
[28-Mar-2025 12:15:08 Europe/London] PluginManager ERROR: Failed to load plugin TestPlugin: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[28-Mar-2025 12:15:08 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[28-Mar-2025 12:15:08 Europe/London] PluginManager: Loaded plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[28-Mar-2025 12:15:08 Europe/London] PluginManager: Active plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[28-Mar-2025 12:15:08 Europe/London] === Starting message creation process ===
[28-Mar-2025 12:15:08 Europe/London] User authenticated successfully - User ID: 8
[28-Mar-2025 12:15:08 Europe/London] Received message data: {"conversation_id":143,"content":"hi"}
[28-Mar-2025 12:15:08 Europe/London] Message data validation passed
[28-Mar-2025 12:15:08 Europe/London] Checking question limit for user 8: current usage = 0, limit = 500
[28-Mar-2025 12:15:08 Europe/London] Question limit check passed
[28-Mar-2025 12:15:08 Europe/London] Fetching conversation and plugin info for conversation ID: 143
[28-Mar-2025 12:15:08 Europe/London] Found conversation - Plugin ID: 12, Plugin Name: N8nWebhookHandler, Plugin Active: yes
[28-Mar-2025 12:15:08 Europe/London] Created message data structure
[28-Mar-2025 12:15:08 Europe/London] Attempting to get plugin instance for: N8nWebhookHandler
[28-Mar-2025 12:15:08 Europe/London] Successfully got plugin instance of class: N8nWebhookHandler
[28-Mar-2025 12:15:08 Europe/London] Plugin hooks: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:08 Europe/London] Executing before_send_message hook for plugin: N8nWebhookHandler
[28-Mar-2025 12:15:08 Europe/London] Plugin N8nWebhookHandler: Executing hook before_send_message
[28-Mar-2025 12:15:08 Europe/London] Plugin N8nWebhookHandler: Available hooks: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:08 Europe/London] Plugin N8nWebhookHandler: No handlers registered for hook before_send_message
[28-Mar-2025 12:15:08 Europe/London] before_send_message hook executed successfully
[28-Mar-2025 12:15:08 Europe/London] Saving message to database
[28-Mar-2025 12:15:08 Europe/London] Message saved successfully with ID: 162
[28-Mar-2025 12:15:08 Europe/London] Executing after_send_message hook for plugin: N8nWebhookHandler
[28-Mar-2025 12:15:08 Europe/London] Plugin N8nWebhookHandler: Executing hook after_send_message
[28-Mar-2025 12:15:08 Europe/London] Plugin N8nWebhookHandler: Available hooks: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:08 Europe/London] Plugin N8nWebhookHandler: Calling hook handler for after_send_message
[28-Mar-2025 12:15:08 Europe/London] N8nWebhookHandler: Starting message processing
[28-Mar-2025 12:15:08 Europe/London] N8nWebhookHandler: Message data: {"conversation_id":143,"content":"hi","role":"user"}
[28-Mar-2025 12:15:08 Europe/London] N8nWebhookHandler: Using webhook URL: https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
[28-Mar-2025 12:15:08 Europe/London] N8nWebhookHandler: Sending request data: {"message":"hi","conversation_id":143,"timestamp":"2025-03-28 12:15:08"}
[28-Mar-2025 12:15:08 Europe/London] N8nWebhookHandler: SSL certificate verification is disabled for testing
[28-Mar-2025 12:15:09 Europe/London] N8nWebhookHandler: Verbose curl output:
*   Trying [2606:4700:3030::6815:4001]:443...
* Connected to n8n.mazcode.com (2606:4700:3030::6815:4001) port 443
* ALPN: curl offers h2,http/1.1
* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384
* ALPN: server accepted h2
* Server certificate:
*  subject: CN=mazcode.com
*  start date: Mar 21 01:54:39 2025 GMT
*  expire date: Jun 19 02:51:08 2025 GMT
*  issuer: C=US; O=Google Trust Services; CN=WE1
*  SSL certificate verify result: unable to get local issuer certificate (20), continuing anyway.
* using HTTP/2
* [HTTP/2] [1] OPENED stream for https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
* [HTTP/2] [1] [:method: POST]
* [HTTP/2] [1] [:scheme: https]
* [HTTP/2] [1] [:authority: n8n.mazcode.com]
* [HTTP/2] [1] [:path: /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f]
* [HTTP/2] [1] [content-type: application/json]
* [HTTP/2] [1] [accept: application/json]
* [HTTP/2] [1] [content-length: 72]
> POST /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f HTTP/2
Host: n8n.mazcode.com
Content-Type: application/json
Accept: application/json
Content-Length: 72

* old SSL session ID is stale, removing
< HTTP/2 200 
< date: Fri, 28 Mar 2025 12:15:09 GMT
< content-type: text/html; charset=utf-8
< vary: Accept-Encoding
< vary: Accept-Encoding
< cf-cache-status: DYNAMIC
< report-to: {"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=QYI6uTE8lb3oadee7MHCyjZPYPSnz6F3S%2By8yzlTyGGf7gWvIcQEJk5F8%2F7sK%2FgjTsE5MceSS3HHu0Ju8l%2FHO%2B9w4s87UTwvVU0IHkjiLBK4mlQn8J68hB8RnqWL0at32isoaQz6jwYO0XG2ty0%3D"}],"group":"cf-nel","max_age":604800}
< nel: {"success_fraction":0,"report_to":"cf-nel","max_age":604800}
< server: cloudflare
< cf-ray: 92770d1a7998bb2b-MXP
< alt-svc: h3=":443"; ma=86400
< server-timing: cfL4;desc="?proto=TCP&rtt=63045&min_rtt=62253&rtt_var=18006&sent=7&recv=8&lost=0&retrans=0&sent_bytes=3389&recv_bytes=906&delivery_rate=65539&cwnd=253&unsent_bytes=0&cid=1474765f50242a12&ts=1362&x=0"
< 
* Connection #0 to host n8n.mazcode.com left intact

[28-Mar-2025 12:15:09 Europe/London] N8nWebhookHandler: Webhook response code: 200
[28-Mar-2025 12:15:09 Europe/London] N8nWebhookHandler: Webhook response: مرحبًا! 😊  
كيف يمكنني مساعدتك في العثور على شريك حياتك المثالي اليوم؟ 💕
[28-Mar-2025 12:15:09 Europe/London] N8nWebhookHandler: Message successfully processed by webhook
[28-Mar-2025 12:15:09 Europe/London] Plugin N8nWebhookHandler: Hook handler executed successfully with result: مرحبًا! 😊  
كيف يمكنني مساعدتك في العثور على شريك حياتك المثالي اليوم؟ 💕
[28-Mar-2025 12:15:09 Europe/London] after_send_message hook executed successfully
[28-Mar-2025 12:15:09 Europe/London] Saving plugin response to database: مرحبًا! 😊  
كيف يمكنني مساعدتك في العثور على شريك حياتك المثالي اليوم؟ 💕
[28-Mar-2025 12:15:09 Europe/London] Plugin response saved with ID: 163
[28-Mar-2025 12:15:09 Europe/London] === Message creation process completed successfully ===
[28-Mar-2025 12:15:09 Europe/London] Sending response to client: {"success":true,"data":{"message":{"id":"162","conversation_id":143,"content":"hi","role":"user"},"assistant_message":{"id":"163","conversation_id":143,"content":"\u0645\u0631\u062d\u0628\u064b\u0627! \ud83d\ude0a  \n\u0643\u064a\u0641 \u064a\u0645\u0643\u0646\u0646\u064a \u0645\u0633\u0627\u0639\u062f\u062a\u0643 \u0641\u064a \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0634\u0631\u064a\u0643 \u062d\u064a\u0627\u062a\u0643 \u0627\u0644\u0645\u062b\u0627\u0644\u064a \u0627\u0644\u064a\u0648\u0645\u061f \ud83d\udc95","role":"assistant"}}}
[28-Mar-2025 12:15:17 Europe/London] PluginManager: Loading plugins from directory: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins
[28-Mar-2025 12:15:17 Europe/London] PluginManager: Found plugin directories: Array
(
    [0] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler
    [1] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector
    [2] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler
    [3] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut
    [4] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin
)

[28-Mar-2025 12:15:17 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[28-Mar-2025 12:15:17 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[28-Mar-2025 12:15:17 Europe/London] PluginManager: Creating instance of plugin class: DirectMessageHandler
[28-Mar-2025 12:15:17 Europe/London] PluginManager: Plugin not found in database, creating record for: DirectMessageHandler
[28-Mar-2025 12:15:17 Europe/London] PluginManager ERROR: Failed to load plugin DirectMessageHandler: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[28-Mar-2025 12:15:17 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[28-Mar-2025 12:15:17 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[28-Mar-2025 12:15:17 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[28-Mar-2025 12:15:17 Europe/London] PluginManager: Creating instance of plugin class: LLMModelSelector
[28-Mar-2025 12:15:17 Europe/London] PluginManager: Plugin not found in database, creating record for: LLMModelSelector
[28-Mar-2025 12:15:17 Europe/London] PluginManager ERROR: Failed to load plugin LLMModelSelector: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[28-Mar-2025 12:15:17 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[28-Mar-2025 12:15:17 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[28-Mar-2025 12:15:17 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[28-Mar-2025 12:15:17 Europe/London] PluginManager: Creating instance of plugin class: N8nWebhookHandler
[28-Mar-2025 12:15:17 Europe/London] PluginManager: Instantiating plugin with ID: 12
[28-Mar-2025 12:15:17 Europe/London] N8nWebhookHandler: Constructing with plugin ID: 12
[28-Mar-2025 12:15:17 Europe/London] N8nWebhookHandler: Constructing plugin
[28-Mar-2025 12:15:17 Europe/London] N8nWebhookHandler: Construction completed
[28-Mar-2025 12:15:17 Europe/London] PluginManager: Activating plugin: N8nWebhookHandler
[28-Mar-2025 12:15:17 Europe/London] N8nWebhookHandler: Activating plugin with ID: 12
[28-Mar-2025 12:15:17 Europe/London] Plugin N8nWebhookHandler: Activated with ID 12
[28-Mar-2025 12:15:17 Europe/London] N8nWebhookHandler: Creating/checking database tables
[28-Mar-2025 12:15:17 Europe/London] N8nWebhookHandler: Checking for existing settings
[28-Mar-2025 12:15:17 Europe/London] N8nWebhookHandler: Activation completed successfully
[28-Mar-2025 12:15:17 Europe/London] N8nWebhookHandler: Initializing plugin
[28-Mar-2025 12:15:17 Europe/London] N8nWebhookHandler: Registering hooks
[28-Mar-2025 12:15:17 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[28-Mar-2025 12:15:17 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:17 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[28-Mar-2025 12:15:17 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:17 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:17 Europe/London] N8nWebhookHandler: Initialization completed
[28-Mar-2025 12:15:17 Europe/London] PluginManager: Initializing plugin: N8nWebhookHandler
[28-Mar-2025 12:15:17 Europe/London] N8nWebhookHandler: Initializing plugin
[28-Mar-2025 12:15:17 Europe/London] N8nWebhookHandler: Registering hooks
[28-Mar-2025 12:15:17 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[28-Mar-2025 12:15:17 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:17 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[28-Mar-2025 12:15:17 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:17 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:17 Europe/London] N8nWebhookHandler: Initialization completed
[28-Mar-2025 12:15:17 Europe/London] PluginManager: Plugin activated and initialized: N8nWebhookHandler
[28-Mar-2025 12:15:17 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[28-Mar-2025 12:15:17 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[28-Mar-2025 12:15:17 Europe/London] PluginManager: Creating instance of plugin class: SameInSameOut
[28-Mar-2025 12:15:17 Europe/London] PluginManager: Instantiating plugin with ID: 13
[28-Mar-2025 12:15:17 Europe/London] SameInSameOut: Constructing plugin
[28-Mar-2025 12:15:17 Europe/London] PluginManager: Activating plugin: SameInSameOut
[28-Mar-2025 12:15:17 Europe/London] Plugin SameInSameOut: Activated with ID 13
[28-Mar-2025 12:15:17 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[28-Mar-2025 12:15:17 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:17 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[28-Mar-2025 12:15:17 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:17 Europe/London] PluginManager: Initializing plugin: SameInSameOut
[28-Mar-2025 12:15:17 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[28-Mar-2025 12:15:17 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:17 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[28-Mar-2025 12:15:17 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:17 Europe/London] PluginManager: Plugin activated and initialized: SameInSameOut
[28-Mar-2025 12:15:17 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[28-Mar-2025 12:15:17 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[28-Mar-2025 12:15:17 Europe/London] PluginManager: Creating instance of plugin class: TestPlugin
[28-Mar-2025 12:15:17 Europe/London] PluginManager: Plugin not found in database, creating record for: TestPlugin
[28-Mar-2025 12:15:17 Europe/London] PluginManager ERROR: Failed to load plugin TestPlugin: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[28-Mar-2025 12:15:17 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[28-Mar-2025 12:15:17 Europe/London] PluginManager: Loaded plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[28-Mar-2025 12:15:17 Europe/London] PluginManager: Active plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[28-Mar-2025 12:15:17 Europe/London] === Starting message creation process ===
[28-Mar-2025 12:15:17 Europe/London] User authenticated successfully - User ID: 8
[28-Mar-2025 12:15:17 Europe/London] Received message data: {"conversation_id":143,"content":"hi"}
[28-Mar-2025 12:15:17 Europe/London] Message data validation passed
[28-Mar-2025 12:15:17 Europe/London] Checking question limit for user 8: current usage = 0, limit = 500
[28-Mar-2025 12:15:17 Europe/London] Question limit check passed
[28-Mar-2025 12:15:17 Europe/London] Fetching conversation and plugin info for conversation ID: 143
[28-Mar-2025 12:15:17 Europe/London] Found conversation - Plugin ID: 13, Plugin Name: SameInSameOut, Plugin Active: yes
[28-Mar-2025 12:15:17 Europe/London] Created message data structure
[28-Mar-2025 12:15:17 Europe/London] Attempting to get plugin instance for: SameInSameOut
[28-Mar-2025 12:15:17 Europe/London] Successfully got plugin instance of class: SameInSameOut
[28-Mar-2025 12:15:17 Europe/London] Plugin hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:17 Europe/London] Executing before_send_message hook for plugin: SameInSameOut
[28-Mar-2025 12:15:17 Europe/London] Plugin SameInSameOut: Executing hook before_send_message
[28-Mar-2025 12:15:17 Europe/London] Plugin SameInSameOut: Available hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:17 Europe/London] Plugin SameInSameOut: Calling hook handler for before_send_message
[28-Mar-2025 12:15:17 Europe/London] Plugin SameInSameOut: Hook handler executed successfully with result: hi
[28-Mar-2025 12:15:17 Europe/London] before_send_message hook executed successfully
[28-Mar-2025 12:15:17 Europe/London] Got response from before_send_message: hi
[28-Mar-2025 12:15:17 Europe/London] Saving message to database
[28-Mar-2025 12:15:17 Europe/London] Message saved successfully with ID: 164
[28-Mar-2025 12:15:17 Europe/London] Executing after_send_message hook for plugin: SameInSameOut
[28-Mar-2025 12:15:17 Europe/London] Plugin SameInSameOut: Executing hook after_send_message
[28-Mar-2025 12:15:17 Europe/London] Plugin SameInSameOut: Available hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:17 Europe/London] Plugin SameInSameOut: Calling hook handler for after_send_message
[28-Mar-2025 12:15:17 Europe/London] Plugin SameInSameOut: Hook handler executed successfully with result: hi
[28-Mar-2025 12:15:17 Europe/London] after_send_message hook executed successfully
[28-Mar-2025 12:15:17 Europe/London] Saving plugin response to database: hi
[28-Mar-2025 12:15:17 Europe/London] Plugin response saved with ID: 165
[28-Mar-2025 12:15:17 Europe/London] === Message creation process completed successfully ===
[28-Mar-2025 12:15:17 Europe/London] Sending response to client: {"success":true,"data":{"message":{"id":"164","conversation_id":143,"content":"hi","role":"user"},"assistant_message":{"id":"165","conversation_id":143,"content":"hi","role":"assistant"}}}
[28-Mar-2025 12:15:28 Europe/London] PluginManager: Loading plugins from directory: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins
[28-Mar-2025 12:15:28 Europe/London] PluginManager: Found plugin directories: Array
(
    [0] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler
    [1] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector
    [2] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler
    [3] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut
    [4] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin
)

[28-Mar-2025 12:15:28 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[28-Mar-2025 12:15:28 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[28-Mar-2025 12:15:28 Europe/London] PluginManager: Creating instance of plugin class: DirectMessageHandler
[28-Mar-2025 12:15:28 Europe/London] PluginManager: Plugin not found in database, creating record for: DirectMessageHandler
[28-Mar-2025 12:15:28 Europe/London] PluginManager ERROR: Failed to load plugin DirectMessageHandler: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[28-Mar-2025 12:15:28 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[28-Mar-2025 12:15:28 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[28-Mar-2025 12:15:28 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[28-Mar-2025 12:15:28 Europe/London] PluginManager: Creating instance of plugin class: LLMModelSelector
[28-Mar-2025 12:15:28 Europe/London] PluginManager: Plugin not found in database, creating record for: LLMModelSelector
[28-Mar-2025 12:15:28 Europe/London] PluginManager ERROR: Failed to load plugin LLMModelSelector: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[28-Mar-2025 12:15:28 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[28-Mar-2025 12:15:28 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[28-Mar-2025 12:15:28 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[28-Mar-2025 12:15:28 Europe/London] PluginManager: Creating instance of plugin class: N8nWebhookHandler
[28-Mar-2025 12:15:28 Europe/London] PluginManager: Instantiating plugin with ID: 12
[28-Mar-2025 12:15:28 Europe/London] N8nWebhookHandler: Constructing with plugin ID: 12
[28-Mar-2025 12:15:28 Europe/London] N8nWebhookHandler: Constructing plugin
[28-Mar-2025 12:15:28 Europe/London] N8nWebhookHandler: Construction completed
[28-Mar-2025 12:15:28 Europe/London] PluginManager: Activating plugin: N8nWebhookHandler
[28-Mar-2025 12:15:28 Europe/London] N8nWebhookHandler: Activating plugin with ID: 12
[28-Mar-2025 12:15:28 Europe/London] Plugin N8nWebhookHandler: Activated with ID 12
[28-Mar-2025 12:15:28 Europe/London] N8nWebhookHandler: Creating/checking database tables
[28-Mar-2025 12:15:28 Europe/London] N8nWebhookHandler: Checking for existing settings
[28-Mar-2025 12:15:28 Europe/London] N8nWebhookHandler: Activation completed successfully
[28-Mar-2025 12:15:28 Europe/London] N8nWebhookHandler: Initializing plugin
[28-Mar-2025 12:15:28 Europe/London] N8nWebhookHandler: Registering hooks
[28-Mar-2025 12:15:28 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[28-Mar-2025 12:15:28 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:28 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[28-Mar-2025 12:15:28 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:28 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:28 Europe/London] N8nWebhookHandler: Initialization completed
[28-Mar-2025 12:15:28 Europe/London] PluginManager: Initializing plugin: N8nWebhookHandler
[28-Mar-2025 12:15:28 Europe/London] N8nWebhookHandler: Initializing plugin
[28-Mar-2025 12:15:28 Europe/London] N8nWebhookHandler: Registering hooks
[28-Mar-2025 12:15:28 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[28-Mar-2025 12:15:28 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:28 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[28-Mar-2025 12:15:28 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:28 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:28 Europe/London] N8nWebhookHandler: Initialization completed
[28-Mar-2025 12:15:28 Europe/London] PluginManager: Plugin activated and initialized: N8nWebhookHandler
[28-Mar-2025 12:15:28 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[28-Mar-2025 12:15:28 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[28-Mar-2025 12:15:28 Europe/London] PluginManager: Creating instance of plugin class: SameInSameOut
[28-Mar-2025 12:15:28 Europe/London] PluginManager: Instantiating plugin with ID: 13
[28-Mar-2025 12:15:28 Europe/London] SameInSameOut: Constructing plugin
[28-Mar-2025 12:15:28 Europe/London] PluginManager: Activating plugin: SameInSameOut
[28-Mar-2025 12:15:28 Europe/London] Plugin SameInSameOut: Activated with ID 13
[28-Mar-2025 12:15:28 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[28-Mar-2025 12:15:28 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:28 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[28-Mar-2025 12:15:28 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:28 Europe/London] PluginManager: Initializing plugin: SameInSameOut
[28-Mar-2025 12:15:28 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[28-Mar-2025 12:15:28 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:28 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[28-Mar-2025 12:15:28 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:28 Europe/London] PluginManager: Plugin activated and initialized: SameInSameOut
[28-Mar-2025 12:15:28 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[28-Mar-2025 12:15:28 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[28-Mar-2025 12:15:28 Europe/London] PluginManager: Creating instance of plugin class: TestPlugin
[28-Mar-2025 12:15:28 Europe/London] PluginManager: Plugin not found in database, creating record for: TestPlugin
[28-Mar-2025 12:15:28 Europe/London] PluginManager ERROR: Failed to load plugin TestPlugin: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[28-Mar-2025 12:15:28 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[28-Mar-2025 12:15:28 Europe/London] PluginManager: Loaded plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[28-Mar-2025 12:15:28 Europe/London] PluginManager: Active plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[28-Mar-2025 12:15:28 Europe/London] === Starting message creation process ===
[28-Mar-2025 12:15:28 Europe/London] User authenticated successfully - User ID: 8
[28-Mar-2025 12:15:28 Europe/London] Received message data: {"conversation_id":143,"content":"hi"}
[28-Mar-2025 12:15:28 Europe/London] Message data validation passed
[28-Mar-2025 12:15:28 Europe/London] Checking question limit for user 8: current usage = 0, limit = 500
[28-Mar-2025 12:15:28 Europe/London] Question limit check passed
[28-Mar-2025 12:15:28 Europe/London] Fetching conversation and plugin info for conversation ID: 143
[28-Mar-2025 12:15:28 Europe/London] Found conversation - Plugin ID: 12, Plugin Name: N8nWebhookHandler, Plugin Active: yes
[28-Mar-2025 12:15:28 Europe/London] Created message data structure
[28-Mar-2025 12:15:28 Europe/London] Attempting to get plugin instance for: N8nWebhookHandler
[28-Mar-2025 12:15:28 Europe/London] Successfully got plugin instance of class: N8nWebhookHandler
[28-Mar-2025 12:15:28 Europe/London] Plugin hooks: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:28 Europe/London] Executing before_send_message hook for plugin: N8nWebhookHandler
[28-Mar-2025 12:15:28 Europe/London] Plugin N8nWebhookHandler: Executing hook before_send_message
[28-Mar-2025 12:15:28 Europe/London] Plugin N8nWebhookHandler: Available hooks: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:28 Europe/London] Plugin N8nWebhookHandler: No handlers registered for hook before_send_message
[28-Mar-2025 12:15:28 Europe/London] before_send_message hook executed successfully
[28-Mar-2025 12:15:28 Europe/London] Saving message to database
[28-Mar-2025 12:15:28 Europe/London] Message saved successfully with ID: 166
[28-Mar-2025 12:15:28 Europe/London] Executing after_send_message hook for plugin: N8nWebhookHandler
[28-Mar-2025 12:15:28 Europe/London] Plugin N8nWebhookHandler: Executing hook after_send_message
[28-Mar-2025 12:15:28 Europe/London] Plugin N8nWebhookHandler: Available hooks: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:28 Europe/London] Plugin N8nWebhookHandler: Calling hook handler for after_send_message
[28-Mar-2025 12:15:28 Europe/London] N8nWebhookHandler: Starting message processing
[28-Mar-2025 12:15:28 Europe/London] N8nWebhookHandler: Message data: {"conversation_id":143,"content":"hi","role":"user"}
[28-Mar-2025 12:15:28 Europe/London] N8nWebhookHandler: Using webhook URL: https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
[28-Mar-2025 12:15:28 Europe/London] N8nWebhookHandler: Sending request data: {"message":"hi","conversation_id":143,"timestamp":"2025-03-28 12:15:28"}
[28-Mar-2025 12:15:28 Europe/London] N8nWebhookHandler: SSL certificate verification is disabled for testing
[28-Mar-2025 12:15:30 Europe/London] N8nWebhookHandler: Verbose curl output:
*   Trying [2606:4700:3030::6815:4001]:443...
* Connected to n8n.mazcode.com (2606:4700:3030::6815:4001) port 443
* ALPN: curl offers h2,http/1.1
* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384
* ALPN: server accepted h2
* Server certificate:
*  subject: CN=mazcode.com
*  start date: Mar 21 01:54:39 2025 GMT
*  expire date: Jun 19 02:51:08 2025 GMT
*  issuer: C=US; O=Google Trust Services; CN=WE1
*  SSL certificate verify result: unable to get local issuer certificate (20), continuing anyway.
* using HTTP/2
* [HTTP/2] [1] OPENED stream for https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
* [HTTP/2] [1] [:method: POST]
* [HTTP/2] [1] [:scheme: https]
* [HTTP/2] [1] [:authority: n8n.mazcode.com]
* [HTTP/2] [1] [:path: /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f]
* [HTTP/2] [1] [content-type: application/json]
* [HTTP/2] [1] [accept: application/json]
* [HTTP/2] [1] [content-length: 72]
> POST /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f HTTP/2
Host: n8n.mazcode.com
Content-Type: application/json
Accept: application/json
Content-Length: 72

* old SSL session ID is stale, removing
< HTTP/2 200 
< date: Fri, 28 Mar 2025 12:15:29 GMT
< content-type: text/html; charset=utf-8
< vary: Accept-Encoding
< vary: Accept-Encoding
< cf-cache-status: DYNAMIC
< report-to: {"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=5VDQjI1yNs2IqfX5JnTvxjU4vwRV%2F5bfpi0UTlrVg%2B%2F31z%2BBzvpI12ZOYryolzCu3%2Bo3u7Aa2C876S9PEkt3UV%2BatgqAoXyKTT0D%2BcuvfOaooV%2BX6TuKE1b0YqZmvJ4%2BbrUIjxd3lqGbL1%2FaMGM%3D"}],"group":"cf-nel","max_age":604800}
< nel: {"success_fraction":0,"report_to":"cf-nel","max_age":604800}
< server: cloudflare
< cf-ray: 92770d98fdf6f41b-MXP
< alt-svc: h3=":443"; ma=86400
< server-timing: cfL4;desc="?proto=TCP&rtt=64832&min_rtt=64125&rtt_var=18490&sent=7&recv=8&lost=0&retrans=0&sent_bytes=3389&recv_bytes=906&delivery_rate=63625&cwnd=34&unsent_bytes=0&cid=94d9ae468294fbdf&ts=1236&x=0"
< 
* Connection #0 to host n8n.mazcode.com left intact

[28-Mar-2025 12:15:30 Europe/London] N8nWebhookHandler: Webhook response code: 200
[28-Mar-2025 12:15:30 Europe/London] N8nWebhookHandler: Webhook response: مرحبًا! 😊  
كيف أستطيع مساعدتك؟ هل تبحث عن شريك حياة أو أي شيء آخر يمكنني مساعدتك فيه؟ 💍
[28-Mar-2025 12:15:30 Europe/London] N8nWebhookHandler: Message successfully processed by webhook
[28-Mar-2025 12:15:30 Europe/London] Plugin N8nWebhookHandler: Hook handler executed successfully with result: مرحبًا! 😊  
كيف أستطيع مساعدتك؟ هل تبحث عن شريك حياة أو أي شيء آخر يمكنني مساعدتك فيه؟ 💍
[28-Mar-2025 12:15:30 Europe/London] after_send_message hook executed successfully
[28-Mar-2025 12:15:30 Europe/London] Saving plugin response to database: مرحبًا! 😊  
كيف أستطيع مساعدتك؟ هل تبحث عن شريك حياة أو أي شيء آخر يمكنني مساعدتك فيه؟ 💍
[28-Mar-2025 12:15:30 Europe/London] Plugin response saved with ID: 167
[28-Mar-2025 12:15:30 Europe/London] === Message creation process completed successfully ===
[28-Mar-2025 12:15:30 Europe/London] Sending response to client: {"success":true,"data":{"message":{"id":"166","conversation_id":143,"content":"hi","role":"user"},"assistant_message":{"id":"167","conversation_id":143,"content":"\u0645\u0631\u062d\u0628\u064b\u0627! \ud83d\ude0a  \n\u0643\u064a\u0641 \u0623\u0633\u062a\u0637\u064a\u0639 \u0645\u0633\u0627\u0639\u062f\u062a\u0643\u061f \u0647\u0644 \u062a\u0628\u062d\u062b \u0639\u0646 \u0634\u0631\u064a\u0643 \u062d\u064a\u0627\u0629 \u0623\u0648 \u0623\u064a \u0634\u064a\u0621 \u0622\u062e\u0631 \u064a\u0645\u0643\u0646\u0646\u064a \u0645\u0633\u0627\u0639\u062f\u062a\u0643 \u0641\u064a\u0647\u061f \ud83d\udc8d","role":"assistant"}}}
[28-Mar-2025 12:15:36 Europe/London] Checking conversation limit for user 8: current usage = 17, limit = 50
[28-Mar-2025 12:15:41 Europe/London] PluginManager: Loading plugins from directory: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins
[28-Mar-2025 12:15:41 Europe/London] PluginManager: Found plugin directories: Array
(
    [0] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler
    [1] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector
    [2] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler
    [3] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut
    [4] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin
)

[28-Mar-2025 12:15:41 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[28-Mar-2025 12:15:41 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[28-Mar-2025 12:15:41 Europe/London] PluginManager: Creating instance of plugin class: DirectMessageHandler
[28-Mar-2025 12:15:41 Europe/London] PluginManager: Plugin not found in database, creating record for: DirectMessageHandler
[28-Mar-2025 12:15:41 Europe/London] PluginManager ERROR: Failed to load plugin DirectMessageHandler: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[28-Mar-2025 12:15:41 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[28-Mar-2025 12:15:41 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[28-Mar-2025 12:15:41 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[28-Mar-2025 12:15:41 Europe/London] PluginManager: Creating instance of plugin class: LLMModelSelector
[28-Mar-2025 12:15:41 Europe/London] PluginManager: Plugin not found in database, creating record for: LLMModelSelector
[28-Mar-2025 12:15:41 Europe/London] PluginManager ERROR: Failed to load plugin LLMModelSelector: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[28-Mar-2025 12:15:41 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[28-Mar-2025 12:15:41 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[28-Mar-2025 12:15:41 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[28-Mar-2025 12:15:41 Europe/London] PluginManager: Creating instance of plugin class: N8nWebhookHandler
[28-Mar-2025 12:15:41 Europe/London] PluginManager: Instantiating plugin with ID: 12
[28-Mar-2025 12:15:41 Europe/London] N8nWebhookHandler: Constructing with plugin ID: 12
[28-Mar-2025 12:15:41 Europe/London] N8nWebhookHandler: Constructing plugin
[28-Mar-2025 12:15:41 Europe/London] N8nWebhookHandler: Construction completed
[28-Mar-2025 12:15:41 Europe/London] PluginManager: Activating plugin: N8nWebhookHandler
[28-Mar-2025 12:15:41 Europe/London] N8nWebhookHandler: Activating plugin with ID: 12
[28-Mar-2025 12:15:41 Europe/London] Plugin N8nWebhookHandler: Activated with ID 12
[28-Mar-2025 12:15:41 Europe/London] N8nWebhookHandler: Creating/checking database tables
[28-Mar-2025 12:15:41 Europe/London] N8nWebhookHandler: Checking for existing settings
[28-Mar-2025 12:15:41 Europe/London] N8nWebhookHandler: Activation completed successfully
[28-Mar-2025 12:15:41 Europe/London] N8nWebhookHandler: Initializing plugin
[28-Mar-2025 12:15:41 Europe/London] N8nWebhookHandler: Registering hooks
[28-Mar-2025 12:15:41 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[28-Mar-2025 12:15:41 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:41 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[28-Mar-2025 12:15:41 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:41 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:41 Europe/London] N8nWebhookHandler: Initialization completed
[28-Mar-2025 12:15:41 Europe/London] PluginManager: Initializing plugin: N8nWebhookHandler
[28-Mar-2025 12:15:41 Europe/London] N8nWebhookHandler: Initializing plugin
[28-Mar-2025 12:15:41 Europe/London] N8nWebhookHandler: Registering hooks
[28-Mar-2025 12:15:41 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[28-Mar-2025 12:15:41 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:41 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[28-Mar-2025 12:15:41 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:41 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:41 Europe/London] N8nWebhookHandler: Initialization completed
[28-Mar-2025 12:15:41 Europe/London] PluginManager: Plugin activated and initialized: N8nWebhookHandler
[28-Mar-2025 12:15:41 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[28-Mar-2025 12:15:41 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[28-Mar-2025 12:15:41 Europe/London] PluginManager: Creating instance of plugin class: SameInSameOut
[28-Mar-2025 12:15:41 Europe/London] PluginManager: Instantiating plugin with ID: 13
[28-Mar-2025 12:15:41 Europe/London] SameInSameOut: Constructing plugin
[28-Mar-2025 12:15:41 Europe/London] PluginManager: Activating plugin: SameInSameOut
[28-Mar-2025 12:15:41 Europe/London] Plugin SameInSameOut: Activated with ID 13
[28-Mar-2025 12:15:41 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[28-Mar-2025 12:15:41 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:41 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[28-Mar-2025 12:15:41 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:41 Europe/London] PluginManager: Initializing plugin: SameInSameOut
[28-Mar-2025 12:15:41 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[28-Mar-2025 12:15:41 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:41 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[28-Mar-2025 12:15:41 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:41 Europe/London] PluginManager: Plugin activated and initialized: SameInSameOut
[28-Mar-2025 12:15:41 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[28-Mar-2025 12:15:41 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[28-Mar-2025 12:15:41 Europe/London] PluginManager: Creating instance of plugin class: TestPlugin
[28-Mar-2025 12:15:41 Europe/London] PluginManager: Plugin not found in database, creating record for: TestPlugin
[28-Mar-2025 12:15:41 Europe/London] PluginManager ERROR: Failed to load plugin TestPlugin: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[28-Mar-2025 12:15:41 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[28-Mar-2025 12:15:41 Europe/London] PluginManager: Loaded plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[28-Mar-2025 12:15:41 Europe/London] PluginManager: Active plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[28-Mar-2025 12:15:41 Europe/London] === Starting message creation process ===
[28-Mar-2025 12:15:41 Europe/London] User authenticated successfully - User ID: 8
[28-Mar-2025 12:15:41 Europe/London] Received message data: {"conversation_id":"150","content":"hello"}
[28-Mar-2025 12:15:41 Europe/London] Message data validation passed
[28-Mar-2025 12:15:41 Europe/London] Checking question limit for user 8: current usage = 0, limit = 500
[28-Mar-2025 12:15:41 Europe/London] Question limit check passed
[28-Mar-2025 12:15:41 Europe/London] Fetching conversation and plugin info for conversation ID: 150
[28-Mar-2025 12:15:41 Europe/London] Found conversation - Plugin ID: 12, Plugin Name: N8nWebhookHandler, Plugin Active: yes
[28-Mar-2025 12:15:41 Europe/London] Created message data structure
[28-Mar-2025 12:15:41 Europe/London] Attempting to get plugin instance for: N8nWebhookHandler
[28-Mar-2025 12:15:41 Europe/London] Successfully got plugin instance of class: N8nWebhookHandler
[28-Mar-2025 12:15:41 Europe/London] Plugin hooks: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:41 Europe/London] Executing before_send_message hook for plugin: N8nWebhookHandler
[28-Mar-2025 12:15:41 Europe/London] Plugin N8nWebhookHandler: Executing hook before_send_message
[28-Mar-2025 12:15:41 Europe/London] Plugin N8nWebhookHandler: Available hooks: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:41 Europe/London] Plugin N8nWebhookHandler: No handlers registered for hook before_send_message
[28-Mar-2025 12:15:41 Europe/London] before_send_message hook executed successfully
[28-Mar-2025 12:15:41 Europe/London] Saving message to database
[28-Mar-2025 12:15:41 Europe/London] Message saved successfully with ID: 168
[28-Mar-2025 12:15:41 Europe/London] Executing after_send_message hook for plugin: N8nWebhookHandler
[28-Mar-2025 12:15:41 Europe/London] Plugin N8nWebhookHandler: Executing hook after_send_message
[28-Mar-2025 12:15:41 Europe/London] Plugin N8nWebhookHandler: Available hooks: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:41 Europe/London] Plugin N8nWebhookHandler: Calling hook handler for after_send_message
[28-Mar-2025 12:15:41 Europe/London] N8nWebhookHandler: Starting message processing
[28-Mar-2025 12:15:41 Europe/London] N8nWebhookHandler: Message data: {"conversation_id":"150","content":"hello","role":"user"}
[28-Mar-2025 12:15:41 Europe/London] N8nWebhookHandler: Using webhook URL: https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
[28-Mar-2025 12:15:41 Europe/London] N8nWebhookHandler: Sending request data: {"message":"hello","conversation_id":"150","timestamp":"2025-03-28 12:15:41"}
[28-Mar-2025 12:15:41 Europe/London] N8nWebhookHandler: SSL certificate verification is disabled for testing
[28-Mar-2025 12:15:42 Europe/London] N8nWebhookHandler: Verbose curl output:
*   Trying [2606:4700:3030::6815:4001]:443...
* Connected to n8n.mazcode.com (2606:4700:3030::6815:4001) port 443
* ALPN: curl offers h2,http/1.1
* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384
* ALPN: server accepted h2
* Server certificate:
*  subject: CN=mazcode.com
*  start date: Mar 21 01:54:39 2025 GMT
*  expire date: Jun 19 02:51:08 2025 GMT
*  issuer: C=US; O=Google Trust Services; CN=WE1
*  SSL certificate verify result: unable to get local issuer certificate (20), continuing anyway.
* using HTTP/2
* [HTTP/2] [1] OPENED stream for https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
* [HTTP/2] [1] [:method: POST]
* [HTTP/2] [1] [:scheme: https]
* [HTTP/2] [1] [:authority: n8n.mazcode.com]
* [HTTP/2] [1] [:path: /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f]
* [HTTP/2] [1] [content-type: application/json]
* [HTTP/2] [1] [accept: application/json]
* [HTTP/2] [1] [content-length: 77]
> POST /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f HTTP/2
Host: n8n.mazcode.com
Content-Type: application/json
Accept: application/json
Content-Length: 77

* old SSL session ID is stale, removing
< HTTP/2 200 
< date: Fri, 28 Mar 2025 12:15:42 GMT
< content-type: text/html; charset=utf-8
< vary: Accept-Encoding
< vary: Accept-Encoding
< cf-cache-status: DYNAMIC
< report-to: {"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=3q6p08mb%2BmYXAfXCJTFbwt2BCRlX4qsmDbHpS%2Bz0XiJ75j53eyGG9i%2Ff8mI3VOXMagAuVxNEnvdQETtZfz2MMHIF5KtziRFmZcHiuBnQkEefTU6fqGY10kwwssLebDCKHBtL8hFyzFZyHHDNkqI%3D"}],"group":"cf-nel","max_age":604800}
< nel: {"success_fraction":0,"report_to":"cf-nel","max_age":604800}
< server: cloudflare
< cf-ray: 92770debae14ed53-MXP
< alt-svc: h3=":443"; ma=86400
< server-timing: cfL4;desc="?proto=TCP&rtt=63615&min_rtt=62148&rtt_var=18618&sent=8&recv=8&lost=0&retrans=0&sent_bytes=3388&recv_bytes=911&delivery_rate=65649&cwnd=254&unsent_bytes=0&cid=e9d8d1d116325c43&ts=863&x=0"
< 
* Connection #0 to host n8n.mazcode.com left intact

[28-Mar-2025 12:15:42 Europe/London] N8nWebhookHandler: Webhook response code: 200
[28-Mar-2025 12:15:42 Europe/London] N8nWebhookHandler: Webhook response: مرحبًا! كيف يمكنني مساعدتك اليوم؟ 😊
[28-Mar-2025 12:15:42 Europe/London] N8nWebhookHandler: Message successfully processed by webhook
[28-Mar-2025 12:15:42 Europe/London] Plugin N8nWebhookHandler: Hook handler executed successfully with result: مرحبًا! كيف يمكنني مساعدتك اليوم؟ 😊
[28-Mar-2025 12:15:42 Europe/London] after_send_message hook executed successfully
[28-Mar-2025 12:15:42 Europe/London] Saving plugin response to database: مرحبًا! كيف يمكنني مساعدتك اليوم؟ 😊
[28-Mar-2025 12:15:42 Europe/London] Plugin response saved with ID: 169
[28-Mar-2025 12:15:42 Europe/London] === Message creation process completed successfully ===
[28-Mar-2025 12:15:42 Europe/London] Sending response to client: {"success":true,"data":{"message":{"id":"168","conversation_id":"150","content":"hello","role":"user"},"assistant_message":{"id":"169","conversation_id":"150","content":"\u0645\u0631\u062d\u0628\u064b\u0627! \u0643\u064a\u0641 \u064a\u0645\u0643\u0646\u0646\u064a \u0645\u0633\u0627\u0639\u062f\u062a\u0643 \u0627\u0644\u064a\u0648\u0645\u061f \ud83d\ude0a","role":"assistant"}}}
[28-Mar-2025 12:15:53 Europe/London] PluginManager: Loading plugins from directory: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins
[28-Mar-2025 12:15:53 Europe/London] PluginManager: Found plugin directories: Array
(
    [0] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler
    [1] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector
    [2] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler
    [3] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut
    [4] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin
)

[28-Mar-2025 12:15:53 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[28-Mar-2025 12:15:53 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[28-Mar-2025 12:15:53 Europe/London] PluginManager: Creating instance of plugin class: DirectMessageHandler
[28-Mar-2025 12:15:53 Europe/London] PluginManager: Plugin not found in database, creating record for: DirectMessageHandler
[28-Mar-2025 12:15:53 Europe/London] PluginManager ERROR: Failed to load plugin DirectMessageHandler: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[28-Mar-2025 12:15:53 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[28-Mar-2025 12:15:53 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[28-Mar-2025 12:15:53 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[28-Mar-2025 12:15:53 Europe/London] PluginManager: Creating instance of plugin class: LLMModelSelector
[28-Mar-2025 12:15:53 Europe/London] PluginManager: Plugin not found in database, creating record for: LLMModelSelector
[28-Mar-2025 12:15:53 Europe/London] PluginManager ERROR: Failed to load plugin LLMModelSelector: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[28-Mar-2025 12:15:53 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[28-Mar-2025 12:15:53 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[28-Mar-2025 12:15:53 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[28-Mar-2025 12:15:53 Europe/London] PluginManager: Creating instance of plugin class: N8nWebhookHandler
[28-Mar-2025 12:15:53 Europe/London] PluginManager: Instantiating plugin with ID: 12
[28-Mar-2025 12:15:53 Europe/London] N8nWebhookHandler: Constructing with plugin ID: 12
[28-Mar-2025 12:15:53 Europe/London] N8nWebhookHandler: Constructing plugin
[28-Mar-2025 12:15:53 Europe/London] N8nWebhookHandler: Construction completed
[28-Mar-2025 12:15:53 Europe/London] PluginManager: Activating plugin: N8nWebhookHandler
[28-Mar-2025 12:15:53 Europe/London] N8nWebhookHandler: Activating plugin with ID: 12
[28-Mar-2025 12:15:53 Europe/London] Plugin N8nWebhookHandler: Activated with ID 12
[28-Mar-2025 12:15:53 Europe/London] N8nWebhookHandler: Creating/checking database tables
[28-Mar-2025 12:15:53 Europe/London] N8nWebhookHandler: Checking for existing settings
[28-Mar-2025 12:15:53 Europe/London] N8nWebhookHandler: Activation completed successfully
[28-Mar-2025 12:15:53 Europe/London] N8nWebhookHandler: Initializing plugin
[28-Mar-2025 12:15:53 Europe/London] N8nWebhookHandler: Registering hooks
[28-Mar-2025 12:15:53 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[28-Mar-2025 12:15:53 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:53 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[28-Mar-2025 12:15:53 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:53 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:53 Europe/London] N8nWebhookHandler: Initialization completed
[28-Mar-2025 12:15:53 Europe/London] PluginManager: Initializing plugin: N8nWebhookHandler
[28-Mar-2025 12:15:53 Europe/London] N8nWebhookHandler: Initializing plugin
[28-Mar-2025 12:15:53 Europe/London] N8nWebhookHandler: Registering hooks
[28-Mar-2025 12:15:53 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[28-Mar-2025 12:15:53 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:53 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[28-Mar-2025 12:15:53 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:53 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:53 Europe/London] N8nWebhookHandler: Initialization completed
[28-Mar-2025 12:15:53 Europe/London] PluginManager: Plugin activated and initialized: N8nWebhookHandler
[28-Mar-2025 12:15:53 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[28-Mar-2025 12:15:53 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[28-Mar-2025 12:15:53 Europe/London] PluginManager: Creating instance of plugin class: SameInSameOut
[28-Mar-2025 12:15:53 Europe/London] PluginManager: Instantiating plugin with ID: 13
[28-Mar-2025 12:15:53 Europe/London] SameInSameOut: Constructing plugin
[28-Mar-2025 12:15:53 Europe/London] PluginManager: Activating plugin: SameInSameOut
[28-Mar-2025 12:15:53 Europe/London] Plugin SameInSameOut: Activated with ID 13
[28-Mar-2025 12:15:53 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[28-Mar-2025 12:15:53 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:53 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[28-Mar-2025 12:15:53 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:53 Europe/London] PluginManager: Initializing plugin: SameInSameOut
[28-Mar-2025 12:15:53 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[28-Mar-2025 12:15:53 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:53 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[28-Mar-2025 12:15:53 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:53 Europe/London] PluginManager: Plugin activated and initialized: SameInSameOut
[28-Mar-2025 12:15:53 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[28-Mar-2025 12:15:53 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[28-Mar-2025 12:15:53 Europe/London] PluginManager: Creating instance of plugin class: TestPlugin
[28-Mar-2025 12:15:53 Europe/London] PluginManager: Plugin not found in database, creating record for: TestPlugin
[28-Mar-2025 12:15:53 Europe/London] PluginManager ERROR: Failed to load plugin TestPlugin: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[28-Mar-2025 12:15:53 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[28-Mar-2025 12:15:53 Europe/London] PluginManager: Loaded plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[28-Mar-2025 12:15:53 Europe/London] PluginManager: Active plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[28-Mar-2025 12:15:53 Europe/London] === Starting message creation process ===
[28-Mar-2025 12:15:53 Europe/London] User authenticated successfully - User ID: 8
[28-Mar-2025 12:15:53 Europe/London] Received message data: {"conversation_id":"150","content":"what you do"}
[28-Mar-2025 12:15:53 Europe/London] Message data validation passed
[28-Mar-2025 12:15:53 Europe/London] Checking question limit for user 8: current usage = 0, limit = 500
[28-Mar-2025 12:15:53 Europe/London] Question limit check passed
[28-Mar-2025 12:15:53 Europe/London] Fetching conversation and plugin info for conversation ID: 150
[28-Mar-2025 12:15:53 Europe/London] Found conversation - Plugin ID: 12, Plugin Name: N8nWebhookHandler, Plugin Active: yes
[28-Mar-2025 12:15:53 Europe/London] Created message data structure
[28-Mar-2025 12:15:53 Europe/London] Attempting to get plugin instance for: N8nWebhookHandler
[28-Mar-2025 12:15:53 Europe/London] Successfully got plugin instance of class: N8nWebhookHandler
[28-Mar-2025 12:15:53 Europe/London] Plugin hooks: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:53 Europe/London] Executing before_send_message hook for plugin: N8nWebhookHandler
[28-Mar-2025 12:15:53 Europe/London] Plugin N8nWebhookHandler: Executing hook before_send_message
[28-Mar-2025 12:15:53 Europe/London] Plugin N8nWebhookHandler: Available hooks: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:53 Europe/London] Plugin N8nWebhookHandler: No handlers registered for hook before_send_message
[28-Mar-2025 12:15:53 Europe/London] before_send_message hook executed successfully
[28-Mar-2025 12:15:53 Europe/London] Saving message to database
[28-Mar-2025 12:15:53 Europe/London] Message saved successfully with ID: 170
[28-Mar-2025 12:15:53 Europe/London] Executing after_send_message hook for plugin: N8nWebhookHandler
[28-Mar-2025 12:15:53 Europe/London] Plugin N8nWebhookHandler: Executing hook after_send_message
[28-Mar-2025 12:15:53 Europe/London] Plugin N8nWebhookHandler: Available hooks: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:15:53 Europe/London] Plugin N8nWebhookHandler: Calling hook handler for after_send_message
[28-Mar-2025 12:15:53 Europe/London] N8nWebhookHandler: Starting message processing
[28-Mar-2025 12:15:53 Europe/London] N8nWebhookHandler: Message data: {"conversation_id":"150","content":"what you do","role":"user"}
[28-Mar-2025 12:15:53 Europe/London] N8nWebhookHandler: Using webhook URL: https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
[28-Mar-2025 12:15:53 Europe/London] N8nWebhookHandler: Sending request data: {"message":"what you do","conversation_id":"150","timestamp":"2025-03-28 12:15:53"}
[28-Mar-2025 12:15:53 Europe/London] N8nWebhookHandler: SSL certificate verification is disabled for testing
[28-Mar-2025 12:15:55 Europe/London] N8nWebhookHandler: Verbose curl output:
*   Trying [2606:4700:3030::6815:4001]:443...
* Connected to n8n.mazcode.com (2606:4700:3030::6815:4001) port 443
* ALPN: curl offers h2,http/1.1
* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384
* ALPN: server accepted h2
* Server certificate:
*  subject: CN=mazcode.com
*  start date: Mar 21 01:54:39 2025 GMT
*  expire date: Jun 19 02:51:08 2025 GMT
*  issuer: C=US; O=Google Trust Services; CN=WE1
*  SSL certificate verify result: unable to get local issuer certificate (20), continuing anyway.
* using HTTP/2
* [HTTP/2] [1] OPENED stream for https://n8n.mazcode.com/webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f
* [HTTP/2] [1] [:method: POST]
* [HTTP/2] [1] [:scheme: https]
* [HTTP/2] [1] [:authority: n8n.mazcode.com]
* [HTTP/2] [1] [:path: /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f]
* [HTTP/2] [1] [content-type: application/json]
* [HTTP/2] [1] [accept: application/json]
* [HTTP/2] [1] [content-length: 83]
> POST /webhook/b0e277cb-a3ab-40be-9c7d-2048c6bbad8f HTTP/2
Host: n8n.mazcode.com
Content-Type: application/json
Accept: application/json
Content-Length: 83

* old SSL session ID is stale, removing
< HTTP/2 200 
< date: Fri, 28 Mar 2025 12:15:54 GMT
< content-type: text/html; charset=utf-8
< vary: Accept-Encoding
< vary: Accept-Encoding
< cf-cache-status: DYNAMIC
< report-to: {"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=sXmMUlRzSAhWsT3Pv6738sBK%2F1miuBk7gIJaVQ%2FpfMwjMmV860t4mqWN8mEHZTarJ8pjKbGpEKLxbRB6WZki7oT48EY14ltwITCGNcYPsYq80ikRGE7drlrdZarZZ0Bx%2BmyL5WHXF%2BOsh4hYmcM%3D"}],"group":"cf-nel","max_age":604800}
< nel: {"success_fraction":0,"report_to":"cf-nel","max_age":604800}
< server: cloudflare
< cf-ray: 92770e32ad16ee5d-MXP
< alt-svc: h3=":443"; ma=86400
< server-timing: cfL4;desc="?proto=TCP&rtt=63043&min_rtt=62728&rtt_var=18019&sent=7&recv=8&lost=0&retrans=0&sent_bytes=3389&recv_bytes=917&delivery_rate=65042&cwnd=254&unsent_bytes=0&cid=ca485901c038c0e8&ts=1668&x=0"
< 
* Connection #0 to host n8n.mazcode.com left intact

[28-Mar-2025 12:15:55 Europe/London] N8nWebhookHandler: Webhook response code: 200
[28-Mar-2025 12:15:55 Europe/London] N8nWebhookHandler: Webhook response: أنا مساعدك المتخصص في تقديم خدمات التعارف والزواج. أساعدك في العثور على الشريك المثالي بناءً على تفضيلاتك واحتياجاتك. يمكنني فلترة النتائج، تحليل الشخصيات من خلال البيانات، وتقديم مقترحات مشوقة. 🌟

إذا كنت بحاجة للمساعدة في إيجاد شريك حياتك أو لديك أي استفسار، أنا هنا لمساعدتك! 😊
[28-Mar-2025 12:15:55 Europe/London] N8nWebhookHandler: Message successfully processed by webhook
[28-Mar-2025 12:15:55 Europe/London] Plugin N8nWebhookHandler: Hook handler executed successfully with result: أنا مساعدك المتخصص في تقديم خدمات التعارف والزواج. أساعدك في العثور على الشريك المثالي بناءً على تفضيلاتك واحتياجاتك. يمكنني فلترة النتائج، تحليل الشخصيات من خلال البيانات، وتقديم مقترحات مشوقة. 🌟

إذا كنت بحاجة للمساعدة في إيجاد شريك حياتك أو لديك أي استفسار، أنا هنا لمساعدتك! 😊
[28-Mar-2025 12:15:55 Europe/London] after_send_message hook executed successfully
[28-Mar-2025 12:15:55 Europe/London] Saving plugin response to database: أنا مساعدك المتخصص في تقديم خدمات التعارف والزواج. أساعدك في العثور على الشريك المثالي بناءً على تفضيلاتك واحتياجاتك. يمكنني فلترة النتائج، تحليل الشخصيات من خلال البيانات، وتقديم مقترحات مشوقة. 🌟

إذا كنت بحاجة للمساعدة في إيجاد شريك حياتك أو لديك أي استفسار، أنا هنا لمساعدتك! 😊
[28-Mar-2025 12:15:55 Europe/London] Plugin response saved with ID: 171
[28-Mar-2025 12:15:55 Europe/London] === Message creation process completed successfully ===
[28-Mar-2025 12:15:55 Europe/London] Sending response to client: {"success":true,"data":{"message":{"id":"170","conversation_id":"150","content":"what you do","role":"user"},"assistant_message":{"id":"171","conversation_id":"150","content":"\u0623\u0646\u0627 \u0645\u0633\u0627\u0639\u062f\u0643 \u0627\u0644\u0645\u062a\u062e\u0635\u0635 \u0641\u064a \u062a\u0642\u062f\u064a\u0645 \u062e\u062f\u0645\u0627\u062a \u0627\u0644\u062a\u0639\u0627\u0631\u0641 \u0648\u0627\u0644\u0632\u0648\u0627\u062c. \u0623\u0633\u0627\u0639\u062f\u0643 \u0641\u064a \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0627\u0644\u0634\u0631\u064a\u0643 \u0627\u0644\u0645\u062b\u0627\u0644\u064a \u0628\u0646\u0627\u0621\u064b \u0639\u0644\u0649 \u062a\u0641\u0636\u064a\u0644\u0627\u062a\u0643 \u0648\u0627\u062d\u062a\u064a\u0627\u062c\u0627\u062a\u0643. \u064a\u0645\u0643\u0646\u0646\u064a \u0641\u0644\u062a\u0631\u0629 \u0627\u0644\u0646\u062a\u0627\u0626\u062c\u060c \u062a\u062d\u0644\u064a\u0644 \u0627\u0644\u0634\u062e\u0635\u064a\u0627\u062a \u0645\u0646 \u062e\u0644\u0627\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a\u060c \u0648\u062a\u0642\u062f\u064a\u0645 \u0645\u0642\u062a\u0631\u062d\u0627\u062a \u0645\u0634\u0648\u0642\u0629. \ud83c\udf1f\n\n\u0625\u0630\u0627 \u0643\u0646\u062a \u0628\u062d\u0627\u062c\u0629 \u0644\u0644\u0645\u0633\u0627\u0639\u062f\u0629 \u0641\u064a \u0625\u064a\u062c\u0627\u062f \u0634\u0631\u064a\u0643 \u062d\u064a\u0627\u062a\u0643 \u0623\u0648 \u0644\u062f\u064a\u0643 \u0623\u064a \u0627\u0633\u062a\u0641\u0633\u0627\u0631\u060c \u0623\u0646\u0627 \u0647\u0646\u0627 \u0644\u0645\u0633\u0627\u0639\u062f\u062a\u0643! \ud83d\ude0a","role":"assistant"}}}
[28-Mar-2025 12:16:10 Europe/London] PluginManager: Loading plugins from directory: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins
[28-Mar-2025 12:16:10 Europe/London] PluginManager: Found plugin directories: Array
(
    [0] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler
    [1] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector
    [2] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler
    [3] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut
    [4] => C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin
)

[28-Mar-2025 12:16:10 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[28-Mar-2025 12:16:10 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/DirectMessageHandler/DirectMessageHandler.php
[28-Mar-2025 12:16:10 Europe/London] PluginManager: Creating instance of plugin class: DirectMessageHandler
[28-Mar-2025 12:16:10 Europe/London] PluginManager: Plugin not found in database, creating record for: DirectMessageHandler
[28-Mar-2025 12:16:10 Europe/London] PluginManager ERROR: Failed to load plugin DirectMessageHandler: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[28-Mar-2025 12:16:10 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[28-Mar-2025 12:16:10 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[28-Mar-2025 12:16:10 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/LLMModelSelector/LLMModelSelector.php
[28-Mar-2025 12:16:10 Europe/London] PluginManager: Creating instance of plugin class: LLMModelSelector
[28-Mar-2025 12:16:10 Europe/London] PluginManager: Plugin not found in database, creating record for: LLMModelSelector
[28-Mar-2025 12:16:10 Europe/London] PluginManager ERROR: Failed to load plugin LLMModelSelector: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[28-Mar-2025 12:16:10 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[28-Mar-2025 12:16:10 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[28-Mar-2025 12:16:10 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/N8nWebhookHandler/N8nWebhookHandler.php
[28-Mar-2025 12:16:10 Europe/London] PluginManager: Creating instance of plugin class: N8nWebhookHandler
[28-Mar-2025 12:16:10 Europe/London] PluginManager: Instantiating plugin with ID: 12
[28-Mar-2025 12:16:10 Europe/London] N8nWebhookHandler: Constructing with plugin ID: 12
[28-Mar-2025 12:16:10 Europe/London] N8nWebhookHandler: Constructing plugin
[28-Mar-2025 12:16:10 Europe/London] N8nWebhookHandler: Construction completed
[28-Mar-2025 12:16:10 Europe/London] PluginManager: Activating plugin: N8nWebhookHandler
[28-Mar-2025 12:16:10 Europe/London] N8nWebhookHandler: Activating plugin with ID: 12
[28-Mar-2025 12:16:10 Europe/London] Plugin N8nWebhookHandler: Activated with ID 12
[28-Mar-2025 12:16:10 Europe/London] N8nWebhookHandler: Creating/checking database tables
[28-Mar-2025 12:16:10 Europe/London] N8nWebhookHandler: Checking for existing settings
[28-Mar-2025 12:16:10 Europe/London] N8nWebhookHandler: Activation completed successfully
[28-Mar-2025 12:16:10 Europe/London] N8nWebhookHandler: Initializing plugin
[28-Mar-2025 12:16:10 Europe/London] N8nWebhookHandler: Registering hooks
[28-Mar-2025 12:16:10 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[28-Mar-2025 12:16:10 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:16:10 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[28-Mar-2025 12:16:10 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:16:10 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:16:10 Europe/London] N8nWebhookHandler: Initialization completed
[28-Mar-2025 12:16:10 Europe/London] PluginManager: Initializing plugin: N8nWebhookHandler
[28-Mar-2025 12:16:10 Europe/London] N8nWebhookHandler: Initializing plugin
[28-Mar-2025 12:16:10 Europe/London] N8nWebhookHandler: Registering hooks
[28-Mar-2025 12:16:10 Europe/London] Plugin N8nWebhookHandler: Registering hook after_send_message
[28-Mar-2025 12:16:10 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:16:10 Europe/London] Plugin N8nWebhookHandler: Registering hook admin_settings_page
[28-Mar-2025 12:16:10 Europe/London] Plugin N8nWebhookHandler: Hooks after registration: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:16:10 Europe/London] N8nWebhookHandler: Hooks registered: Array
(
    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [admin_settings_page] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => N8nWebhookHandler Object
                                (
                                    [name:protected] => N8nWebhookHandler
                                    [version:protected] => 1.0.0
                                    [description:protected] => Handles message processing through n8n webhooks
                                    [author:protected] => System Admin
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:N8nWebhookHandler:private] => 12
                                )

                            [1] => addSettingsPage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:16:10 Europe/London] N8nWebhookHandler: Initialization completed
[28-Mar-2025 12:16:10 Europe/London] PluginManager: Plugin activated and initialized: N8nWebhookHandler
[28-Mar-2025 12:16:10 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[28-Mar-2025 12:16:10 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/SameInSameOut/SameInSameOut.php
[28-Mar-2025 12:16:10 Europe/London] PluginManager: Creating instance of plugin class: SameInSameOut
[28-Mar-2025 12:16:10 Europe/London] PluginManager: Instantiating plugin with ID: 13
[28-Mar-2025 12:16:10 Europe/London] SameInSameOut: Constructing plugin
[28-Mar-2025 12:16:10 Europe/London] PluginManager: Activating plugin: SameInSameOut
[28-Mar-2025 12:16:10 Europe/London] Plugin SameInSameOut: Activated with ID 13
[28-Mar-2025 12:16:10 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[28-Mar-2025 12:16:10 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:16:10 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[28-Mar-2025 12:16:10 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:16:10 Europe/London] PluginManager: Initializing plugin: SameInSameOut
[28-Mar-2025 12:16:10 Europe/London] Plugin SameInSameOut: Registering hook before_send_message
[28-Mar-2025 12:16:10 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:16:10 Europe/London] Plugin SameInSameOut: Registering hook after_send_message
[28-Mar-2025 12:16:10 Europe/London] Plugin SameInSameOut: Hooks after registration: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:16:10 Europe/London] PluginManager: Plugin activated and initialized: SameInSameOut
[28-Mar-2025 12:16:10 Europe/London] PluginManager: Checking plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[28-Mar-2025 12:16:10 Europe/London] PluginManager: Loading plugin file: C:\Users\zagzo\Downloads\UniServerZ\www\chat/plugins/TestPlugin/TestPlugin.php
[28-Mar-2025 12:16:10 Europe/London] PluginManager: Creating instance of plugin class: TestPlugin
[28-Mar-2025 12:16:10 Europe/London] PluginManager: Plugin not found in database, creating record for: TestPlugin
[28-Mar-2025 12:16:10 Europe/London] PluginManager ERROR: Failed to load plugin TestPlugin: SQLSTATE[HY000]: General error: 1364 Field 'slug' doesn't have a default value
[28-Mar-2025 12:16:10 Europe/London] PluginManager ERROR: #0 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(59): PDOStatement->execute()
#1 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(12): PluginManager->loadPlugins()
#2 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\plugins\PluginManager.php(17): PluginManager->__construct()
#3 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(27): PluginManager::getInstance()
#4 C:\Users\zagzo\Downloads\UniServerZ\www\chat\app\api\v1\messages.php(240): MessagesController->__construct()
#5 {main}
[28-Mar-2025 12:16:10 Europe/London] PluginManager: Loaded plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[28-Mar-2025 12:16:10 Europe/London] PluginManager: Active plugins: Array
(
    [0] => N8nWebhookHandler
    [1] => SameInSameOut
)

[28-Mar-2025 12:16:10 Europe/London] === Starting message creation process ===
[28-Mar-2025 12:16:10 Europe/London] User authenticated successfully - User ID: 8
[28-Mar-2025 12:16:10 Europe/London] Received message data: {"conversation_id":"150","content":"hi"}
[28-Mar-2025 12:16:10 Europe/London] Message data validation passed
[28-Mar-2025 12:16:10 Europe/London] Checking question limit for user 8: current usage = 0, limit = 500
[28-Mar-2025 12:16:10 Europe/London] Question limit check passed
[28-Mar-2025 12:16:10 Europe/London] Fetching conversation and plugin info for conversation ID: 150
[28-Mar-2025 12:16:10 Europe/London] Found conversation - Plugin ID: 13, Plugin Name: SameInSameOut, Plugin Active: yes
[28-Mar-2025 12:16:10 Europe/London] Created message data structure
[28-Mar-2025 12:16:10 Europe/London] Attempting to get plugin instance for: SameInSameOut
[28-Mar-2025 12:16:10 Europe/London] Successfully got plugin instance of class: SameInSameOut
[28-Mar-2025 12:16:10 Europe/London] Plugin hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:16:10 Europe/London] Executing before_send_message hook for plugin: SameInSameOut
[28-Mar-2025 12:16:10 Europe/London] Plugin SameInSameOut: Executing hook before_send_message
[28-Mar-2025 12:16:10 Europe/London] Plugin SameInSameOut: Available hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:16:10 Europe/London] Plugin SameInSameOut: Calling hook handler for before_send_message
[28-Mar-2025 12:16:10 Europe/London] Plugin SameInSameOut: Hook handler executed successfully with result: hi
[28-Mar-2025 12:16:10 Europe/London] before_send_message hook executed successfully
[28-Mar-2025 12:16:10 Europe/London] Got response from before_send_message: hi
[28-Mar-2025 12:16:10 Europe/London] Saving message to database
[28-Mar-2025 12:16:10 Europe/London] Message saved successfully with ID: 172
[28-Mar-2025 12:16:10 Europe/London] Executing after_send_message hook for plugin: SameInSameOut
[28-Mar-2025 12:16:10 Europe/London] Plugin SameInSameOut: Executing hook after_send_message
[28-Mar-2025 12:16:10 Europe/London] Plugin SameInSameOut: Available hooks: Array
(
    [before_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

    [after_send_message] => Array
        (
            [0] => Array
                (
                    [callback] => Array
                        (
                            [0] => SameInSameOut Object
                                (
                                    [name:protected] => SameInSameOut
                                    [version:protected] => 1.0.0
                                    [description:protected] => A simple plugin that returns the exact same text sent by the user
                                    [author:protected] => System
                                    [config:protected] => Array
                                        (
                                        )

                                    [db:protected] => PDO Object
                                        (
                                        )

                                    [hooks:protected] => Array
 *RECURSION*
                                    [pluginId:SameInSameOut:private] => 13
                                )

                            [1] => processMessage
                        )

                    [priority] => 10
                )

        )

)

[28-Mar-2025 12:16:10 Europe/London] Plugin SameInSameOut: Calling hook handler for after_send_message
[28-Mar-2025 12:16:10 Europe/London] Plugin SameInSameOut: Hook handler executed successfully with result: hi
[28-Mar-2025 12:16:10 Europe/London] after_send_message hook executed successfully
[28-Mar-2025 12:16:10 Europe/London] Saving plugin response to database: hi
[28-Mar-2025 12:16:10 Europe/London] Plugin response saved with ID: 173
[28-Mar-2025 12:16:10 Europe/London] === Message creation process completed successfully ===
[28-Mar-2025 12:16:10 Europe/London] Sending response to client: {"success":true,"data":{"message":{"id":"172","conversation_id":"150","content":"hi","role":"user"},"assistant_message":{"id":"173","conversation_id":"150","content":"hi","role":"assistant"}}}
